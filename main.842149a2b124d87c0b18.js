(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),s=n("mrSG"),a=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new a.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},m=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=a.a.VERBOSE,m=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===m&&!0===d.get("logging_enabled")&&b(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.f)([t],Object(s.e)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));throw f.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",T="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===I||e===T)return-1;if(e===I||t===T)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D=function(t){var e,n,r,i,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},R=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(R.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout((function(){throw E("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),U=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B="websocket",H="long_polling",K=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function z(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===B)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return P(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var W=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),G={},Q={};function $(t){var e=t.toString();return G[e]||(G[e]=new W),G[e]}var Y=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Z="start",J="close",X=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=$(e),this.urlFn=function(t){return z(e,H,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Y(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new tt((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Z)n.id=o,n.password=a;else{if(i!==J)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tt=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),et="";function nt(t){et=t}var rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);var it=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=$(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),z(t,B,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+et+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new rt(this.connURL,[],r)}else this.mySock=new rt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ot=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[X,it]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=it&&it.isAvailable(),o=i&&!it.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[it];else{var a=this.transports_=[];try{for(var u=Object(s.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),st=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new ot(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),at=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.f)([],Object(s.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),ct=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),lt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ht(){return new lt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ft(t){return t.pieces_.length-t.pieceNum_}function pt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function gt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return wt(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=mt(t,0),r=mt(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ot(t,e){if(ft(t)!==ft(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ft(t)>ft(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);It(this)}}();function It(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tt(t))}function Tt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,kt,At=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),jt=1e3,Nt=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=jt,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),At.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ct.getInstance().on("online",l.onOnline_,l),l}return Object(s.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new st(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){E(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&E(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return j(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(s.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+et.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ct.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(at),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Dt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(I,t),r=new Pt(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pt.MIN},t}(),Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(T,xt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,xt)},e.prototype.toString=function(){return".key"},e}(Dt),Lt=new Rt,Mt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ut.EMPTY_NODE,this.right=null!=o?o:Ut.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ut.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ut.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ut=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function qt(t,e){return x(t.name,e.name)}function Bt(t,e){return x(t,e)}var Ht,Kt,zt,Wt,Gt,Qt=function(t){return"number"==typeof t?"number:"+D(t):"string:"+t},$t=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===kt||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===kt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===ft(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?D(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Zt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(T,new Yt("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=Kt(t);return new Pt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Dt)),Jt=Math.log(2),Xt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Xt(t.length));return new Ut(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(ee&&Zt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ee},{".priority":Zt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ut?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Lt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Pt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?te(i,e.getCompare()):ee;var l=e.toString(),h=Object(s.a)({},this.indexSet_);h[l]=e;var d=Object(s.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,(function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Pt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Pt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,(function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Pt(e.name,r)):t})),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Ut(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(pt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Gt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(o.d)(".priority"!==dt(t)||1===ft(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Zt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Qt(this.getPriority().val())+":"),this.forEachChild(Zt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Lt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Lt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Zt),r=e.getIterator(Zt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Lt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Ut(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(s.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return P(t,(function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=oe(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(oe(e))}var r=[],i=!1;if(P(t,(function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Pt(t,n)))}})),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,(function(t){return t.name}),Bt);if(i){var a=te(r,Zt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Zt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Pt,{MIN:{value:new Pt(I,re.EMPTY_NODE)},MAX:{value:new Pt(T,ie)}}),Rt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,kt=ie,zt=ie,Kt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!_t(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Pt(T,t)},e.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},e}(Dt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Dt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=le.charAt(ae[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),de=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return T;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return I;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(me(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Zt,(function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))})),e.isLeafNode()||e.forEachChild(Zt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(ge(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Zt,(function(t,e){i.matches(new Pt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Pt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:T},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Zt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Oe(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ee(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Se(t,e,n){var r;return t.index_===Lt?("string"==typeof e&&(e=de(e)),r=Ee(t,e,n)):r=Ee(t,e,null==n?T:de(n)),r.startAfterSet_=!0,r}function Ie(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Te(t,e,n){var r;return t.index_===Lt?("string"==typeof e&&(e=fe(e)),r=Ie(t,e,n)):r=Ie(t,e,null==n?I:fe(n)),r.endBeforeSet_=!0,r}function xe(t,e){var n=t.copy();return n.index_=e,n}function ke(t){var e,n={};return t.isDefault()||(t.index_===Zt?e="$priority":t.index_===ce?e="$value":t.index_===Lt?e="$key":(Object(o.d)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Ae=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(s.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=ke(t.getQueryParams());this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=ke(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){E("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(at),je=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ne(){return{value:null,children:new Map}}function Pe(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,Ne()),Pe(t.children.get(r),e=pt(e),n)}}function De(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){De(r,new lt(e.toString()+"/"+t),n)}))}var Re=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&P(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Le=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Re(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,(function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Me=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Fe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ve,Ue=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Me.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(e));return new t(ht(),n,this.revert)}return Object(o.d)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(pt(this.path),this.affectedTree,this.revert)},t}(),qe=function(){function t(t,e){this.source=t,this.path=e,this.type=Me.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ht()):new t(this.source,pt(this.path))},t}(),Be=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Me.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ht(),this.snap.getImmediateChild(e)):new t(this.source,pt(this.path),this.snap)},t}(),He=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Me.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Be(this.source,ht(),n.value):new t(this.source,ht(),n)}return Object(o.d)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ke=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ze=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function We(t,e,n,r,i,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Pt(e.childName,e.snapshotNode),i=new Pt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Ge(t,e){return{eventCache:t,serverCache:e}}function Qe(t,e,n,r){return Ge(new Ke(e,n,r),t.serverCache)}function $e(t,e,n,r){return Ge(t.eventCache,new Ke(e,n,r))}function Ye(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ze(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Je=function(){function t(t,e){void 0===e&&(Ve||(Ve=new Ut(k)),e=Ve),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,(function(t,e){n=n.set(new lt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(_t(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(t),e);return null!=i?{path:bt(new lt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(_t(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(pt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(pt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(pt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(pt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(pt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ht(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(bt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ht(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(pt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ht(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(pt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ht(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(bt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Je(null))},t}();function tn(t,e,n){if(_t(e))return new Xe(new Je(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Xe(t.writeTree_.set(i,o))}var a=new Je(n),u=t.writeTree_.setTree(e,a);return new Xe(u)}function en(t,e,n){var r=t;return P(n,(function(t,n){r=tn(r,bt(e,t),n)})),r}function nn(t,e){if(_t(e))return Xe.empty();var n=t.writeTree_.setTree(e,new Je(null));return new Xe(n)}function rn(t,e){return null!=on(t,e)}function on(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function sn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Zt,(function(t,n){e.push(new Pt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Pt(t,n.value))})),e}function an(t,e){if(_t(e))return t;var n=on(t,e);return new Xe(null!=n?new Je(n):t.writeTree_.subtree(e))}function un(t){return t.writeTree_.isEmpty()}function cn(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.d)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(bt(e,n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(bt(e,".priority"),i)),r}(ht(),t.writeTree_,e)}function ln(t,e){return wn(e,t)}function hn(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function dn(t){return t.visible}function fn(t,e,n){for(var r=Xe.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=tn(r,u=wt(n,a),s.snap):Et(a,n)&&(u=wt(a,n),r=tn(r,ht(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Et(n,a))r=en(r,u=wt(n,a),s.children);else if(Et(a,n))if(_t(u=wt(a,n)))r=en(r,ht(),s.children);else{var c=Object(o.D)(s.children,dt(u));if(c){var l=c.getChild(pt(u));r=tn(r,ht(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=an(t.visibleWrites,e);return!i&&un(o)?n:i||null!=n||rn(o,ht())?cn(fn(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))}),e),n||re.EMPTY_NODE):null}var s=on(t.visibleWrites,e);if(null!=s)return s;var a=an(t.visibleWrites,e);return un(a)?n:null!=n||rn(a,ht())?cn(a,n||re.EMPTY_NODE):null}function gn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=on(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Zt,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=an(t.visibleWrites,e);return n.forEachChild(Zt,(function(t,e){var n=cn(an(o,new lt(t)),e);r=r.updateImmediateChild(t,n)})),sn(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return sn(an(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(rn(t.visibleWrites,s))return null;var a=an(t.visibleWrites,s);return un(a)?i.getChild(n):cn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e){return on(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function bn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=on(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?cn(an(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function _n(t,e){return wn(bt(t.treePath,e),t.writeTree)}function wn(t,e){return{treePath:t,writeTree:e}}var Cn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),On=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),En=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ke(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ze(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=an(t.visibleWrites,e),c=on(u,ht());if(null!=c)a=c;else{if(null==n)return[];a=cn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Sn(t,e,n,r,i,s){var a=e.eventCache;if(null!=vn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ze(e),h=yn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=gn(r,Ze(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=dt(n);if(".priority"===f){Object(o.d)(1===ft(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var y=pt(n),m=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=mn(r,n,a.getNode(),c);m=null!=v?a.getNode().getImmediateChild(f).updateChild(y,v):a.getNode().getImmediateChild(f)}else m=bn(r,f,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),f,m,y,i,s):a.getNode()}}return Qe(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function In(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=dt(n);if(!c.isCompleteForPath(n)&&ft(n)>1)return e;var f=pt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,On,null)}var g=$e(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return Sn(t,g,n,i,new En(i,g,o),a)}function Tn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new En(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Qe(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Qe(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=pt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===gt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:Qe(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function xn(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function An(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Je(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new lt(n),u,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new lt(n),h,i,o,s,a)}})),c}var jn,Nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Ke(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ke(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ge(h,l),this.eventGenerator_=new ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Pn(t,e){var n=Ze(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!_t(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Ln(t,e,n,r){e.type===Me.MERGE&&null!==e.source.queryId&&(Object(o.d)(Ze(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(Ye(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Cn;if(n.type===Me.OVERWRITE){var c=n;c.source.fromUser?s=Tn(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=In(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Me.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=bt(n,r);xn(e,dt(c))&&(a=Tn(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=bt(n,r);xn(e,dt(c))||(a=Tn(t,a,c,u,i,o,s))})),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=An(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Me.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=vn(r,n))return e;var u=new En(r,e,i),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Ze(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof re,"serverChildren would be complete if leaf node"),h=yn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=dt(n),p=bn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,pt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,pt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Ze(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=vn(r,ht()),Qe(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=vn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return In(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Je(null);return u.getNode().forEachChild(Lt,(function(t,e){c=c.set(new lt(t),e)})),An(t,e,n,c,i,o,a,s)}return e}var l=new Je(null);return r.foreach((function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),An(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Me.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Sn(t,$e(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,On,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ye(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(Ye(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Mn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),We(t,i,"child_removed",e,r,n),We(t,i,"child_added",e,r,n),We(t,i,"child_moved",o,r,n),We(t,i,"child_changed",e,r,n),We(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Fn=function(){return function(){this.views=new Map}}();function Vn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),Ln(c,e,n,r)}var l=[];try{for(var h=Object(s.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Ln(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Un(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=gn(n,i?r:null),u=!1;a?u=!0:r instanceof re?(a=yn(n,r),u=!1):(a=re.EMPTY_NODE,u=!1);var c=Ge(new Ke(a,u,!1),new Ke(r,i,!1));return new Nn(e,c)}return s}function qn(t){var e,n,r=[];try{for(var i=Object(s.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var o=Object(s.g)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Pn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Hn(t,e){if(e.getQueryParams().loadsAllData())return Wn(t);var n=e.queryIdentifier();return t.views.get(n)}function Kn(t,e){return null!=Hn(t,e)}function zn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(s.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query.getQueryParams().loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,Qn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Je(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function $n(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=tn(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?er(t,new Be({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=fn(t.allWrites,dn,ht()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=nn(t.visibleWrites,r.path):P(r.children,(function(e){t.visibleWrites=nn(t.visibleWrites,bt(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var i=new Je(null);return null!=r.snap?i=i.set(ht(),!0):P(r.children,(function(t){i=i.set(new lt(t),!0)})),er(t,new Ue(r.path,i,n))}return[]}function Zn(t,e,n){return er(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var i=e.path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e.queryIdentifier()||Kn(a,e))){var c=function(t,e,n,r){var i,a,u=e.queryIdentifier(),c=[],l=[],h=zn(t);if("default"===u)try{for(var d=Object(s.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(s.e)(f.value,2),y=g[0];l=l.concat(Rn(p=g[1],n,r)),Dn(p)&&(t.views.delete(y),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(m){i={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Rn(p,n,r)),Dn(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!zn(t)&&c.push(new(Object(o.d)(jn,"Reference.ts has not been loaded"),jn)(e.database,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex((function(t){return t.getQueryParams().loadsAllData()})),d=t.syncPointTree_.findOnPath(i,(function(t,e){return zn(e)}));if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold((function(t,e,n){if(e&&zn(e))return[Wn(e)];var r=[];return e&&(r=qn(e)),P(n,(function(t,e){r=r.concat(e)})),r}))}(f),g=0;g<p.length;++g){var y=p[g],m=y.query,v=nr(t,y);t.listenProvider_.startListening(ur(m),rr(t,m),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(ur(e),null):l.forEach((function(e){var n=t.queryToTagMap.get(ir(e));t.listenProvider_.stopListening(ur(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=ir(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Xn(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=wt(t,r);i=i||Bn(e,n),s=s||zn(e)}));var a,u=t.syncPointTree_.get(r);u?(s=s||zn(u),i=i||Bn(u,ht())):(u=new Fn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Bn(e,ht());n&&(i=i.updateImmediateChild(t,n))})));var c=Kn(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=ir(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Un(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Zt,(function(t,e){r.push(ge(t,e))})),n.isFullyInitialized()&&r.push(pe(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Hn(u,e);d=d.concat(function(t,e,n){var r=e.path,i=rr(t,e),s=nr(t,n),a=t.listenProvider_.startListening(ur(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!_t(t)&&e&&zn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(qn(e).map((function(t){return t.query})))),P(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(ur(h),rr(t,h))}return a}(t,e,f))}return d}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Bn(n,wt(t,e));if(r)return r}));return pn(r,e,i,n,!0)}function er(t,e){return function t(e,n,r,i){if(_t(e.path))return function t(e,n,r,i){var o=n.get(ht());null==r&&null!=o&&(r=Bn(o,ht()));var s=[];return n.children.inorderTraversal((function(n,o){var a=r?r.getImmediateChild(n):null,u=_n(i,n),c=e.operationForChild(n);c&&(s=s.concat(t(c,o,a,u)))})),o&&(s=s.concat(Vn(o,e,i,r))),s}(e,n,r,i);var o=n.get(ht());null==r&&null!=o&&(r=Bn(o,ht()));var s=[],a=dt(e.path),u=e.operationForChild(a),c=n.children.get(a);if(c&&u){var l=r?r.getImmediateChild(a):null,h=_n(i,a);s=s.concat(t(u,c,l,h))}return o&&(s=s.concat(Vn(o,e,i,r))),s}(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,ht()))}function nr(t,e){var n=e.query,r=rr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=or(t,n);if(r){var i=sr(r),o=i.path,s=i.queryId,a=wt(o,e);return ar(t,o,new qe(Fe(s),a))}return[]}(t,n.path,r):function(t,e){return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function rr(t,e){var n=ir(e);return t.queryToTagMap.get(n)}function ir(t){return t.path.toString()+"$"+t.queryIdentifier()}function or(t,e){return t.tagToQueryMap.get(e)}function sr(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function ar(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),Vn(r,n,ln(t.pendingWriteTree_,e),null)}function ur(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var cr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),lr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),hr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?dr(t[".sv"],e,n):"object"==typeof t[".sv"]?fr(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},dr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},fr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},pr=function(t,e,n,r){return yr(e,new lr(n,t),r)},gr=function(t,e,n){return yr(t,new cr(e),n)};function yr(t,e,n){var r,i=t.getPriority().val(),o=hr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=hr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Zt,(function(t,i){var o=yr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var mr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function vr(t,e){for(var n=e instanceof lt?e:new lt(e),r=t,i=dt(n);null!==i;){var s=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new mr(i,r,s),i=dt(n=pt(n))}return r}function br(t){return t.node.value}function _r(t,e){t.node.value=e,function t(e){null!==e.parent&&function(e,n,r){var i=function(t){return void 0===br(t)&&!wr(t)}(r),s=Object(o.h)(e.node.children,n);i&&s?(delete e.node.children[n],e.node.childCount--,t(e)):i||s||(e.node.children[n]=r.node,e.node.childCount++,t(e))}(e.parent,e.name,e)}(t)}function wr(t){return t.node.childCount>0}function Cr(t,e){P(t.node.children,(function(n,r){e(new mr(n,t,r))}))}function Or(t){return new lt(null===t.parent?t.name:Or(t.parent)+"/"+t.name)}var Er=/[\[\].#$\/\u0000-\u001F\u007F]/,Sr=/[\[\].#$\u0000-\u001F\u007F]/,Ir=10485760,Tr=function(t){return"string"==typeof t&&0!==t.length&&!Er.test(t)},xr=function(t){return"string"==typeof t&&0!==t.length&&!Sr.test(t)},kr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Ar=function(t,e,n,r,i){i&&void 0===n||jr(Object(o.l)(t,e,i),n,r)},jr=function(t,e,n){var r=n instanceof lt?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Tt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Tt(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+Tt(r));if("string"==typeof e&&e.length>Ir/3&&Object(o.E)(e)>Ir)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Tt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Tr(e)))throw new Error(t+" contains an invalid key ("+e+") "+Tt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.E)(u),It(a),jr(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.E)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),i&&s)throw new Error(t+' contains ".value" child '+Tt(r)+" in addition to actual children.")}},Nr=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,(function(t,e){var n=new lt(t);if(jr(s,e,bt(r,n)),".priority"===gt(n)&&!kr(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=mt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Tr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Pr=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!kr(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Dr=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Rr=function(t,e,n,r){if(!(r&&void 0===n||Tr(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lr=function(t,e,n,r){if(!(r&&void 0===n||xr(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mr=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lr(t,e,n,r)},Fr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Vr=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Tr(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xr(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ur=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},qr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Br(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ot(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Hr(t,e,n){Br(t,n),zr(t,(function(t){return Ot(t,e)}))}function Kr(t,e,n){Br(t,n),zr(t,(function(t){return Et(t,e)||Et(e,t)}))}function zr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Wr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Wr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();m&&_("event: "+n.toString()),M(r)}}}var Gr="repo_interrupt",Qr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ne(),this.transactionQueueTree_=new mr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function $r(t){var e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Yr(t){return(e=(e={timestamp:$r(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Zr(t,e,n,r,i){t.dataUpdateCount++;var s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.B)(n,(function(t){return oe(t)}));a=function(t,e,n,r){var i=or(t,r);if(i){var o=sr(i),s=o.path,a=o.queryId,u=wt(s,e),c=Je.fromObject(n);return ar(t,s,new He(Fe(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=oe(n);a=function(t,e,n,r){var i=or(t,r);if(null!=i){var o=sr(i),s=o.path,a=o.queryId,u=wt(s,e);return ar(t,s,new Be(Fe(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.B)(n,(function(t){return oe(t)}));a=function(t,e,n){var r=Je.fromObject(n);return er(t,new He({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Zn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=yi(t,s)),Kr(t.eventQueue_,d,a)}function Jr(t,e){Xr(t,"connected",e),!1===e&&function(t){hi(t,"onDisconnectEvents");var e=Yr(t),n=Ne();De(t.onDisconnect_,ht(),(function(r,i){var o=pr(r,i,t.serverSyncTree_,e);Pe(n,r,o)}));var r=[];De(n,ht(),(function(e,n){r=r.concat(Zn(t.serverSyncTree_,e,n));var i=_i(t,e);yi(t,i)})),t.onDisconnect_=Ne(),Kr(t.eventQueue_,ht(),r)}(t)}function Xr(t,e,n){var r=new lt("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Zn(t.infoSyncTree_,r,i);Kr(t.eventQueue_,r,o)}function ti(t){return t.nextWriteId_++}function ei(t,e,n,r,i){hi(t,"set",{path:e.toString(),value:n,priority:r});var o=Yr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=gr(s,a,o),c=ti(t),l=$n(t.serverSyncTree_,e,u,c,!0);Br(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o);Kr(t.eventQueue_,e,s),di(0,i,n,r)}));var h=_i(t,e);yi(t,h),Kr(t.eventQueue_,h,[])}function ni(t,e,n,r){hi(t,"update",{path:e.toString(),value:n});var i=!0,s=Yr(t),a={};if(P(n,(function(n,r){i=!1,a[n]=pr(bt(e,n),oe(r),t.serverSyncTree_,s)})),i)_("update() called with empty data.  Don't do anything."),di(0,r,"ok",void 0);else{var u=ti(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=en(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Je.fromObject(n);return er(t,new He({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Br(t.eventQueue_,c),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o),a=s.length>0?yi(t,e):e;Kr(t.eventQueue_,a,s),di(0,r,n,i)})),P(n,(function(n){var r=_i(t,bt(e,n));yi(t,r)})),Kr(t.eventQueue_,e,[])}}function ri(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(_t(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Zt,(function(t,n){Pe(e,new lt(t),n)})),t(e,n)}if(e.children.size>0){var i=dt(n);return n=pt(n),e.children.has(i)&&t(e.children.get(i),n)&&e.children.delete(i),0===e.children.size}return!0}(t.onDisconnect_,e),di(0,n,r,i)}))}function ii(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Pe(t.onDisconnect_,e,i),di(0,r,n,o)}))}function oi(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Pe(t.onDisconnect_,e,o),di(0,i,n,r)}))}function si(t,e,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void di(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&P(n,(function(n,r){var i=oe(r);Pe(t.onDisconnect_,bt(e,n),i)})),di(0,r,i,o)}))}function ai(t,e,n){var r;r=".info"===dt(e.path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Hr(t.eventQueue_,e.path,r)}function ui(t,e,n){var r;r=".info"===dt(e.path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Hr(t.eventQueue_,e.path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Gr)}function li(t){t.persistentConnection_&&t.persistentConnection_.resume(Gr)}function hi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.f)([r],Object(s.e)(e)))}function di(t,e,n,r){e&&M((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function fi(t,e,n,r,i,s){hi(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=pi(t,e,void 0);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{jr("transaction failed: Data returned ",c,a.path),a.status=0;var l=vr(t.transactionQueueTree_,e),h=br(l)||[];h.push(a),_r(l,h);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.D)(c,".priority"),Object(o.d)(kr(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(tr(t.serverSyncTree_,e)||re.EMPTY_NODE).getPriority().val();var f=Yr(t),g=oe(c,d),y=gr(g,u,f);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=y,a.currentWriteId=ti(t);var m=$n(t.serverSyncTree_,e,y,a.currentWriteId,a.applyLocally);Kr(t.eventQueue_,e,m),gi(t,t.transactionQueueTree_)}}function pi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function gi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||bi(t,e),br(e)){var n=vi(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=pi(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,(function(r){hi(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(bi(t,vr(t.transactionQueueTree_,e)),gi(t,t.transactionQueueTree_),Kr(t.eventQueue_,e,i),a=0;a<o.length;a++)M(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(E("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;yi(t,e)}}),a)}(t,Or(e),n)}else wr(e)&&Cr(e,(function(e){gi(t,e)}))}function yi(t,e){var n=mi(t,e),r=Or(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(o.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=pi(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){jr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,y=Yr(t),m=gr(p,d,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ti(t),s.splice(s.indexOf(g),1),i=(i=i.concat($n(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Kr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(bi(t,t.transactionQueueTree_),u=0;u<r.length;u++)M(r[u]);gi(t,t.transactionQueueTree_)}}(t,vi(t,n),r),r}function mi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===br(r);)r=vr(r,n),n=dt(e=pt(e));return r}function vi(t,e){var n=[];return function t(e,n,r){var i=br(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);Cr(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function bi(t,e){var n=br(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,_r(e,n.length>0?n:void 0)}Cr(e,(function(e){bi(t,e)}))}function _i(t,e){var n=Or(mi(t,e)),r=vr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){wi(t,e)})),wi(t,r),function t(e,n,r,i){r&&!i&&n(e),Cr(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(r,(function(e){wi(t,e)})),n}function wi(t,e){var n=br(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?_r(e,void 0):n.length=s+1,Kr(t.eventQueue_,Or(e),i),a=0;a<r.length;a++)M(r[a])}}var Ci,Oi=function(t,e){var n=Ei(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new lt(n.pathString)}},Ei=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Si=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),Lr("DataSnapshot.child",1,e,!1);var n=new lt(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Zt)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Lr("DataSnapshot.hasChild",1,t,!1);var e=new lt(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Zt))}))},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ii=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return ri(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),Fr("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return ii(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),Fr("OnDisconnect.set",this.path_),Ar("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return ii(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),Fr("OnDisconnect.setWithPriority",this.path_),Ar("OnDisconnect.setWithPriority",1,t,this.path_,!1),Pr("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return oi(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),Fr("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nr("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return si(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ti=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),xi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ki=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ti("value",this,new Si(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new xi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Ai=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new xi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ti(t.type,this,new Si(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ji=function(){function t(t,e,n,r){this.database=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r,this.repo=t.repo_}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(Ci,"Reference.ts has not been loaded"),Ci},set:function(t){Ci=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==T)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Zt){if(null!=e&&!kr(e)||null!=n&&!kr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.database,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),Dr("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new ki(t,e||null,n||null);ai(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Ai(t,e,n);ai(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),Dr("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new ki(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Ai(i,null,n||null));ui(this.repo,this,r)},t.prototype.get=function(){var t,e,n,r=this;return(t=this.repo,e=this,n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=wt(t,n);r=r||Bn(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Bn(i,ht()):(i=new Fn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ke(r,!0,!1):null;return Ye(Un(i,e,ln(t.pendingWriteTree_,e.path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e),null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=oe(n),i=Zn(t.serverSyncTree_,e.path,r);return Hr(t.eventQueue_,e.path,i),Promise.resolve(r)}),(function(n){return hi(t,"get for query "+Object(o.G)(e)+" failed: "+n),Promise.reject(new Error(n))}))).then((function(t){return new Si(t,r.getRef(),r.getQueryParams().getIndex())}))},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Dr("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.database,this.path,Ce(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.database,this.path,Oe(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Lr("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new lt(e);if(_t(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ue(n),i=xe(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.database,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=xe(this.queryParams_,Lt);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=xe(this.queryParams_,Zt);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=xe(this.queryParams_,ce);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),Ar("Query.startAt",1,e,this.path,!0),Rr("Query.startAt",2,n,!0);var r=Ee(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),Ar("Query.startAfter",1,e,this.path,!1),Rr("Query.startAfter",2,n,!0);var r=Se(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),Ar("Query.endAt",1,e,this.path,!0),Rr("Query.endAt",2,n,!0);var r=Ie(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),Ar("Query.endBefore",1,e,this.path,!1),Rr("Query.endBefore",2,n,!0);var r=Te(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),Ar("Query.equalTo",1,t,this.path,!1),Rr("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+yt(this.path)},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Zt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=j(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=Ot(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ni=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Pi=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(s.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),_t(this.path)?null:gt(this.path)},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof lt||(null===dt(this.path)?Mr("Reference.child",1,t,!1):Lr("Reference.child",1,t,!1)),new e(this.database,bt(this.path,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=vt(this.path);return null===t?null:new e(this.database,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),Fr("Reference.set",this.path),Ar("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return ei(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),Fr("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nr("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return ni(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),Fr("Reference.setWithPriority",this.path),Ar("Reference.setWithPriority",1,t,this.path,!1),Pr("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return ei(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),Fr("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,n,r){var i=this;if(Object(o.H)("Reference.transaction",1,3,arguments.length),Fr("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,n,!0),Ur("Reference.transaction",3,r,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===r&&(r=!0);var s=new o.a;"function"==typeof n&&s.promise.catch((function(){}));var a=function(t,r,o){if(t)s.reject(t),"function"==typeof n&&n(t,r,null);else{var a=new Si(o,new e(i.database,i.path),Zt);s.resolve(new Ni(r,a)),"function"==typeof n&&n(null,r,a)}},u=function(){},c=new e(this.database,this.path);c.on("value",u);var l=function(){c.off("value",u)};return fi(this.repo,this.path,t,a,l,r),s.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),Fr("Reference.setPriority",this.path),Pr("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return ei(this.repo,bt(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),Fr("Reference.push",this.path),Ar("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=$r(this.repo),i=he(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return Fr("Reference.onDisconnect",this.path),new Ii(this.repo,this.path)},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(ji);ji.__referenceConstructor=Pi,function(t){Object(o.d)(!jn,"__referenceConstructor has already been defined"),jn=t}(Pi);var Di={},Ri=!1;function Li(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=Oi(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=Oi(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new U:new V(t,e);Vr("Invalid Firebase Database URL",1,a),_t(a.path)||O("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n){var r=Object(o.D)(Di,e.name);r||(Di[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Qr(t,Ri,e,n),r[t.toURLString()]=i,i}(u,t,l);return new Mi(h)}var Mi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(s.b)(e,void 0,void 0,(function(){return Object(s.d)(this,(function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.D)(Di,e.app.name))&&Object(o.D)(n,e.key)===e||O("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),ci(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Qr||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=$(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ae(t.repoInfo_,(function(e,n,r,i){Zr(t,e,n,r,i)}),t.authTokenProvider_),setTimeout((function(){return Jr(t,!0)}),0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Nt(t.repoInfo_,t.app.options.appId,(function(e,n,r,i){Zr(t,e,n,r,i)}),(function(e){Jr(t,e)}),(function(e){!function(t,e){P(e,(function(e,n){Xr(t,e,n)}))}(t,e)}),t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.statsReporter_=(n=function(){return new Le(t.stats_,t.server_)},r=t.repoInfo_.toString(),Q[r]||(Q[r]=n()),Q[r]),t.infoData_=new je,t.infoSyncTree_=new Qn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=Zn(t.infoSyncTree_,e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Xr(t,"connected",!1),t.serverSyncTree_=new Qn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Kr(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Pi(this,ht())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new K(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new U)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof Pi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=Oi(t,this.repo_.repoInfo_.nodeAdmin);Vr(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),ci(this.repo_)},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),li(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Fi=Object.freeze({__proto__:null,forceLongPolling:function(){it.forceDisallow(),X.forceAllow()},forceWebSockets:function(){X.forceDisallow()},isWebSocketsAvailable:function(){return it.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Re(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);P(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;nt(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:Li(e,u,n,a),namespace:o}}}),Vi=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ui=Object.freeze({__proto__:null,DataConnection:Vi,RealTimeConnection:st,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:K,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Ri=t}(t)}}),qi=Mi.ServerValue;!function(e){nt(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",(function(t,e){var n=e.instanceIdentifier;return Li(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)}),"PUBLIC").setServiceProps({Reference:Pi,Query:ji,Database:Mi,DataSnapshot:Si,enableLogging:b,INTERNAL:Fi,ServerValue:qi,TEST_ACCESS:Ui}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.7"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.3.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return ho})),n.d(e,"b",(function(){return ja})),n.d(e,"c",(function(){return Ia})),n.d(e,"d",(function(){return Ea})),n.d(e,"e",(function(){return Sa})),n.d(e,"f",(function(){return wu})),n.d(e,"g",(function(){return hu})),n.d(e,"h",(function(){return Gi})),n.d(e,"i",(function(){return Ba})),n.d(e,"j",(function(){return ls})),n.d(e,"k",(function(){return Da})),n.d(e,"l",(function(){return hs})),n.d(e,"m",(function(){return On})),n.d(e,"n",(function(){return ua})),n.d(e,"o",(function(){return G})),n.d(e,"p",(function(){return h})),n.d(e,"q",(function(){return W})),n.d(e,"r",(function(){return lo})),n.d(e,"s",(function(){return As})),n.d(e,"t",(function(){return js})),n.d(e,"u",(function(){return Pa})),n.d(e,"v",(function(){return ut})),n.d(e,"w",(function(){return fu})),n.d(e,"x",(function(){return at})),n.d(e,"y",(function(){return su})),n.d(e,"z",(function(){return za})),n.d(e,"A",(function(){return d})),n.d(e,"B",(function(){return Aa})),n.d(e,"C",(function(){return ka})),n.d(e,"D",(function(){return gs})),n.d(e,"E",(function(){return fs})),n.d(e,"F",(function(){return ps})),n.d(e,"G",(function(){return ms})),n.d(e,"H",(function(){return hr})),n.d(e,"I",(function(){return p})),n.d(e,"J",(function(){return yu})),n.d(e,"K",(function(){return Rs})),n.d(e,"L",(function(){return Xa})),n.d(e,"M",(function(){return $i})),n.d(e,"N",(function(){return bs})),n.d(e,"O",(function(){return vs})),n.d(e,"P",(function(){return Ms})),n.d(e,"Q",(function(){return yt})),n.d(e,"R",(function(){return au})),n.d(e,"S",(function(){return qn})),n.d(e,"T",(function(){return j})),n.d(e,"U",(function(){return Un})),n.d(e,"V",(function(){return bu})),n.d(e,"W",(function(){return nu})),n.d(e,"X",(function(){return Na})),n.d(e,"Y",(function(){return Yi})),n.d(e,"Z",(function(){return Xs})),n.d(e,"ab",(function(){return cr})),n.d(e,"bb",(function(){return Wn})),n.d(e,"cb",(function(){return jn})),n.d(e,"db",(function(){return Pn})),n.d(e,"eb",(function(){return Mn})),n.d(e,"fb",(function(){return Rn})),n.d(e,"gb",(function(){return Dn})),n.d(e,"hb",(function(){return Ln})),n.d(e,"ib",(function(){return $s})),n.d(e,"jb",(function(){return vu})),n.d(e,"kb",(function(){return Ys})),n.d(e,"lb",(function(){return Zs})),n.d(e,"mb",(function(){return Nn})),n.d(e,"nb",(function(){return F})),n.d(e,"ob",(function(){return Oo})),n.d(e,"pb",(function(){return Mo})),n.d(e,"qb",(function(){return Lo})),n.d(e,"rb",(function(){return Qs})),n.d(e,"sb",(function(){return $t})),n.d(e,"tb",(function(){return x})),n.d(e,"ub",(function(){return An})),n.d(e,"vb",(function(){return go})),n.d(e,"wb",(function(){return Bt})),n.d(e,"xb",(function(){return as})),n.d(e,"yb",(function(){return Ar})),n.d(e,"zb",(function(){return Io})),n.d(e,"Ab",(function(){return zo})),n.d(e,"Bb",(function(){return _a})),n.d(e,"Cb",(function(){return _t})),n.d(e,"Db",(function(){return Tt})),n.d(e,"Eb",(function(){return v})),n.d(e,"Fb",(function(){return b})),n.d(e,"Gb",(function(){return Et})),n.d(e,"Hb",(function(){return xt})),n.d(e,"Ib",(function(){return xo})),n.d(e,"Jb",(function(){return Do})),n.d(e,"Kb",(function(){return Po})),n.d(e,"Lb",(function(){return No})),n.d(e,"Mb",(function(){return Ro})),n.d(e,"Nb",(function(){return bn})),n.d(e,"Ob",(function(){return Xo})),n.d(e,"Pb",(function(){return rt})),n.d(e,"Qb",(function(){return ko})),n.d(e,"Rb",(function(){return Oa})),n.d(e,"Sb",(function(){return Fo})),n.d(e,"Tb",(function(){return wa})),n.d(e,"Ub",(function(){return De})),n.d(e,"Vb",(function(){return qo})),n.d(e,"Wb",(function(){return sa})),n.d(e,"Xb",(function(){return aa})),n.d(e,"Yb",(function(){return Ao})),n.d(e,"Zb",(function(){return ba})),n.d(e,"ac",(function(){return fe})),n.d(e,"bc",(function(){return dr})),n.d(e,"cc",(function(){return St})),n.d(e,"dc",(function(){return To})),n.d(e,"ec",(function(){return Yo})),n.d(e,"fc",(function(){return Zo})),n.d(e,"gc",(function(){return Jo}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}const c="__parameters__";function l(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const h=l("Inject",t=>({token:t})),d=l("Optional"),f=l("Self"),p=l("SkipSelf");var g=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function m(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function v(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function b(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function _(t){return w(t,t[O])||w(t,t[I])}function w(t,e){return e&&e.token===t?e:null}function C(t){return t&&(t.hasOwnProperty(E)||t.hasOwnProperty(T))?t[E]:null}const O=y({"\u0275prov":y}),E=y({"\u0275inj":y}),S=y({"\u0275provFallback":y}),I=y({ngInjectableDef:y}),T=y({ngInjectorDef:y});function x(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(x).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function k(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const A=y({__forward_ref__:y});function j(t){return t.__forward_ref__=j,t.toString=function(){return x(this())},t}function N(t){return P(t)?t():t}function P(t){return"function"==typeof t&&t.hasOwnProperty(A)&&t.__forward_ref__===j}const D="undefined"!=typeof globalThis&&globalThis,R="undefined"!=typeof window&&window,L="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,M="undefined"!=typeof global&&global,F=D||M||R||L,V=y({"\u0275cmp":y}),U=y({"\u0275dir":y}),q=y({"\u0275pipe":y}),B=y({"\u0275mod":y}),H=y({"\u0275loc":y}),K=y({"\u0275fac":y}),z=y({__NG_ELEMENT_ID__:y});class W{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=v({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const G=new W("INJECTOR",-1),Q={},$=/\n/gm,Y="__source",Z=y({provide:String,useValue:y});let J,X=void 0;function tt(t){const e=X;return X=t,e}function et(t){const e=J;return J=t,e}function nt(t,e=g.Default){if(void 0===X)throw new Error("inject() must be called from an injection context");return null===X?it(t,void 0,e):X.get(t,e&g.Optional?null:void 0,e)}function rt(t,e=g.Default){return(J||nt)(N(t),e)}function it(t,e,n){const r=_(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&g.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${x(t)}]`)}function ot(t){const e=[];for(let n=0;n<t.length;n++){const r=N(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=g.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof d||"Optional"===i.ngMetadataName||i===d?n|=g.Optional:i instanceof p||"SkipSelf"===i.ngMetadataName||i===p?n|=g.SkipSelf:i instanceof f||"Self"===i.ngMetadataName||i===f?n|=g.Self:t=i instanceof h||i===h?i.token:i}e.push(rt(t,n))}else e.push(rt(r))}return e}class st{get(t,e=Q){if(e===Q){const e=new Error(`NullInjectorError: No provider for ${x(t)}!`);throw e.name="NullInjectorError",e}return e}}class at{}class ut{}function ct(t,e){t.forEach(t=>Array.isArray(t)?ct(t,e):e(t))}function lt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ht(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dt(t,e,n){let r=pt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ft(t,e){const n=pt(t,e);if(n>=0)return t[1|n]}function pt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var gt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),yt=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const mt={},vt=[];let bt=0;function _t(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===gt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||yt.Emulated,id:"c",styles:t.styles||vt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=bt++,n.inputs=It(t.inputs,e),n.outputs=It(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(wt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ct):null,n})}function wt(t){return kt(t)||function(t){return t[U]||null}(t)}function Ct(t){return function(t){return t[q]||null}(t)}const Ot={};function Et(t){const e={type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{Ot[t.id]=t.type}),e}function St(t,e){return u(()=>{const n=jt(t,!0);n.declarations=e.declarations||vt,n.imports=e.imports||vt,n.exports=e.exports||vt})}function It(t,e){if(null==t)return mt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Tt=_t;function xt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function kt(t){return t[V]||null}function At(t,e){return t.hasOwnProperty(K)?t[K]:null}function jt(t,e){const n=t[B]||null;if(!n&&!0===e)throw new Error(`Type ${x(t)} does not have '\u0275mod' property.`);return n}const Nt=20,Pt=10;function Dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Rt(t){return Array.isArray(t)&&!0===t[1]}function Lt(t){return 0!=(8&t.flags)}function Mt(t){return 2==(2&t.flags)}function Ft(t){return 1==(1&t.flags)}function Vt(t){return null!==t.template}function Ut(t){return 0!=(512&t[2])}class qt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Bt(){return Ht}function Ht(t){return t.type.prototype.ngOnChanges&&(t.setInput=zt),Kt}function Kt(){const t=Wt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===mt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function zt(t,e,n,r){const i=Wt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:mt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new qt(u&&u.currentValue,e,s===mt),t[r]=e}function Wt(t){return t.__ngSimpleChanges__||null}Bt.ngInherit=!0;const Gt="http://www.w3.org/2000/svg";let Qt=void 0;function $t(t){Qt=t}function Yt(t){return!!t.listen}const Zt={createRenderer:(t,e)=>void 0!==Qt?Qt:"undefined"!=typeof document?document:void 0};function Jt(t){for(;Array.isArray(t);)t=t[0];return t}function Xt(t,e){return Jt(e[t+Nt])}function te(t,e){return Jt(e[t.index])}function ee(t,e){return t.data[e+Nt]}function ne(t,e){const n=e[t];return Dt(n)?n:n[0]}function re(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ie(t){return 4==(4&t[2])}function oe(t){return 128==(128&t[2])}function se(t,e){return null===t||null==e?null:t[e]}function ae(t){t[18]=0}function ue(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ce={lFrame:Te(null),bindingsEnabled:!0,checkNoChangesMode:!1};function le(){return ce.bindingsEnabled}function he(){return ce.lFrame.lView}function de(){return ce.lFrame.tView}function fe(t){ce.lFrame.contextLView=t}function pe(){return ce.lFrame.currentTNode}function ge(t,e){ce.lFrame.currentTNode=t,ce.lFrame.isParent=e}function ye(){return ce.lFrame.isParent}function me(){return ce.checkNoChangesMode}function ve(t){ce.checkNoChangesMode=t}function be(){return ce.lFrame.bindingIndex++}function _e(t,e){const n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,we(e)}function we(t){ce.lFrame.currentDirectiveIndex=t}function Ce(){return ce.lFrame.currentQueryIndex}function Oe(t){ce.lFrame.currentQueryIndex=t}function Ee(t,e){const n=Ie();ce.lFrame=n,n.currentTNode=e,n.lView=t}function Se(t){const e=Ie(),n=t[1];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function Ie(){const t=ce.lFrame,e=null===t?null:t.child;return null===e?Te(t):e}function Te(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function xe(){const t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ke=xe;function Ae(){const t=xe();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function je(){return ce.lFrame.selectedIndex}function Ne(t){ce.lFrame.selectedIndex=t}function Pe(){const t=ce.lFrame;return ee(t.tView,t.selectedIndex)}function De(){ce.lFrame.currentNamespace=Gt}function Re(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Le(t,e,n){Ve(t,e,3,n)}function Me(t,e,n,r){(3&t[2])===n&&Ve(t,e,n,r)}function Fe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ve(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Ue(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Ue(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const qe=-1;class Be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function He(t,e,n){const r=Yt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];ze(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ke(t){return 3===t||4===t||6===t}function ze(t){return 64===t.charCodeAt(0)}function We(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ge(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ge(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Qe(t){return t!==qe}function $e(t){return 32767&t}function Ye(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}function Ze(t){return"string"==typeof t?t:null==t?"":""+t}function Je(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ze(t)}const Xe=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(F))();function tn(t){return t instanceof Function?t():t}let en=!0;function nn(t){const e=en;return en=t,e}let rn=0;function on(t,e){const n=an(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,sn(r.data,t),sn(e,null),sn(r.blueprint,null));const i=un(t,e),o=t.injectorIndex;if(Qe(i)){const t=$e(i),n=Ye(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function sn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function an(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function un(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return qe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return qe}function cn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(z)&&(r=n[z]),null==r&&(r=n[z]=rn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function ln(t,e,n,r=g.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(z)?t[z]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){Ee(e,t);try{const t=i();if(null!=t||r&g.Optional)return t;throw new Error(`No provider for ${Je(n)}!`)}finally{ke()}}else if("number"==typeof i){if(-1===i)return new mn(t,e);let o=null,s=an(t,e),a=qe,u=r&g.Host?e[16][6]:null;for((-1===s||r&g.SkipSelf)&&(a=-1===s?un(t,e):e[s+8],a!==qe&&yn(r,!1)?(o=e[1],s=$e(a),e=Ye(a,e)):s=-1);-1!==s;){const t=e[1];if(gn(i,s,t.data)){const t=dn(s,e,n,o,r,u);if(t!==hn)return t}a=e[s+8],a!==qe&&yn(r,e[1].data[s+8]===u)&&gn(i,s,e)?(o=t,s=$e(a),e=Ye(a,e)):s=-1}}}if(r&g.Optional&&void 0===i&&(i=null),0==(r&(g.Self|g.Host))){const t=e[9],o=et(void 0);try{return t?t.get(n,i,r&g.Optional):it(n,i,r&g.Optional)}finally{et(o)}}if(r&g.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Je(n)}]`)}const hn={};function dn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=fn(a,s,n,null==r?Mt(a)&&en:r!=s&&2===a.type,i&g.Host&&o===a);return null!==u?pn(e,s,u,a):hn}function fn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Vt(t)&&t.type===n)return u}return null}function pn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Be){const s=i;if(s.resolving)throw new Error("Circular dep for "+Je(o[n]));const a=nn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?et(s.injectImpl):null;Ee(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ht(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&et(u),nn(a),s.resolving=!1,ke()}}return i}function gn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function yn(t,e){return!(t&g.Self||t&g.Host&&e)}class mn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ln(this._tNode,this._lView,t,void 0,e)}}function vn(t){const e=t;if(P(t))return()=>{const t=vn(N(e));return t?t():null};let n=At(e);if(null===n){const t=C(e);n=t&&t.factory}return n||null}function bn(t){return u(()=>{const e=t.prototype.constructor,n=e[K]||vn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||vn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function _n(t){return t.ngDebugContext}function wn(t){return t.ngOriginalError}function Cn(t,...e){t.error(...e)}class On{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Cn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_n(t)?_n(t):this._findContext(wn(t)):null}_findOriginalError(t){let e=wn(t);for(;e&&wn(e);)e=wn(e);return e}}class En{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Sn extends En{getTypeName(){return"HTML"}}class In extends En{getTypeName(){return"Style"}}class Tn extends En{getTypeName(){return"Script"}}class xn extends En{getTypeName(){return"URL"}}class kn extends En{getTypeName(){return"ResourceURL"}}function An(t){return t instanceof En?t.changingThisBreaksApplicationSecurity:t}function jn(t,e){const n=Nn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Nn(t){return t instanceof En&&t.getTypeName()||null}function Pn(t){return new Sn(t)}function Dn(t){return new In(t)}function Rn(t){return new Tn(t)}function Ln(t){return new xn(t)}function Mn(t){return new kn(t)}let Fn=!0,Vn=!1;function Un(){return Vn=!0,Fn}function qn(){if(Vn)throw new Error("Cannot enable prod mode after platform setup.");Fn=!1}class Bn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Hn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(t){return(t=String(t)).match(Kn)||t.match(zn)?t:(Un()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Gn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Qn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const $n=Gn("area,br,col,hr,img,wbr"),Yn=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Gn("rp,rt"),Jn=Qn(Zn,Yn),Xn=Qn($n,Qn(Yn,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qn(Zn,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jn),tr=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),er=Gn("srcset"),nr=Qn(tr,er,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rr=Gn("script,style,template");class ir{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Xn.hasOwnProperty(e))return this.sanitizedSomething=!0,!rr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!nr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;tr[o]&&(s=Wn(s)),er[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Wn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ar(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Xn.hasOwnProperty(e)&&!$n.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ar(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const or=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sr=/([^\#-~ |!])/g;function ar(t){return t.replace(/&/g,"&amp;").replace(or,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(sr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ur;function cr(t,e){let n=null;try{ur=ur||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Bn:new Hn(t)}(t);let r=e?String(e):"";n=ur.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ur.getInertBodyElement(r)}while(r!==o);const s=new ir,a=s.sanitizeChildren(lr(n)||n);return Un()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=lr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function lr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var hr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function dr(t){const e=function(){const t=he();return t&&t[12]}();return e?e.sanitize(hr.URL,t)||"":jn(t,"URL")?An(t):Wn(Ze(t))}function fr(t,e){t.__ngContext__=e}function pr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const gr="ng-template";function yr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==pr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function mr(t){return 0===t.type&&t.tagName!==gr}function vr(t,e,n){return e===(0!==t.type||n?t.tagName:gr)}function br(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ke(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!vr(t,u,n)||""===u&&1===e.length){if(_r(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!yr(t.attrs,c,n)){if(_r(r))return!1;s=!0}continue}const l=wr(8&r?"class":u,i,mr(t),n);if(-1===l){if(_r(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==pr(e,c,0)||2&r&&c!==t){if(_r(r))return!1;s=!0}}}}else{if(!s&&!_r(r)&&!_r(u))return!1;if(s&&_r(u))continue;s=!1,r=u|1&r}}return _r(r)||s}function _r(t){return 0==(1&t)}function wr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Cr(t,e,n=!1){for(let r=0;r<e.length;r++)if(br(t,e[r],n))return!0;return!1}function Or(t,e){return t?":not("+e.trim()+")":e}function Er(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||_r(s)||(e+=Or(o,i),i=""),r=s,o=o||!_r(r);n++}return""!==i&&(e+=Or(o,i)),e}const Sr={};function Ir(t){const e=t[3];return Rt(e)?e[3]:e}function Tr(t){return kr(t[13])}function xr(t){return kr(t[4])}function kr(t){for(;null!==t&&!Rt(t);)t=t[4];return t}function Ar(t){jr(de(),he(),je()+t,me())}function jr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Le(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Me(e,r,0,n)}Ne(n)}function Nr(t,e){return t<<17|e<<2}function Pr(t){return t>>17&32767}function Dr(t){return 2|t}function Rr(t){return(131068&t)>>2}function Lr(t,e){return-131069&t|e<<2}function Mr(t){return 1|t}function Fr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Oe(i),n.contentQueries(2,e[o],o)}}}function Vr(t,e,n){return Yt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Ur(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ae(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function qr(t,e,n,r,i){const o=e+Nt,s=t.data[o]||function(t,e,n,r,i){const o=pe(),s=ye(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return ge(s,!0),s}function Br(t,e,n){Se(e);try{const r=t.viewQuery;null!==r&&vi(1,r,n);const i=t.template;null!==i&&zr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Fr(t,e),t.staticViewQueries&&vi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)fi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ae()}}function Hr(t,e,n,r){const i=e[2];if(256==(256&i))return;Se(e);const o=me();try{ae(e),ce.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&zr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Le(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Me(e,n,0,null),Fe(e,0)}if(function(t){for(let e=Tr(t);null!==e;e=xr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ue(r,1),n[2]|=1024}}}(e),function(t){for(let e=Tr(t);null!==e;e=xr(e))for(let t=Pt;t<e.length;t++){const n=e[t],r=n[1];oe(n)&&Hr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Fr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Le(e,n)}else{const n=t.contentHooks;null!==n&&Me(e,n,1),Fe(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Ne(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(_e(r,i),s(2,e[i])),i++)}}}finally{Ne(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)di(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&vi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Le(e,n)}else{const n=t.viewHooks;null!==n&&Me(e,n,2),Fe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ue(e[3],-1))}finally{Ae()}}function Kr(t,e,n,r){const i=e[10],o=!me(),s=ie(e);try{o&&!s&&i.begin&&i.begin(),s&&Br(t,e,r),Hr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function zr(t,e,n,r,i){const o=je();try{Ne(-1),2&r&&e.length>Nt&&jr(t,e,0,me()),n(r,i)}finally{Ne(o)}}function Wr(t,e,n){le()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||on(n,e),fr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Vt(r);o&&ui(e,n,r);const u=pn(e,t,a,n);fr(u,e),null!==s&&ci(0,a-i,u,r,0,s),o&&(ne(n.index,e)[8]=u)}}(t,e,n,te(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-Nt,u=ce.lFrame.currentDirectiveIndex;try{Ne(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];we(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?ni(r,i):s&&o.push(null)}}finally{Ne(-1),we(u)}}(t,e,n))}function Gr(t,e,n=te){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Qr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=$r(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function $r(t,e,n,r,i,o,s,a,u,c){const l=Nt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Sr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Yr(t,e,n,r){const i=_i(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Zr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Jr(t,e,n,r,i,o,s,a){const u=te(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Ci(t,n,c,r,i),Mt(e)&&function(t,e){const n=ne(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.tagName||"",r):i,Yt(o)?o.setProperty(u,r,i):ze(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Xr(t,e,n,r){let i=!1;if(le()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Cr(n,s.selectors,!1)&&(i||(i=[]),cn(on(n,e),t,s.type),Vt(s)?(ii(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,si(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}ri(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=We(n.mergedAttrs,c.hostAttrs),ai(t,e,c),oi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Nt),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Nt),u=!0),ti(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||mr(e)?null:li(n,i);o.push(c),s=Zr(n,u,s),a=Zr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),ei(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=We(n.mergedAttrs,n.attrs),i}function ti(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function ei(t,e,n){for(let r=0;r<n;r++)e.push(Sr),t.blueprint.push(Sr),t.data.push(null)}function ni(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ri(t,e,n){const r=Nt-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function ii(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function oi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Vt(e)&&(n[""]=t)}}function si(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ai(t,e,n){t.data.push(n);const r=n.factory||(n.factory=At(n.type)),i=new Be(r,Vt(n),null);t.blueprint.push(i),e.push(i)}function ui(t,e,n){const r=te(e,t),i=Qr(n),o=t[10],s=pi(t,Ur(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ci(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function li(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function hi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function di(t,e){const n=ne(e,t);if(oe(n)){const t=n[1];80&n[2]?Hr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Tr(e);null!==r;r=xr(r))for(let e=Pt;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Hr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=ne(n[r],e);oe(i)&&i[5]>0&&t(i)}}(n)}}function fi(t,e){const n=ne(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Br(r,n,n[8])}function pi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function gi(t){for(;t;){t[2]|=64;const e=Ir(t);if(Ut(t)&&!e)return t;t=e}return null}function yi(t,e,n){const r=e[10];r.begin&&r.begin();try{Hr(t,e,t.template,n)}catch(i){throw wi(e,i),i}finally{r.end&&r.end()}}function mi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=re(n),i=r[1];Kr(i,r,i.template,n)}}(t[8])}function vi(t,e,n){Oe(0),e(t,n)}const bi=(()=>Promise.resolve(null))();function _i(t){return t[7]||(t[7]=[])}function wi(t,e){const n=t[9],r=n?n.get(On,null):null;r&&r.handleError(e)}function Ci(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Oi(t,e,n,r,i){if(null!=r){let o,s=!1;Rt(r)?o=r:Dt(r)&&(s=!0,r=r[0]);const a=Jt(r);0===t&&null!==n?null==i?ki(e,n,a):xi(e,n,a,i||null):1===t&&null!==n?xi(e,n,a,i||null):2===t?function(t,e,n){const r=ji(t,e);r&&function(t,e,n,r){Yt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Jt(n)&&Oi(e,t,r,o,i);for(let s=Pt;s<n.length;s++){const i=n[s];Di(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ei(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ue(i,-1)),n.splice(r,1)}function Si(t,e){if(t.length<=Pt)return;const n=Pt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ei(o,r),e>0&&(t[n-1][4]=r[4]);const s=ht(t,Pt+e);Di(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ii(t,e){if(!(256&e[2])){const n=e[11];Yt(n)&&n.destroyNode&&Di(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ti(t[1],t);for(;e;){let n=null;if(Dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Dt(e)&&Ti(e[1],e),e=e[3];null===e&&(e=t),Dt(e)&&Ti(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ti(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Jt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&Yt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Rt(e[3])){n!==e[3]&&Ei(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xi(t,e,n,r){Yt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function ki(t,e,n){Yt(t)?t.appendChild(e,n):e.appendChild(n)}function Ai(t,e,n,r){null!==r?xi(t,e,n,r):ki(t,e,n)}function ji(t,e){return Yt(t)?t.parentNode(e):e.parentNode}function Ni(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return te(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==yt.ShadowDom&&n!==yt.Native)return null}return te(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){return 3===t.type||4===t.type?te(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Ai(t,i,n[e],o);else Ai(t,i,n,o)}}function Pi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&fr(Jt(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(Pi(t,e,n.child,r,i,o,!1),Oi(e,t,i,a,o)):1===u?Ri(t,e,r,n,i,o):Oi(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Di(t,e,n,r,i,o){Pi(n,r,t.firstChild,e,i,o,!1)}function Ri(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Oi(e,t,i,a[u],o);else Pi(t,e,a,s[3],i,o,!0)}function Li(t,e,n){Yt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Mi(t,e,n){Yt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Fi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Jt(s)),Rt(s))for(let e=Pt;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Ir(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Ii(this._lView[1],this._lView)}onDestroy(t){Yr(this._lView[1],this._lView,null,t)}markForCheck(){gi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){yi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ve(!0);try{yi(t,e,n)}finally{ve(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Di(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Vi extends Fi{constructor(t){super(t),this._view=t}detectChanges(){mi(this._view)}checkNoChanges(){!function(t){ve(!0);try{mi(t)}finally{ve(!1)}}(this._view)}get context(){return null}}let Ui,qi,Bi;function Hi(t,e,n){return Ui||(Ui=class extends t{}),new Ui(te(e,n))}function Ki(t,e,n,r){return qi||(qi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ur(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Br(e,n,t),new Fi(n)}}),0===n.type?new qi(r,n,Hi(e,n,r)):null}function zi(t,e,n,r){let i;Bi||(Bi=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Hi(e,this._hostTNode,this._hostView)}get injector(){return new mn(this._hostTNode,this._hostView)}get parentInjector(){const t=un(this._hostTNode,this._hostView);if(Qe(t)){const e=Ye(t,this._hostView),n=$e(t);return new mn(e[1].data[n+8],e)}return new mn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(at,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Rt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Bi(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Pt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Pt?(e[4]=n[i],lt(n,Pt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=Pt+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return te(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return Rt(e)?t(-1,e):Jt(e)}}{const t=n[16],i=t[6],o=Ir(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=ji(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Di(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),lt(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Si(this._lContainer,e);n&&(ht(this._lContainer[8],e),Ii(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Si(this._lContainer,e);return n&&null!=ht(this._lContainer[8],e)?new Fi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Rt(o))i=o;else{let t;if(3===n.type)t=Jt(o);else if(t=r[11].createComment(""),Ut(r)){const e=r[11],i=te(n,r);xi(e,ji(e,i),t,function(t,e){return Yt(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Ni(r[1],r,t,n);r[n.index]=i=hi(o,r,t,n),pi(r,i)}return new Bi(i,n,r)}function Wi(t=!1){return function(t,e,n){if(!n&&Mt(t)){const n=ne(t.index,e);return new Fi(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Fi(e[16],e):null}(pe(),he(),t)}let Gi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Qi(),t})();const Qi=Wi,$i=Function,Yi=new W("Set Injector scope."),Zi={},Ji={},Xi=[];let to=void 0;function eo(){return void 0===to&&(to=new st),to}function no(t,e=null,n=null,r){return new ro(t,n,e||eo(),r)}class ro{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ct(e,n=>this.processProvider(n,t,e)),ct([t],t=>this.processInjectorType(t,[],i)),this.records.set(G,so(void 0,this));const o=this.records.get(Yi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:x(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Q,n=g.Default){this.assertNotDestroyed();const r=tt(this);try{if(!(n&g.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof W)&&_(t);e=n&&this.injectableDefInScope(n)?so(io(t),Zi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&g.Self?eo():this.parent).get(t,e=n&g.Optional&&e===Q?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(x(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Y]&&i.unshift(e[Y]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=x(e);if(Array.isArray(e))i=e.map(x).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):x(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace($,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{tt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(x(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=N(t)))return!1;let r=C(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ct(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ct(r,t=>this.processProvider(t,n,r||Xi))}}this.injectorDefTypes.add(o),this.records.set(o,so(r.factory,Zi));const a=r.providers;if(null!=a&&!s){const e=t;ct(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=uo(t=N(t))?t:N(t&&t.provide);const i=function(t,e,n){return ao(t)?so(void 0,t.useValue):so(oo(t),Zi)}(t);if(uo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=so(void 0,Zi,!0),e.factory=()=>ot(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Zi&&(e.value=Ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function io(t){const e=_(t),n=null!==e?e.factory:At(t);if(null!==n)return n;const r=C(t);if(null!==r)return r.factory;if(t instanceof W)throw new Error(`Token ${x(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${x(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[I]||t[S]&&t[S]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function oo(t,e,n){let r=void 0;if(uo(t)){const e=N(t);return At(e)||io(e)}if(ao(t))r=()=>N(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...ot(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>rt(N(t.useExisting));else{const e=N(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return At(e)||io(e);r=()=>new e(...ot(t.deps))}var i;return r}function so(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ao(t){return null!==t&&"object"==typeof t&&Z in t}function uo(t){return"function"==typeof t}const co=function(t,e,n){return function(t,e=null,n=null,r){const i=no(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let lo=(()=>{class t{static create(t,e){return Array.isArray(t)?co(t,e,""):co(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Q,t.NULL=new st,t.\u0275prov=v({token:t,providedIn:"any",factory:()=>rt(G)}),t.__NG_ELEMENT_ID__=-1,t})();const ho=new W("AnalyzeForEntryComponents");function fo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=k(i,t):2==o&&(r=k(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function po(t,e){const n=re(t)[1],r=n.data.length-1;Re(n,{directiveStart:r,directiveEnd:r+1})}function go(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=yo(t.inputs),e.declaredInputs=yo(t.declaredInputs),e.outputs=yo(t.outputs);const n=i.hostBindings;n&&bo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&mo(t,o),s&&vo(t,s),m(t.inputs,i.inputs),m(t.declaredInputs,i.declaredInputs),m(t.outputs,i.outputs),Vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===go&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=We(i.hostAttrs,n=We(n,i.hostAttrs))}}(r)}function yo(t){return t===mt?{}:t===vt?[]:t}function mo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function vo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function bo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let _o=null;function wo(){if(!_o){const t=F.Symbol;if(t&&t.iterator)_o=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_o=n)}}}return _o}class Co{constructor(t){this.wrapped=t}static wrap(t){return new Co(t)}static unwrap(t){return Co.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Co}}function Oo(t){return!!Eo(t)&&(Array.isArray(t)||!(t instanceof Map)&&wo()in t)}function Eo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function So(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Io(t,e,n,r){const i=he();return So(i,be(),e)&&(de(),function(t,e,n,r,i,o){const s=te(t,e),a=e[11];if(null==r)Yt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Ze(r):i(r,t.tagName||"",n);Yt(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Pe(),i,t,e,n,r)),Io}function To(t,e,n,r,i,o,s,a){const u=he(),c=de(),l=t+Nt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=qr(e,t,0,s||null,se(c,a));Xr(e,n,l,se(c,u)),Re(e,l);const h=l.tViews=$r(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];ge(h,!1);const d=u[11].createComment("");Ni(c,u,d,h),fr(d,u),pi(u,u[l]=hi(d,u,d,h)),Ft(h)&&Wr(c,u,h),null!=s&&Gr(u,h,a)}function xo(t,e=g.Default){const n=he();return null===n?rt(t,e):ln(pe(),n,N(t),e)}function ko(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ke(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(pe(),t)}function Ao(t,e,n){const r=he();return So(r,be(),e)&&Jr(de(),Pe(),r,t,e,r[11],n,!1),Ao}function jo(t,e,n,r,i){const o=i?"class":"style";Ci(t,n,e.inputs[o],o,r)}function No(t,e,n,r){const i=he(),o=de(),s=Nt+t,a=i[11],u=i[s]=Vr(e,a,ce.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=qr(e,t,2,i,se(a,o));return Xr(e,n,u,se(a,s)),null!==u.attrs&&fo(u,u.attrs,!1),null!==u.mergedAttrs&&fo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];ge(c,!0);const l=c.mergedAttrs;null!==l&&He(a,u,l);const h=c.classes;null!==h&&Mi(a,u,h);const d=c.styles;null!==d&&Li(a,u,d),Ni(o,i,u,c),0===ce.lFrame.elementDepthCount&&fr(u,i),ce.lFrame.elementDepthCount++,Ft(c)&&(Wr(o,i,c),function(t,e,n){if(Lt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Gr(i,c)}function Po(){let t=pe();ye()?ce.lFrame.isParent=!1:(t=t.parent,ge(t,!1));const e=t;ce.lFrame.elementDepthCount--;const n=de();n.firstCreatePass&&(Re(n,t),Lt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&jo(n,e,he(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&jo(n,e,he(),e.stylesWithoutHost,!1)}function Do(t,e,n,r){No(t,e,n,r),Po()}function Ro(){return he()}function Lo(t){return!!t&&"function"==typeof t.then}function Mo(t){return!!t&&"function"==typeof t.subscribe}function Fo(t,e,n=!1,r){const i=he(),o=de(),s=pe();return function(t,e,n,r,i,o,s=!1,a){const u=Ft(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=_i(e);let h=!0;if(2===r.type){const d=te(r,e),f=a?a(d):mt,p=f.target||d,g=l.length,y=a?t=>a(Jt(t[r.index])).target:r.index;if(Yt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Uo(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Uo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Fo}function Vo(t,e,n){try{return!1!==e(n)}catch(r){return wi(t,r),!1}}function Uo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?ne(t.index,e):e;0==(32&e[2])&&gi(s);let a=Vo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Vo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function qo(t=1){return function(t){return(ce.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ce.lFrame.contextLView))[8]}(t)}const Bo=[];function Ho(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Pr(o):Rr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ko(t[a],e)&&(u=!0,t[a+1]=r?Mr(n):Dr(n)),a=r?Pr(n):Rr(n)}u&&(t[n+1]=r?Dr(o):Mr(o))}function Ko(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pt(t,e)>=0}function zo(t,e){return function(t,e,n,r){const i=he(),o=de(),s=function(t){const e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[je()+Nt],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=ce.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Go(n=Wo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Wo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==Rr(r))return t[Pr(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Wo(null,t,e,n[1],r),n=Go(n,e.attrs,r),function(t,e,n,r){t[Pr(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Go(r,t[o].hostAttrs,true);return Go(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=Pr(s),u=Rr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pt(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Pr(t[a+1]);t[r+1]=Nr(e,a),0!==e&&(t[e+1]=Lr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Nr(a,0),0!==a&&(t[a+1]=Lr(t[a+1],r)),a=r;else t[r+1]=Nr(u,0),0===a?a=r:t[u+1]=Lr(t[u+1],r),u=r;l&&(t[r+1]=Dr(t[r+1])),Ho(t,c,r,!0),Ho(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&pt(o,e)>=0&&(n[r+1]=Mr(n[r+1]))}(e,c,t,r),s=Nr(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Sr&&So(i,s,e)&&function(t,e,n,r,i,o,s,a){if(2!==e.type)return;const u=t.data,c=u[a+1];$o(1==(1&c)?Qo(u,e,n,i,Rr(c),s):void 0)||($o(o)||function(t){return 2==(2&t)}(c)&&(o=Qo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Yt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Xt(je(),n),i,o))}(o,o.data[je()+Nt],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=x(An(t))),t}(e),true,s)}(t,e),zo}function Wo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Go(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Go(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dt(t,s,!!n||e[++o]))}return void 0===t?null:t}function Qo(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Sr&&(l=c?Bo:void 0);let h=c?ft(l,r):u===r?l:void 0;if(o&&!$o(h)&&(h=ft(e,r)),$o(h)&&(a=h,s))return a;const d=t[i+1];i=s?Pr(d):Rr(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ft(t,r))}return a}function $o(t){return void 0!==t}function Yo(t,e=""){const n=he(),r=de(),i=t+Nt,o=r.firstCreatePass?qr(r,t,2,null,null):r.data[i],s=n[i]=function(t,e){return Yt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Ni(r,n,s,o),ge(o,!1)}function Zo(t){return Jo("",t,""),Zo}function Jo(t,e,n){const r=he(),i=function(t,e,n,r){return So(t,be(),n)?e+Ze(n)+r:Sr}(r,t,e,n);return i!==Sr&&function(t,e,n){const r=Xt(e,t),i=t[11];Yt(i)?i.setValue(r,n):r.textContent=n}(r,je(),i),Jo}function Xo(t,e,n){const r=he();return So(r,be(),e)&&Jr(de(),Pe(),r,t,e,r[11],n,!0),Xo}function ts(t,e,n,r,i){if(t=N(t),Array.isArray(t))for(let o=0;o<t.length;o++)ts(t[o],e,n,r,i);else{const o=de(),s=he();let a=uo(t)?t:N(t.provide),u=oo(t);const c=pe(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(uo(t)||!t.multi){const r=new Be(u,i,xo),f=rs(a,e,i?l:l+d,h);-1===f?(cn(on(c,s),o,a),es(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=rs(a,e,l+d,h),p=rs(a,e,l,l+d),g=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!g){cn(on(c,s),o,a);const l=function(t,e,n,r,i){const o=new Be(t,n,xo);return o.multi=[],o.index=e,o.componentProviders=0,ns(o,i,r&&!n),o}(i?os:is,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),es(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else es(o,t,f>-1?f:p,ns(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function es(t,e,n,r){const i=uo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ns(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function rs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function is(t,e,n,r){return ss(this.multi,[])}function os(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=pn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ss(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ss(i,o);return o}function ss(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function as(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=de();if(r.firstCreatePass){const i=Vt(t);ts(n,r.data,r.blueprint,i,!0),ts(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class us{}class cs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${x(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ls=(()=>{class t{}return t.NULL=new cs,t})(),hs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>ds(t),t})();const ds=function(t){return Hi(t,pe(),he())};class fs{}var ps=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ys(),t})();const ys=function(){const t=he(),e=ne(pe().index,t);return function(t){const e=t[11];if(Yt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Dt(e)?e:t)};let ms=(()=>{class t{}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>null}),t})();class vs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const bs=new vs("10.1.6");class _s{constructor(){}supports(t){return Oo(t)}create(t){return new Cs(t)}}const ws=(t,e)=>e;class Cs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ws}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Is(n,r,i)?e:n,s=Is(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Oo(t))throw new Error(`Error trying to diff '${x(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[wo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Os(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ss),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ss),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Os{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Es{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ss{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Es,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Is(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ts{constructor(){}supports(t){return t instanceof Map||Eo(t)}create(){return new xs}}class xs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Eo(t)))throw new Error(`Error trying to diff '${x(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ks(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ks{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let As=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new d]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new _s])}),t})(),js=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new d]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new Ts])}),t})();const Ns=[new Ts],Ps=new As([new _s]),Ds=new js(Ns);let Rs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ls(t,hs),t})();const Ls=function(t,e){return Ki(t,e,pe(),he())};let Ms=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Fs(t,hs),t})();const Fs=function(t,e){return zi(t,e,pe(),he())},Vs={};class Us extends ls{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=kt(t);return new Hs(e,this.ngModule)}}function qs(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Bs=new W("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xe});class Hs extends us{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Er).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return qs(this.componentDef.inputs)}get outputs(){return qs(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Vs,i);return o!==Vs||r===Vs?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(fs,Zt),s=i.get(ms,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Yt(t))return t.selectRootElement(e,n===yt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Vr(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?Gt:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Xe,clean:bi,playerHandler:null,flags:0},d=$r(0,null,null,1,0,null,null,null,null,null),f=Ur(null,d,h,l,null,null,o,a,s,i);let p,g;Se(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=qr(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(fo(a,u,!0),null!==t&&(He(i,t,u),null!==a.classes&&Mi(i,t,a.classes),null!==a.styles&&Li(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ur(n,Qr(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(cn(on(a,n),s,e.type),ii(s,a),si(a,n.length,1)),pi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)He(a,c,["ng-version",bs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!_r(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&He(a,c,t),e&&e.length>0&&Mi(a,c,e.join(" "))}if(g=ee(d,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=pe();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ri(t,r,1),ai(t,e,n));const i=pn(e,t,e.length-1,r);fr(i,e);const o=te(r,e);return o&&fr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=pe();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Ne(a.index-Nt);const t=n[1];ti(t,e),ei(t,n,e.hostVars),ni(e,s)}return s}(t,this.componentDef,f,h,[po]),Br(d,f,null)}finally{Ae()}return new Ks(this.componentType,p,Hi(hs,g,f),f,g)}}class Ks extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Vi(r),this.componentType=t}get injector(){return new mn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const zs=void 0;var Ws=["en",[["a","p"],["AM","PM"],zs],[["AM","PM"],zs,zs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zs,"{1} 'at' {0}",zs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Gs={};function Qs(t,e,n){"string"!=typeof e&&(n=e,e=t[Xs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Gs[e]=t,n&&(Gs[e][Xs.ExtraData]=n)}function $s(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Js(e);if(n)return n;const r=e.split("-")[0];if(n=Js(r),n)return n;if("en"===r)return Ws;throw new Error(`Missing locale data for the locale "${t}".`)}function Ys(t){return $s(t)[Xs.CurrencyCode]||null}function Zs(t){return $s(t)[Xs.PluralCase]}function Js(t){return t in Gs||(Gs[t]=F.ng&&F.ng.common&&F.ng.common.locales&&F.ng.common.locales[t]),Gs[t]}var Xs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ta="en-US";let ea=ta;function na(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ea=t.toLowerCase().replace(/_/g,"-"))}const ra=new Map;class ia extends at{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Us(this);const n=jt(t),r=t[H]||null;r&&na(r),this._bootstrapComponents=tn(n.bootstrap),this._r3Injector=no(t,e,[{provide:at,useValue:this},{provide:ls,useValue:this.componentFactoryResolver}],x(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=lo.THROW_IF_NOT_FOUND,n=g.Default){return t===lo||t===at||t===G?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class oa extends ut{constructor(t){super(),this.moduleType=t,null!==jt(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${x(e)} vs ${x(e.name)}`)})(t,ra.get(t),e),ra.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new ia(this.moduleType,t)}}function sa(t,e){const n=de();let r;const i=t+Nt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=At(r.type)),s=et(xo);try{const e=nn(!1),r=o();return nn(e),function(t,e,n,r){const i=n+Nt;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,he(),t,r),r}finally{et(s)}}function aa(t,e,n,r){const i=he(),o=function(t,e){return t[e+Nt]}(i,t);return function(t,e){return Co.isWrapped(e)&&(e=Co.unwrap(e),t[ce.lFrame.bindingIndex]=Sr),e}(i,function(t,e){return t[1].data[e+Nt].pure}(i,t)?function(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=So(t,e,n);return So(t,e+1,r)||i}(t,a,i,o)?function(t,e,n){return t[e]=n}(t,a+2,s?r.call(s,i,o):r(i,o)):function(t,e){const n=t[e];return n===Sr?void 0:n}(t,a+2)}(i,function(){const t=ce.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,r,o):o.transform(n,r))}const ua=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ca(){return this._results[wo()]()}class la{constructor(){this.dirty=!0,this._results=[],this.changes=new ua,this.length=0;const t=wo(),e=la.prototype;e[t]||(e[t]=ca)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ha{constructor(t){this.queryList=t,this.matches=null}clone(){return new ha(this.queryList)}setDirty(){this.queryList.setDirty()}}class da{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new da(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ca(t,e).matches&&this.queries[e].setDirty()}}class fa{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class pa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new pa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ga{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ga(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ya(e,i)),this.matchTNodeWithReadOption(t,e,fn(e,t,i,!1,!1))}else n===Rs?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,fn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===hs||r===Ms||r===Rs&&0===e.type)this.addMatch(e.index,-2);else{const n=fn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ya(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function ma(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?Hi(hs,t,e):0===t.type?Ki(Rs,hs,t,e):null}(e,t):-2===n?function(t,e,n){return n===hs?Hi(hs,e,t):n===Rs?Ki(Rs,hs,e,t):n===Ms?zi(Ms,hs,e,t):void 0}(t,e,r):pn(t,t[1],n,e)}function va(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:ma(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function ba(t){const e=he(),n=de(),r=Ce();Oe(r+1);const i=Ca(n,r);if(t.dirty&&ie(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=va(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=Pt;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):va(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function _a(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new pa),t.queries.track(new ga(e,n))}(t,new fa(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new la;Yr(t,e,n,n.destroy),null===e[19]&&(e[19]=new da),e[19].queries.push(new ha(n))}(t,e)}(de(),he(),e,n,r,0,pe(),t)}function wa(){return t=he(),e=Ce(),t[19].queries[e].queryList;var t,e}function Ca(t,e){return t.queries.getByIndex(e)}function Oa(t=g.Default){const e=Wi(!0);if(null!=e||t&g.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const Ea=new W("Application Initializer");let Sa=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Lo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(rt(Ea,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Ia=new W("AppId"),Ta={provide:Ia,useFactory:function(){return`${xa()}${xa()}${xa()}`},deps:[]};function xa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ka=new W("Platform Initializer"),Aa=new W("Platform ID"),ja=new W("appBootstrapListener");let Na=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Pa=new W("LocaleId"),Da=new W("DefaultCurrencyCode");class Ra{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const La=function(t){return new oa(t)},Ma=La,Fa=function(t){return Promise.resolve(La(t))},Va=function(t){const e=La(t),n=tn(jt(t).declarations).reduce((t,e)=>{const n=kt(e);return n&&t.push(new Hs(n)),t},[]);return new Ra(e,n)},Ua=Va,qa=function(t){return Promise.resolve(Va(t))};let Ba=(()=>{class t{constructor(){this.compileModuleSync=Ma,this.compileModuleAsync=Fa,this.compileModuleAndAllComponentsSync=Ua,this.compileModuleAndAllComponentsAsync=qa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Ha=(()=>Promise.resolve(0))();function Ka(t){"undefined"==typeof Zone?Ha.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class za{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ua(!1),this.onMicrotaskEmpty=new ua(!1),this.onStable=new ua(!1),this.onError=new ua(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=F.requestAnimationFrame,e=F.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(F,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,$a(t),Qa(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),$a(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Ya(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Za(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Ya(t),e.invoke(r,i,o,s,a)}finally{Za(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,$a(t),Qa(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!za.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(za.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ga,Wa,Wa);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Wa(){}const Ga={};function Qa(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $a(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Ya(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Za(t){t._nesting--,Qa(t)}class Ja{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ua,this.onMicrotaskEmpty=new ua,this.onStable=new ua,this.onError=new ua}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Xa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{za.assertNotInAngularZone(),Ka(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ka(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(rt(za))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),tu=(()=>{class t{constructor(){this._applications=new Map,iu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return iu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class eu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function nu(t){iu=t}let ru,iu=new eu;const ou=new W("AllowMultipleToken");class su{constructor(t,e){this.name=t,this.token=e}}function au(t,e,n=[]){const r="Platform: "+e,i=new W(r);return(e=[])=>{let o=uu();if(!o||o.injector.get(ou,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Yi,useValue:"platform"});!function(t){if(ru&&!ru.destroyed&&!ru.injector.get(ou,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ru=t.get(cu);const e=t.get(ka,null);e&&e.forEach(t=>t())}(lo.create({providers:t,name:r}))}return function(t){const e=uu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function uu(){return ru&&!ru.destroyed?ru:null}let cu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ja:("zone.js"===t?void 0:t)||new za({enableLongStackTrace:Un(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:za,useValue:n}];return n.run(()=>{const e=lo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(On,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>du(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Lo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Sa);return t.runInitializers(),t.donePromise.then(()=>(na(i.injector.get(Pa,ta)||ta),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=lu({},e);return function(t,e,n){const r=new oa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(hu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${x(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(rt(lo))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function lu(t,e){return Array.isArray(e)?e.reduce(lu,t):Object.assign(Object.assign({},t),e)}let hu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Un(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{za.assertNotInAngularZone(),Ka(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{za.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof us?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(at),i=n.create(lo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Xa,null);return o&&i.injector.get(tu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Un()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;du(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ja,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),du(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(rt(za),rt(Na),rt(lo),rt(On),rt(ls),rt(Sa))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function du(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class fu{}class pu{}const gu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let yu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||gu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>mu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>mu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(rt(Ba),rt(pu,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function mu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const vu=function(t){return null},bu=au(null,"core",[{provide:Aa,useValue:"unknown"},{provide:cu,deps:[lo]},{provide:tu,deps:[]},{provide:Na,deps:[]}]),_u=[{provide:hu,useClass:hu,deps:[za,Na,lo,On,ls,Sa]},{provide:Bs,deps:[za],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Sa,useClass:Sa,deps:[[new d,Ea]]},{provide:Ba,useClass:Ba,deps:[]},Ta,{provide:As,useFactory:function(){return Ps},deps:[]},{provide:js,useFactory:function(){return Ds},deps:[]},{provide:Pa,useFactory:function(t){return na(t=t||"undefined"!=typeof $localize&&$localize.locale||ta),t},deps:[[new h(Pa),new d,new p]]},{provide:Da,useValue:"USD"}];let wu=(()=>{class t{constructor(t){}}return t.\u0275mod=Et({type:t}),t.\u0275inj=b({factory:function(e){return new(e||t)(rt(hu))},providers:_u}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return M})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return N})),n.d(e,"i",(function(){return F})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return B})),n.d(e,"m",(function(){return G})),n.d(e,"n",(function(){return f})),n.d(e,"o",(function(){return j})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return m})),n.d(e,"r",(function(){return b})),n.d(e,"s",(function(){return D})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return g})),n.d(e,"w",(function(){return C})),n.d(e,"x",(function(){return v})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return A})),n.d(e,"A",(function(){return T})),n.d(e,"B",(function(){return R})),n.d(e,"C",(function(){return L})),n.d(e,"D",(function(){return P})),n.d(e,"E",(function(){return W})),n.d(e,"F",(function(){return z})),n.d(e,"G",(function(){return x})),n.d(e,"H",(function(){return q})),n.d(e,"I",(function(){return H})),n.d(e,"J",(function(){return K}));var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function C(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function S(t,e){return t.replace(I,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var I=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var k=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=T(c(o[0])||""),n=T(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=k(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=k(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function R(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function G(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return y})),n.d(e,"j",(function(){return C}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.z,[new u.A,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)(u.Pb(u.B))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(h,"0.6.18",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyDCg-AfxxmV4LmquhLowId1CZF56xbNMAQ",authDomain:"online-worksheets-data.firebaseapp.com",projectId:"online-worksheets-data",storageBucket:"online-worksheets-data.appspot.com",messagingSenderId:"1056233139291",appId:"1:1056233139291:web:365066f892dee60a9ae37e",measurementId:"G-BCKQ12TQVD"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Pb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=Object(r.Eb)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h(Object(r.Pb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Pb)(a).location;return new _(Object(r.Pb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(u),r.Pb(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(u),r.Pb(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(m),r.Pb(u))},t.normalizeQueryParams=y,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Eb)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new C(Object(r.Pb)(m),Object(r.Pb)(u))}function E(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),I=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),T=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),x=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),k=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function A(t,e){return L(Object(r.ib)(t)[r.Z.DateFormat],e)}function j(t,e){return L(Object(r.ib)(t)[r.Z.TimeFormat],e)}function N(t,e){return L(Object(r.ib)(t)[r.Z.DateTimeFormat],e)}function P(t,e){const n=Object(r.ib)(t),i=n[r.Z.NumberSymbols][e];if(void 0===i){if(e===k.CurrencyDecimal)return n[r.Z.NumberSymbols][k.Decimal];if(e===k.CurrencyGroup)return n[r.Z.NumberSymbols][k.Group]}return i}const D=r.lb;function R(t){if(!t[r.Z.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.Z.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function L(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function M(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const F=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,V={},U=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var q=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),B=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),H=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function K(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function z(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function W(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case B.FullYear:return e.getFullYear();case B.Month:return e.getMonth();case B.Date:return e.getDate();case B.Hours:return e.getHours();case B.Minutes:return e.getMinutes();case B.Seconds:return e.getSeconds();case B.FractionalSeconds:return e.getMilliseconds();case B.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===B.Hours)0===a&&-12===n&&(a=12);else if(t===B.FractionalSeconds)return u=e,z(a,3).substr(0,u);var u;const c=P(s,k.MinusSign);return z(a,e,c,r,i)}}function G(t,e,n=I.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case H.Months:return function(t,e,n){const i=Object(r.ib)(t),o=L([i[r.Z.MonthsFormat],i[r.Z.MonthsStandalone]],e);return L(o,n)}(e,o,i)[t.getMonth()];case H.Days:return function(t,e,n){const i=Object(r.ib)(t),o=L([i[r.Z.DaysFormat],i[r.Z.DaysStandalone]],e);return L(o,n)}(e,o,i)[t.getDay()];case H.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.ib)(t);return R(e),(e[r.Z.ExtraData][2]||[]).map(t=>"string"==typeof t?M(t):[M(t[0]),M(t[1])])}(e),n=function(t,e,n){const i=Object(r.ib)(t);R(i);const o=L([i[r.Z.ExtraData][0],i[r.Z.ExtraData][1]],e)||[];return L(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=Object(r.ib)(t),o=L([i[r.Z.DayPeriodsFormat],i[r.Z.DayPeriodsStandalone]],e);return L(o,n)}(e,o,i)[a<12?0:1];case H.Eras:return function(t,e){return L(Object(r.ib)(t)[r.Z.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,s,t,e,n,i)}}function Q(t){return function(e,n,r){const i=-1*r,o=P(n,k.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case q.Short:return(i>=0?"+":"")+z(s,2,o)+z(Math.abs(i%60),2,o);case q.ShortGMT:return"GMT"+(i>=0?"+":"")+z(s,1,o);case q.Long:return"GMT"+(i>=0?"+":"")+z(s,2,o)+":"+z(Math.abs(i%60),2,o);case q.Extended:return 0===r?"Z":(i>=0?"+":"")+z(s,2,o)+":"+z(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function $(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))),e=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}var o;return z(i,t,P(r,k.MinusSign))}}const Y={};function Z(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function J(t){return t instanceof Date&&!isNaN(t.valueOf())}class X{}let tt=(()=>{class t extends X{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(D(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.u))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class et{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nt=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new et(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new rt(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new rt(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K),r.Ib(r.s))},t.\u0275dir=r.Db({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class rt{constructor(t,e){this.record=t,this.view=e}}let it=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new ot,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){st("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){st("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K))},t.\u0275dir=r.Db({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class ot{constructor(){this.$implicit=null,this.ngIf=null}}function st(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}let at=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,o){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,i){let o=function(t){if(J(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(F))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!J(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return Object(r.ib)(t)[r.Z.LocaleId]}(e);if(V[i]=V[i]||{},V[i][n])return V[i][n];let o="";switch(n){case"shortDate":o=A(e,x.Short);break;case"mediumDate":o=A(e,x.Medium);break;case"longDate":o=A(e,x.Long);break;case"fullDate":o=A(e,x.Full);break;case"shortTime":o=j(e,x.Short);break;case"mediumTime":o=j(e,x.Medium);break;case"longTime":o=j(e,x.Long);break;case"fullTime":o=j(e,x.Full);break;case"short":const n=t(e,"shortTime"),r=t(e,"shortDate");o=K(N(e,x.Short),[n,r]);break;case"medium":const i=t(e,"mediumTime"),s=t(e,"mediumDate");o=K(N(e,x.Medium),[i,s]);break;case"long":const a=t(e,"longTime"),u=t(e,"longDate");o=K(N(e,x.Long),[a,u]);break;case"full":const c=t(e,"fullTime"),l=t(e,"fullDate");o=K(N(e,x.Full),[c,l])}return o&&(V[i][n]=o),o}(n,e)||e;let s,a=[];for(;e;){if(s=U.exec(e),!s){a.push(e);break}{a=a.concat(s.slice(1));const t=a.pop();if(!t)break;e=t}}let u=o.getTimezoneOffset();i&&(u=Z(i,u),o=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Z(e,r)-r))}(o,i));let c="";return a.forEach(t=>{const e=function(t){if(Y[t])return Y[t];let e;switch(t){case"G":case"GG":case"GGG":e=G(H.Eras,T.Abbreviated);break;case"GGGG":e=G(H.Eras,T.Wide);break;case"GGGGG":e=G(H.Eras,T.Narrow);break;case"y":e=W(B.FullYear,1,0,!1,!0);break;case"yy":e=W(B.FullYear,2,0,!0,!0);break;case"yyy":e=W(B.FullYear,3,0,!1,!0);break;case"yyyy":e=W(B.FullYear,4,0,!1,!0);break;case"M":case"L":e=W(B.Month,1,1);break;case"MM":case"LL":e=W(B.Month,2,1);break;case"MMM":e=G(H.Months,T.Abbreviated);break;case"MMMM":e=G(H.Months,T.Wide);break;case"MMMMM":e=G(H.Months,T.Narrow);break;case"LLL":e=G(H.Months,T.Abbreviated,I.Standalone);break;case"LLLL":e=G(H.Months,T.Wide,I.Standalone);break;case"LLLLL":e=G(H.Months,T.Narrow,I.Standalone);break;case"w":e=$(1);break;case"ww":e=$(2);break;case"W":e=$(1,!0);break;case"d":e=W(B.Date,1);break;case"dd":e=W(B.Date,2);break;case"E":case"EE":case"EEE":e=G(H.Days,T.Abbreviated);break;case"EEEE":e=G(H.Days,T.Wide);break;case"EEEEE":e=G(H.Days,T.Narrow);break;case"EEEEEE":e=G(H.Days,T.Short);break;case"a":case"aa":case"aaa":e=G(H.DayPeriods,T.Abbreviated);break;case"aaaa":e=G(H.DayPeriods,T.Wide);break;case"aaaaa":e=G(H.DayPeriods,T.Narrow);break;case"b":case"bb":case"bbb":e=G(H.DayPeriods,T.Abbreviated,I.Standalone,!0);break;case"bbbb":e=G(H.DayPeriods,T.Wide,I.Standalone,!0);break;case"bbbbb":e=G(H.DayPeriods,T.Narrow,I.Standalone,!0);break;case"B":case"BB":case"BBB":e=G(H.DayPeriods,T.Abbreviated,I.Format,!0);break;case"BBBB":e=G(H.DayPeriods,T.Wide,I.Format,!0);break;case"BBBBB":e=G(H.DayPeriods,T.Narrow,I.Format,!0);break;case"h":e=W(B.Hours,1,-12);break;case"hh":e=W(B.Hours,2,-12);break;case"H":e=W(B.Hours,1);break;case"HH":e=W(B.Hours,2);break;case"m":e=W(B.Minutes,1);break;case"mm":e=W(B.Minutes,2);break;case"s":e=W(B.Seconds,1);break;case"ss":e=W(B.Seconds,2);break;case"S":e=W(B.FractionalSeconds,1);break;case"SS":e=W(B.FractionalSeconds,2);break;case"SSS":e=W(B.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Q(q.Short);break;case"ZZZZZ":e=Q(q.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Q(q.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Q(q.Long);break;default:return null}return Y[t]=e,e}(t);c+=e?e(o,n,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}(e,n,o||this.locale,i)}catch(s){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(t)}'`)}(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.u))},t.\u0275pipe=r.Hb({name:"date",type:t,pure:!0}),t})(),ut=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[{provide:X,useClass:tt}]}),t})(),ct=(()=>{class t{}return t.\u0275prov=Object(r.Eb)({token:t,providedIn:"root",factory:()=>new lt(Object(r.Pb)(a),window,Object(r.Pb)(r.m))}),t})();class lt{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=ht(this.window.history)||ht(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function ht(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class dt extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new dt,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=pt||(pt=document.querySelector("base"),pt)?pt.getAttribute("href"):null;return null==e?null:(n=e,ft||(ft=document.createElement("a")),ft.setAttribute("href",n),"/"===ft.pathname.charAt(0)?ft.pathname:"/"+ft.pathname);var n}resetBaseElement(){pt=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let ft,pt=null;const gt=new r.q("TRANSITION_ID"),yt=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[gt,a,r.r],multi:!0}];class mt{static init(){Object(r.W)(new mt)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const vt=new r.q("EventManagerPlugins");let bt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(vt),r.Pb(r.z))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class _t{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let wt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),Ct=(()=>{class t extends wt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const Ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Et=/%COMP%/g;function St(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?St(t,i,n):(i=i.replace(Et,t),n.push(i))}return n}function It(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Tt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new xt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new kt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.Q.Native:case r.Q.ShadowDom:return new At(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=St(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(bt),r.Pb(Ct),r.Pb(r.c))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class xt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Ot[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Ot[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Ot[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,It(n)):this.eventManager.addEventListener(t,e,It(n))}}class kt extends xt{constructor(t,e,n,r){super(t),this.component=n;const i=St(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Et,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Et,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class At extends xt{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=St(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let jt=(()=>{class t extends _t{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const Nt=["alt","control","meta","shift"],Pt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Lt=(()=>{class t extends _t{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Nt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Dt.hasOwnProperty(e)&&(e=Dt[e]))}return Pt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Nt.forEach(r=>{r!=n&&(0,Rt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const Mt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){dt.makeCurrent(),mt.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],Ft=Object(r.R)(r.V,"browser",Mt),Vt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:vt,useClass:jt,multi:!0,deps:[a,r.z,r.B]},{provide:vt,useClass:Lt,multi:!0,deps:[a]},[],{provide:Tt,useClass:Tt,deps:[bt,Ct,r.c]},{provide:r.E,useExisting:Tt},{provide:wt,useExisting:Ct},{provide:Ct,useClass:Ct,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:bt,useClass:bt,deps:[vt,r.z]},[]];let Ut=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:gt,useExisting:r.c},yt]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Pb(t,12))},providers:Vt,imports:[ut,r.f]}),t})();"undefined"!=typeof window&&window;var qt=n("HDdC"),Bt=n("DH7j"),Ht=n("lJxs"),Kt=n("XoHu"),zt=n("Cfvw");function Wt(t,e){return new qt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(zt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Gt=new r.q("NgValueAccessor"),Qt={provide:Gt,useExisting:Object(r.T)(()=>$t),multi:!0};let $t=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([Qt])]}),t})();const Yt={provide:Gt,useExisting:Object(r.T)(()=>Jt),multi:!0},Zt=new r.q("CompositionEventMode");let Jt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(Zt,8))},t.\u0275dir=r.Db({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Sb("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.xb([Yt])]}),t})(),Xt=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t}),t})(),te=(()=>{class t extends Xt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return ee(e||t)},t.\u0275dir=r.Db({type:t,features:[r.vb]}),t})();const ee=r.Nb(te);class ne extends Xt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}class re{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let ie=(()=>{class t extends re{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(ne,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),oe=(()=>{class t extends re{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(te,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();function se(t){return null==t||0===t.length}function ae(t){return null!=t&&"number"==typeof t.length}const ue=new r.q("NgValidators"),ce=new r.q("NgAsyncValidators"),le=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class he{static min(t){return e=>{if(se(e.value)||se(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(se(e.value)||se(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return se(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return se(t.value)||le.test(t.value)?null:{email:!0}}static minLength(t){return e=>se(e.value)||!ae(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>ae(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return he.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(se(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(de);return 0==e.length?null:function(t){return pe(ge(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(de);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Bt.a)(e))return Wt(e,null);if(Object(Kt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Wt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Wt(t=1===t.length&&Object(Bt.a)(t[0])?t[0]:t,null).pipe(Object(Ht.a)(t=>e(...t)))}return Wt(t,null)}(ge(t,e).map(fe)).pipe(Object(Ht.a)(pe))}}}function de(t){return null!=t}function fe(t){const e=Object(r.qb)(t)?Object(zt.a)(t):t;return Object(r.pb)(e),e}function pe(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ge(t,e){return e.map(e=>e(t))}function ye(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const me={provide:Gt,useExisting:Object(r.T)(()=>ve),multi:!0};let ve=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([me])]}),t})();const be={provide:Gt,useExisting:Object(r.T)(()=>we),multi:!0};let _e=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),we=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(ne),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(_e),r.Ib(r.r))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([be])]}),t})();const Ce={provide:Gt,useExisting:Object(r.T)(()=>Oe),multi:!0};let Oe=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([Ce])]}),t})();const Ee={provide:Gt,useExisting:Object(r.T)(()=>Ie),multi:!0};function Se(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Ie=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Se(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Sb("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.xb([Ee])]}),t})(),Te=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Se(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(r.D),r.Ib(Ie,9))},t.\u0275dir=r.Db({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const xe={provide:Gt,useExisting:Object(r.T)(()=>Ae),multi:!0};function ke(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Ae=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.xb([xe])]}),t})(),je=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ke(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ke(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(r.D),r.Ib(Ae,9))},t.\u0275dir=r.Db({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function Ne(t,e){t.validator=he.compose([t.validator,e.validator]),t.asyncValidator=he.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Pe(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Pe(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Pe(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function De(t,e){t.validator=he.compose([t.validator,e.validator]),t.asyncValidator=he.composeAsync([t.asyncValidator,e.asyncValidator])}function Re(t){return null!=t?he.compose(ye(t)):null}function Le(t){return null!=t?he.composeAsync(ye(t)):null}const Me=[$t,Oe,ve,Ie,Ae,we],Fe="VALID",Ve="INVALID",Ue="PENDING",qe="DISABLED";function Be(t){return(We(t)?t.validators:t)||null}function He(t){return Array.isArray(t)?Re(t):t||null}function Ke(t,e){return(We(e)?e.asyncValidators:t)||null}function ze(t){return Array.isArray(t)?Le(t):t||null}function We(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Ge{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=He(this._rawValidators),this._composedAsyncValidatorFn=ze(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Fe}get invalid(){return this.status===Ve}get pending(){return this.status==Ue}get disabled(){return this.status===qe}get enabled(){return this.status!==qe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=He(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ze(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ue,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=qe,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Fe,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Fe&&this.status!==Ue||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qe:Fe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ue,this._hasOwnPendingAsyncValidator=!0;const e=fe(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof $e?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ye&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?qe:this.errors?Ve:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ue)?Ue:this._anyControlsHaveStatus(Ve)?Ve:Fe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){We(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Qe extends Ge{constructor(t=null,e,n){super(Be(e),Ke(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class $e extends Ge{constructor(t,e,n){super(Be(e),Ke(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Qe?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ye extends Ge{constructor(t,e,n){super(Be(e),Ke(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Qe?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Je=new r.q("NgModelWithFormControlWarning"),Xe={provide:te,useExisting:Object(r.T)(()=>tn)};let tn=(()=>{class t extends te{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Ne(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);De(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);De(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Ne(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Re(this._validators);this.form.validator=he.compose([this.form.validator,t]);const e=Le(this._asyncValidators);this.form.asyncValidator=he.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(ue,10),r.Ib(ce,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Sb("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([Xe]),r.vb,r.wb]}),t})();const en={provide:ne,useExisting:Object(r.T)(()=>nn)};let nn=(()=>{class t extends ne{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===Jt?n=t:(e=t,Me.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(e){var n,i;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&(n=t,this,i=this._ngModelWarningConfig,Object(r.U)()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Re(this._rawValidators)}get asyncValidator(){return Le(this._rawAsyncValidators)}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(te,13),r.Ib(ue,10),r.Ib(ce,10),r.Ib(Gt,10),r.Ib(Je,8))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.xb([en]),r.vb,r.wb]}),t._ngModelWarningSentOnce=!1,t})();const rn={provide:ue,useExisting:Object(r.T)(()=>on),multi:!0};let on=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?he.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.zb("required",e.required?"":null)},inputs:{required:"required"},features:[r.xb([rn])]}),t})(),sn=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),an=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new $e(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Qe(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Ye(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Qe||t instanceof $e||t instanceof Ye?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),un=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Je,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[an,_e],imports:[sn]}),t})();var cn=n("D0XW"),ln=n("LRne"),hn=n("bHdf");function dn(){return Object(hn.a)(1)}function fn(...t){return dn()(Object(ln.a)(...t))}var pn=n("z+Ro");function gn(...t){const e=t[t.length-1];return Object(pn.a)(e)?(t.pop(),n=>fn(t,n,e)):e=>fn(t,e)}var yn=n("7o/Q");function mn(){return t=>t.lift(new vn)}class vn{call(t,e){return e.subscribe(new bn(t))}}class bn extends yn.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function _n(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new wn(t,e,n))}}class wn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Cn(t,this.accumulator,this.seed,this.hasSeed))}}class Cn extends yn.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function On(t,e){return n=>n.lift(new En(t,e))}class En{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Sn(t,this.compare,this.keySelector))}}class Sn extends yn.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function In(t,e){return function(n){return n.lift(new Tn(t,e))}}class Tn{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new xn(t,this.predicate,this.thisArg))}}class xn extends yn.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var kn=n("pxpQ"),An=n("spgP"),jn=n("Jgta"),Nn=n("zIRd"),Pn=n("qOnz"),Dn=n("q/0M"),Rn=function(t,e){return(Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ln(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Mn,Fn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vn=Vn||{},Un=Fn||self;function qn(){}function Bn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Hn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Kn="closure_uid_"+(1e9*Math.random()>>>0),zn=0;function Wn(t,e,n){return t.call.apply(t.bind,arguments)}function Gn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Qn(t,e,n){return(Qn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wn:Gn).apply(null,arguments)}function $n(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Yn(){return Date.now()}function Zn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Jn(){this.j=this.j,this.i=this.i}Jn.prototype.j=!1,Jn.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Kn)&&t[Kn]||(t[Kn]=++zn)}(this)},Jn.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Xn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},tr=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function er(t){return Array.prototype.concat.apply([],arguments)}function nr(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function rr(t){return/^[\s\xa0]*$/.test(t)}var ir,or=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function sr(t,e){return-1!=t.indexOf(e)}function ar(t,e){return t<e?-1:t>e?1:0}t:{var ur=Un.navigator;if(ur){var cr=ur.userAgent;if(cr){ir=cr;break t}}ir=""}function lr(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function hr(t){var e={};for(var n in t)e[n]=t[n];return e}var dr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fr(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dr.length;o++)n=dr[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pr(t){return pr[" "](t),t}pr[" "]=qn;var gr,yr,mr=sr(ir,"Opera"),vr=sr(ir,"Trident")||sr(ir,"MSIE"),br=sr(ir,"Edge"),_r=br||vr,wr=sr(ir,"Gecko")&&!(sr(ir.toLowerCase(),"webkit")&&!sr(ir,"Edge"))&&!(sr(ir,"Trident")||sr(ir,"MSIE"))&&!sr(ir,"Edge"),Cr=sr(ir.toLowerCase(),"webkit")&&!sr(ir,"Edge");function Or(){var t=Un.document;return t?t.documentMode:void 0}t:{var Er="",Sr=(yr=ir,wr?/rv:([^\);]+)(\)|;)/.exec(yr):br?/Edge\/([\d\.]+)/.exec(yr):vr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(yr):Cr?/WebKit\/(\S+)/.exec(yr):mr?/(?:Version)[ \/]?(\S+)/.exec(yr):void 0);if(Sr&&(Er=Sr?Sr[1]:""),vr){var Ir=Or();if(null!=Ir&&Ir>parseFloat(Er)){gr=String(Ir);break t}}gr=Er}var Tr={};function xr(t){return function(t,e){var n=Tr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=or(String(gr)).split("."),r=or(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ar(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ar(0==s[2].length,0==a[2].length)||ar(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var kr=Un.document&&vr&&(Or()||parseInt(gr,10))||void 0,Ar=!vr||9<=Number(kr),jr=vr&&!xr("9"),Nr=function(){if(!Un.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Un.addEventListener("test",qn,e),Un.removeEventListener("test",qn,e)}catch(n){}return t}();function Pr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Dr(t,e){if(Pr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(wr){t:{try{pr(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Rr[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Pr.prototype.b=function(){this.defaultPrevented=!0},Zn(Dr,Pr);var Rr={2:"touch",3:"pen",4:"mouse"};Dr.prototype.b=function(){Dr.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,jr)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Lr="closure_listenable_"+(1e6*Math.random()|0),Mr=0;function Fr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Mr,this.Y=this.Z=!1}function Vr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ur(t){this.src=t,this.a={},this.b=0}function qr(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Xn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Vr(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Br(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ur.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Br(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Fr(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Hr="closure_lm_"+(1e6*Math.random()|0),Kr={};function zr(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Xr(r),e&&e[Lr]?e.wa(n,r,Hn(i)?!!i.capture:!!i,o):Wr(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)zr(t,e[o],n,r,i);return null}return n=Xr(n),t&&t[Lr]?t.va(e,n,Hn(r)?!!r.capture:!!r,i):Wr(t,e,n,!1,r,i)}function Wr(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Hn(i)?!!i.capture:!!i;if(s&&!Ar)return null;var a=Zr(t);if(a||(t[Hr]=a=new Ur(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Yr,e=Ar?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Nr||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Qr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Gr(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Lr])qr(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Qr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zr(e))?(qr(n,t),0==n.b&&(n.src=null,e[Hr]=null)):Vr(t)}}}function Qr(t){return t in Kr?Kr[t]:Kr[t]="on"+t}function $r(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Gr(t),n.call(r,e)}function Yr(t,e){if(t.Y)return!0;if(!Ar){if(!e)t:{e=["window","event"];for(var n=Un,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return $r(t,e=new Dr(e,this))}return $r(t,new Dr(e,this))}function Zr(t){return(t=t[Hr])instanceof Ur?t:null}var Jr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xr(t){return"function"==typeof t?t:(t[Jr]||(t[Jr]=function(e){return t.handleEvent(e)}),t[Jr])}function ti(){Jn.call(this),this.c=new Ur(this),this.J=this,this.C=null}function ei(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Pr(e,t);else if(e instanceof Pr)e.target=e.target||t;else{var i=e;fr(e=new Pr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ni(s,r,!0,e)&&i}if(i=ni(s=e.a=t,r,!0,e)&&i,i=ni(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ni(s=e.a=n[o],r,!1,e)&&i}function ni(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&qr(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Zn(ti,Jn),ti.prototype[Lr]=!0,(Mn=ti.prototype).addEventListener=function(t,e,n,r){zr(this,t,e,n,r)},Mn.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Hn(i)?!!i.capture:!!i,r=Xr(r),e&&e[Lr]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Br(s=e.a[n],r,i,o))&&(Vr(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Zr(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Br(n,r,i,o)),(r=-1<e?n[e]:null)&&Gr(r))}(this,t,e,n,r)},Mn.G=function(){if(ti.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Vr(n[r]);delete e.a[t],e.b--}}this.C=null},Mn.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Mn.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ri=Un.JSON.stringify;function ii(){this.b=this.a=null}var oi,si=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new ui}),(function(t){t.reset()}));function ai(){var t=di,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ui(){this.next=this.b=this.a=null}function ci(t){Un.setTimeout((function(){throw t}),0)}function li(t,e){oi||function(){var t=Un.Promise.resolve(void 0);oi=function(){t.then(fi)}}(),hi||(oi(),hi=!0),di.add(t,e)}ii.prototype.add=function(t,e){var n=si.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ui.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ui.prototype.reset=function(){this.next=this.b=this.a=null};var hi=!1,di=new ii;function fi(){for(var t;t=ai();){try{t.a.call(t.b)}catch(n){ci(n)}var e=si;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}hi=!1}function pi(t,e){ti.call(this),this.b=t||1,this.a=e||Un,this.f=Qn(this.Za,this),this.g=Yn()}function gi(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function yi(t,e,n){if("function"==typeof t)n&&(t=Qn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qn(t.handleEvent,t)}return 2147483647<Number(e)?-1:Un.setTimeout(t,e||0)}function mi(t){t.a=yi((function(){t.a=null,t.c&&(t.c=!1,mi(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Zn(pi,ti),(Mn=pi.prototype).aa=!1,Mn.M=null,Mn.Za=function(){if(this.aa){var t=Yn()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ei(this,"tick"),this.aa&&(gi(this),this.start()))}},Mn.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Yn())},Mn.G=function(){pi.X.G.call(this),gi(this),delete this.a};var vi=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Rn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:mi(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Un.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Jn);function bi(t){Jn.call(this),this.b=t,this.a={}}Zn(bi,Jn);var _i=[];function wi(t,e,n,r){Array.isArray(n)||(n&&(_i[0]=n.toString()),n=_i);for(var i=0;i<n.length;i++){var o=zr(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ci(t){lr(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Gr(t)}),t),t.a={}}function Oi(){this.a=!0}function Ei(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ri(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}bi.prototype.G=function(){bi.X.G.call(this),Ci(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oi.prototype.info=function(){};var Si={},Ii=null;function Ti(){return Ii=Ii||new ti}function xi(t){Pr.call(this,Si.Fa,t)}function ki(t){var e=Ti();ei(e,new xi(e,t))}function Ai(t,e){Pr.call(this,Si.STAT_EVENT,t),this.stat=e}function ji(t){var e=Ti();ei(e,new Ai(e,t))}function Ni(t){Pr.call(this,Si.Ga,t)}function Pi(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Un.setTimeout((function(){t()}),e)}Si.Fa="serverreachability",Zn(xi,Pr),Si.STAT_EVENT="statevent",Zn(Ai,Pr),Si.Ga="timingevent",Zn(Ni,Pr);var Di={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ri={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Li(){}function Mi(){}Li.prototype.a=null;var Fi,Vi={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ui(){Pr.call(this,"d")}function qi(){Pr.call(this,"c")}function Bi(){}function Hi(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new bi(this),this.P=Ki,this.R=new pi(t=_r?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Zn(Ui,Pr),Zn(qi,Pr),Zn(Bi,Li),Fi=new Bi;var Ki=45e3,zi={},Wi={};function Gi(t,e,n){t.H=1,t.i=yo(co(e)),t.j=n,t.I=!0,Qi(t,null)}function Qi(t,e){t.u=Yn(),Zi(t),t.l=co(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),ko(n.b,"t",r),t.D=0,t.a=Os(t.g,t.g.C?e:null),0<t.O&&(t.F=new vi(Qn(t.Ca,t,t.a),t.O)),wi(t.J,t.a,"readystatechange",t.Xa),e=t.B?hr(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ki(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function $i(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Yi(t,n);if(i==Wi){4==e&&(t.h=4,ji(14),r=!1),Ei(t.c,t.f,null,"[Incomplete Response]");break}if(i==zi){t.h=4,ji(15),Ei(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ei(t.c,t.f,i,null),no(t,i)}4==e&&0==n.length&&(t.h=1,ji(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),gs(e),e.F=!0,ji(11))):(Ei(t.c,t.f,n,"[Invalid Chunked Response]"),eo(t),to(t))}function Yi(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Wi:(n=Number(e.substring(n,r)),isNaN(n)?zi:(r+=1)+n>e.length?Wi:(e=e.substr(r,n),t.D=r+n,e))}function Zi(t){t.T=Yn()+t.P,Ji(t,t.P)}function Ji(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Pi(Qn(t.Va,t),e)}function Xi(t){t.o&&(Un.clearTimeout(t.o),t.o=null)}function to(t){0==t.g.v||t.A||vs(t.g,t)}function eo(t){Xi(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,gi(t.R),Ci(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function no(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Lo(n.b,t)))if(n.I=t.N,!t.C&&Lo(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(ry){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ms(n),ss(n)}ps(n),ji(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Pi(Qn(n.Sa,n),6e3));if(1>=Ro(n.b)&&n.ea){try{n.ea()}catch(ry){}n.ea=void 0}}else _s(n,11)}else if((t.C||n.a==t)&&ms(n),!rr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(sr(l,"spdy")||sr(l,"quic")||sr(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Mo(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,go(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Yn()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Cs(u,u.C?u.ga:null,u.fa),f.C){Fo(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(Xi(p),Zi(p)),u.a=f}else fs(u);0<n.g.length&&cs(n)}else"stop"!=i[0]&&"close"!=i[0]||_s(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?_s(n,7):os(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ki(4)}catch(ry){}}function ro(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Bn(t)||"string"==typeof t)tr(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Bn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Bn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function io(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof io)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function oo(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];so(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)so(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function so(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Mn=Hi.prototype).setTimeout=function(t){this.P=t},Mn.Xa=function(t){t=t.target;var e=this.F;e&&3==es(t)?e.f():this.Ca(t)},Mn.Ca=function(t){try{if(t==this.a)t:{var e=es(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!_r&&!this.a.$())){this.A||4!=e||7==n||ki(8==n||0>=r?3:2),Xi(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rr(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ji(12),eo(this),to(this);break t}Ei(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,no(this,u)}this.I?($i(this,e,o),_r&&this.b&&3==e&&(wi(this.J,this.R,"tick",this.Wa),this.R.start())):(Ei(this.c,this.f,o,null),no(this,o)),4==e&&eo(this),this.b&&!this.A&&(4==e?vs(this.g,this):(this.b=!1,Zi(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ji(12)):(this.h=0,ji(13)),eo(this),to(this)}}}catch(c){}},Mn.Wa=function(){if(this.a){var t=es(this.a),e=this.a.$();this.D<e.length&&(Xi(this),$i(this,t,e),this.b&&4!=t&&Zi(this))}},Mn.cancel=function(){this.A=!0,eo(this)},Mn.Va=function(){this.o=null;var t=Yn();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(ki(3),ji(17)),eo(this),this.h=2,to(this)):Ji(this,this.T-t)},(Mn=io.prototype).K=function(){oo(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Mn.L=function(){return oo(this),this.a.concat()},Mn.get=function(t,e){return so(this.b,t)?this.b[t]:e},Mn.set=function(t,e){so(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Mn.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ao=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uo(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof uo){this.a=void 0!==e?e:t.a,lo(this,t.f),this.j=t.j,ho(this,t.c),fo(this,t.h),this.g=t.g,e=t.b;var n=new So;n.c=e.c,e.a&&(n.a=new io(e.a),n.b=e.b),po(this,n),this.i=t.i}else t&&(n=String(t).match(ao))?(this.a=!!e,lo(this,n[1]||"",!0),this.j=mo(n[2]||""),ho(this,n[3]||"",!0),fo(this,n[4]),this.g=mo(n[5]||"",!0),po(this,n[6]||"",!0),this.i=mo(n[7]||"")):(this.a=!!e,this.b=new So(null,this.a))}function co(t){return new uo(t)}function lo(t,e,n){t.f=n?mo(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ho(t,e,n){t.c=n?mo(e,!0):e}function fo(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function po(t,e,n){e instanceof So?(t.b=e,function(t,e){e&&!t.f&&(Io(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(To(this,e),ko(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=vo(e,Oo)),t.b=new So(e,t.a))}function go(t,e,n){t.b.set(e,n)}function yo(t){return go(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Yn()).toString(36)),t}function mo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vo(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,bo),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bo(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}uo.prototype.toString=function(){var t=[],e=this.f;e&&t.push(vo(e,_o,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(vo(e,_o,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(vo(n,"/"==n.charAt(0)?Co:wo,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",vo(n,Eo)),t.join("")};var _o=/[#\/\?@]/g,wo=/[#\?:]/g,Co=/[#\?]/g,Oo=/[#\?@]/g,Eo=/#/g;function So(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Io(t){t.a||(t.a=new io,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function To(t,e){Io(t),e=Ao(t,e),so(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,so((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&oo(t)))}function xo(t,e){return Io(t),e=Ao(t,e),so(t.a.b,e)}function ko(t,e,n){To(t,e),0<n.length&&(t.c=null,t.a.set(Ao(t,e),nr(n)),t.b+=n.length)}function Ao(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Mn=So.prototype).add=function(t,e){Io(this),this.c=null,t=Ao(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Mn.forEach=function(t,e){Io(this),this.a.forEach((function(n,r){tr(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Mn.L=function(){Io(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Mn.K=function(t){Io(this);var e=[];if("string"==typeof t)xo(this,t)&&(e=er(e,this.a.get(Ao(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=er(e,t[n])}return e},Mn.set=function(t,e){return Io(this),this.c=null,xo(this,t=Ao(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Mn.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Mn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var jo=function(){return function(t,e){this.b=t,this.a=e}}();function No(t){this.g=t||Po,t=Un.PerformanceNavigationTiming?0<(t=Un.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Un.ia&&Un.ia.ya&&Un.ia.ya()&&Un.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Po=10;function Do(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ro(t){return t.b?1:t.a?t.a.size:0}function Lo(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Mo(t,e){t.a?t.a.add(e):t.b=e}function Fo(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Vo(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ln(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return nr(t.c)}function Uo(){}function qo(){this.a=new Uo}function Bo(t,e,n){var r=n||"";try{ro(t,(function(t,n){var i=t;Hn(t)&&(i=ri(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Fy){throw e.push(r+"type="+encodeURIComponent("_badmap")),Fy}}function Ho(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}No.prototype.cancel=function(){var t,e;if(this.c=Vo(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ln(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Uo.prototype.stringify=function(t){return Un.JSON.stringify(t,void 0)},Uo.prototype.parse=function(t){return Un.JSON.parse(t,void 0)};var Ko=Un.JSON.parse;function zo(t){ti.call(this),this.headers=new io,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Wo,this.D=this.F=!1}Zn(zo,ti);var Wo="",Go=/^https?$/i,Qo=["POST","PUT"];function $o(t){return"content-type"==t.toLowerCase()}function Yo(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Zo(t),Xo(t)}function Zo(t){t.u||(t.u=!0,ei(t,"complete"),ei(t,"error"))}function Jo(t){if(t.b&&void 0!==Vn&&(!t.s[1]||4!=es(t)||2!=t.W()))if(t.l&&4==es(t))yi(t.za,0,t);else if(ei(t,"readystatechange"),4==es(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ao)[1]||null;if(!o&&Un.self&&Un.self.location){var s=Un.self.location.protocol;o=s.substr(0,s.length-1)}i=!Go.test(o?o.toLowerCase():"")}e=i}if(e)ei(t,"complete"),ei(t,"success");else{t.h=6;try{var a=2<es(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Zo(t)}}finally{Xo(t)}}}function Xo(t,e){if(t.a){ts(t);var n=t.a,r=t.s[0]?qn:null;t.a=null,t.s=null,e||ei(t,"ready");try{n.onreadystatechange=r}catch(Fy){}}}function ts(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Un.clearTimeout(t.m),t.m=null)}function es(t){return t.a?t.a.readyState:0}function ns(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return lr(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):go(t,e,n))}function rs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function is(t){this.pa=0,this.g=[],this.c=new Oi,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=rs("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=rs("baseRetryDelayMs",5e3,t),this.Ra=rs("retryDelaySeedMs",1e4,t),this.Ma=rs("forwardChannelMaxRetries",2,t),this.ma=rs("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new No(t&&t.concurrentRequestLimit),this.ka=new qo,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function os(t){if(as(t),3==t.v){var e=t.R++,n=co(t.B);go(n,"SID",t.J),go(n,"RID",e),go(n,"TYPE","terminate"),hs(t,n),(e=new Hi(t,t.c,e,void 0)).H=2,e.i=yo(co(n)),n=!1,Un.navigator&&Un.navigator.sendBeacon&&(n=Un.navigator.sendBeacon(e.i.toString(),"")),!n&&Un.Image&&((new Image).src=e.i,n=!0),n||(e.a=Os(e.g,null),e.a.ba(e.i)),e.u=Yn(),Zi(e)}ws(t)}function ss(t){t.a&&(gs(t),t.a.cancel(),t.a=null)}function as(t){ss(t),t.j&&(Un.clearTimeout(t.j),t.j=null),ms(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Un.clearTimeout(t.h),t.h=null)}function us(t,e){t.g.push(new jo(t.Oa++,e)),3==t.v&&cs(t)}function cs(t){Do(t.b)||t.h||(t.h=!0,li(t.Ba,t),t.u=0)}function ls(t,e){var n;n=e?e.f:t.R++;var r=co(t.B);go(r,"SID",t.J),go(r,"RID",n),go(r,"AID",t.P),hs(t,r),t.i&&t.l&&ns(r,t.i,t.l),n=new Hi(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ds(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Mo(t.b,n),Gi(n,r,e)}function hs(t,e){t.f&&ro({},(function(t,n){go(e,n,t)}))}function ds(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Qn(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Bo(l,s,"req"+c+"_")}catch(ea){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function fs(t){t.a||t.j||(t.T=1,li(t.Aa,t),t.o=0)}function ps(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Pi(Qn(t.Aa,t),bs(t,t.o)),t.o++,0))}function gs(t){null!=t.s&&(Un.clearTimeout(t.s),t.s=null)}function ys(t){t.a=new Hi(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=co(t.la);go(e,"RID","rpc"),go(e,"SID",t.J),go(e,"CI",t.H?"0":"1"),go(e,"AID",t.P),hs(t,e),go(e,"TYPE","xmlhttp"),t.i&&t.l&&ns(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=yo(co(e)),n.j=null,n.I=!0,Qi(n,t)}function ms(t){null!=t.m&&(Un.clearTimeout(t.m),t.m=null)}function vs(t,e){var n=null;if(t.a==e){ms(t),gs(t),t.a=null;var r=2}else{if(!Lo(t.b,e))return;n=e.s,Fo(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Yn()-e.u;var i=t.u;ei(r=Ti(),new Ni(r,n,e,i)),cs(t)}else fs(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ro(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Pi(Qn(t.Ba,t,e),bs(t,t.u)),t.u++,0)))}(t,e)||2==r&&ps(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:_s(t,5);break;case 4:_s(t,10);break;case 3:_s(t,6);break;default:_s(t,2)}}function bs(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function _s(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Qn(t.Ya,t);n||(n=new uo("//www.google.com/images/cleardot.gif"),Un.location&&"http"==Un.location.protocol||lo(n,"https"),yo(n)),function(t,e){var n=new Oi;if(Un.Image){var r=new Image;r.onload=$n(Ho,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$n(Ho,n,r,"TestLoadImage: error",!1,e),r.onabort=$n(Ho,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$n(Ho,n,r,"TestLoadImage: timeout",!1,e),Un.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ji(2);t.v=0,t.f&&t.f.ra(e),ws(t),as(t)}function ws(t){t.v=0,t.I=-1,t.f&&(0==Vo(t.b).length&&0==t.g.length||(t.b.c.length=0,nr(t.g),t.g.length=0),t.f.qa())}function Cs(t,e,n){var r=function(t){return t instanceof uo?co(t):new uo(t,void 0)}(n);if(""!=r.c)e&&ho(r,e+"."+r.c),fo(r,r.h);else{var i=Un.location;r=function(t,e,n,r){var i=new uo(null,void 0);return t&&lo(i,t),e&&ho(i,e),n&&fo(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&lr(t.V,(function(t,e){go(r,e,t)})),n=t.na,(e=t.A)&&n&&go(r,e,n),go(r,"VER",t.ha),hs(t,r),r}function Os(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zo(t.Na)).F=t.C,e}function Es(){}function Ss(){if(vr&&!(10<=Number(kr)))throw Error("Environmental error: no available transport.")}function Is(t,e){ti.call(this),this.a=new is(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!rr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rr(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ks(this)}function Ts(t){Ui.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function xs(){qi.call(this),this.status=1}function ks(t){this.a=t}(Mn=zo.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Fi),this.a.onreadystatechange=Qn(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Yo(this,o)}t=n||"";var i=new io(this.headers);r&&ro(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=$o,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Un.FormData&&t instanceof Un.FormData,!(0<=Xn(Qo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ts(this),0<this.o&&((this.D=function(t){return vr&&xr(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Qn(this.xa,this)):this.m=yi(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Yo(this,o)}},Mn.xa=function(){void 0!==Vn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ei(this,"timeout"),this.abort(8))},Mn.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ei(this,"complete"),ei(this,"abort"),Xo(this))},Mn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Xo(this,!0)),zo.X.G.call(this)},Mn.za=function(){this.j||(this.A||this.l||this.g?Jo(this):this.Ua())},Mn.Ua=function(){Jo(this)},Mn.W=function(){try{return 2<es(this)?this.a.status:-1}catch(yr){return-1}},Mn.$=function(){try{return this.a?this.a.responseText:""}catch(yr){return""}},Mn.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ko(e)}},Mn.ua=function(){return this.h},Mn.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Mn=is.prototype).ha=8,Mn.v=1,Mn.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Hi(this,this.c,t,void 0),r=this.l;if(this.O&&(r?fr(r=hr(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ds(this,n,e),go(i=co(this.B),"RID",t),go(i,"CVER",22),this.A&&go(i,"X-HTTP-Session-Id",this.A),hs(this,i),this.i&&r&&ns(i,this.i,r),Mo(this.b,n),this.Ia&&go(i,"TYPE","init"),this.da?(go(i,"$req",e),go(i,"SID","null"),n.U=!0,Gi(n,i,null)):Gi(n,i,e),this.v=2}}else 3==this.v&&(t?ls(this,t):0==this.g.length||Do(this.b)||ls(this))},Mn.Aa=function(){if(this.j=null,ys(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Pi(Qn(this.Ta,this),t)}},Mn.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ji(10),ss(this),ys(this))},Mn.Sa=function(){null!=this.m&&(this.m=null,ss(this),ps(this),ji(19))},Mn.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ji(2)):(this.c.info("Failed to ping google.com"),ji(1))},(Mn=Es.prototype).ta=function(){},Mn.sa=function(){},Mn.ra=function(){},Mn.qa=function(){},Mn.Ja=function(){},Ss.prototype.a=function(t,e){return new Is(t,e)},Zn(Is,ti),Is.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ji(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Cs(t,null,t.fa),cs(t)},Is.prototype.close=function(){os(this.a)},Is.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,us(this.a,e)}else this.l?((e={}).__data__=ri(t),us(this.a,e)):us(this.a,t)},Is.prototype.G=function(){this.a.f=null,delete this.f,os(this.a),delete this.a,Is.X.G.call(this)},Zn(Ts,Ui),Zn(xs,qi),Zn(ks,Es),ks.prototype.ta=function(){ei(this.a,"a")},ks.prototype.sa=function(t){ei(this.a,new Ts(t))},ks.prototype.ra=function(t){ei(this.a,new xs(t))},ks.prototype.qa=function(){ei(this.a,"b")},Ss.prototype.createWebChannel=Ss.prototype.a,Is.prototype.send=Is.prototype.h,Is.prototype.open=Is.prototype.g,Is.prototype.close=Is.prototype.close,Di.NO_ERROR=0,Di.TIMEOUT=8,Di.HTTP_ERROR=6,Ri.COMPLETE="complete",Mi.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",ti.prototype.listen=ti.prototype.va,zo.prototype.listenOnce=zo.prototype.wa,zo.prototype.getLastError=zo.prototype.Qa,zo.prototype.getLastErrorCode=zo.prototype.ua,zo.prototype.getStatus=zo.prototype.W,zo.prototype.getResponseJson=zo.prototype.Pa,zo.prototype.getResponseText=zo.prototype.$,zo.prototype.send=zo.prototype.ba;var As=Di,js=Ri,Ns=Si,Ps=Mi,Ds=zo,Rs=n("mrSG"),Ls=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ls.o=-1;var Ms={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fs=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Rs.c)(e,t),e}(Error),Vs=new Dn.b("@firebase/firestore");function Us(){return Vs.logLevel}function qs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vs.logLevel<=Dn.a.DEBUG){var r=e.map(Ks);Vs.debug.apply(Vs,Object(Rs.f)(["Firestore (8.3.2): "+t],r))}}function Bs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vs.logLevel<=Dn.a.ERROR){var r=e.map(Ks);Vs.error.apply(Vs,Object(Rs.f)(["Firestore (8.3.2): "+t],r))}}function Hs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vs.logLevel<=Dn.a.WARN){var r=e.map(Ks);Vs.warn.apply(Vs,Object(Rs.f)(["Firestore (8.3.2): "+t],r))}}function Ks(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Fy){return t}}function zs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.2) INTERNAL ASSERTION FAILED: "+t;throw Bs(e),new Error(e)}function Ws(t,e){t||zs()}function Gs(t,e){return t}function Qs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $s=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Qs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ys(t,e){return t<e?-1:t>e?1:0}function Zs(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Js(t){return t+"\0"}var Xs=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Fs(Ms.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Fs(Ms.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Fs(Ms.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fs(Ms.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ys(this.nanoseconds,t.nanoseconds):Ys(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ta=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Xs(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ea(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function na(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ra(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ia=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&zs(),void 0===n?n=t.length-e:n>t.length-e&&zs(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ia),sa=/^[_a-zA-Z][_a-zA-Z0-9]*$/,aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return sa.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Fs(Ms.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Fs(Ms.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Fs(Ms.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ia),ua=function(){function t(t){this.fields=t,t.sort(aa.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Zs(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ca=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ys(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ca.EMPTY_BYTE_STRING=new ca("");var la=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ha(t){if(Ws(!!t),"string"==typeof t){var e=0,n=la.exec(t);if(Ws(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:da(t.seconds),nanos:da(t.nanos)}}function da(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function fa(t){return"string"==typeof t?ca.fromBase64String(t):ca.fromUint8Array(t)}function pa(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ga(t){var e=ha(t.mapValue.fields.__local_write_time__.timestampValue);return new Xs(e.seconds,e.nanos)}function ya(t){return null==t}function ma(t){return 0===t&&1/t==-1/0}function va(t){return"number"==typeof t&&Number.isInteger(t)&&!ma(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ba=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(oa.fromString(e))},t.fromName=function(e){return new t(oa.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===oa.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return oa.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new oa(e.slice()))},t}();function _a(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pa(t)?4:10:zs()}function wa(t,e){var n=_a(t);if(n!==_a(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ga(t).isEqual(ga(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ha(t.timestampValue),r=ha(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return fa(t.bytesValue).isEqual(fa(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return da(t.geoPointValue.latitude)===da(e.geoPointValue.latitude)&&da(t.geoPointValue.longitude)===da(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return da(t.integerValue)===da(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=da(t.doubleValue),r=da(e.doubleValue);return n===r?ma(n)===ma(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ea(n)!==ea(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wa(n[i],r[i])))return!1;return!0}(t,e);default:return zs()}}function Ca(t,e){return void 0!==(t.values||[]).find((function(t){return wa(t,e)}))}function Oa(t,e){var n=_a(t),r=_a(e);if(n!==r)return Ys(n,r);switch(n){case 0:return 0;case 1:return Ys(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=da(t.integerValue||t.doubleValue),r=da(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ea(t.timestampValue,e.timestampValue);case 4:return Ea(ga(t),ga(e));case 5:return Ys(t.stringValue,e.stringValue);case 6:return function(t,e){var n=fa(t),r=fa(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ys(n[i],r[i]);if(0!==o)return o}return Ys(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ys(da(t.latitude),da(e.latitude));return 0!==n?n:Ys(da(t.longitude),da(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Oa(n[i],r[i]);if(o)return o}return Ys(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ys(r[s],o[s]);if(0!==a)return a;var u=Oa(n[r[s]],i[o[s]]);if(0!==u)return u}return Ys(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zs()}}function Ea(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ys(t,e);var n=ha(t),r=ha(e),i=Ys(n.seconds,r.seconds);return 0!==i?i:Ys(n.nanos,r.nanos)}function Sa(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=ha(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?fa(e.bytesValue).toBase64():"referenceValue"in e?ba.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):zs();var n}(t)}function Ia(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ta(t){return!!t&&"integerValue"in t}function xa(t){return!!t&&"arrayValue"in t}function ka(t){return!!t&&"nullValue"in t}function Aa(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ja(t){return!!t&&"mapValue"in t}var Na=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(aa.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return wa(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===_a(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=ja(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)})),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(aa.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!ja(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Pa(t){var e=[];return na(t.fields||{},(function(t,n){var r=new aa([t]);if(ja(n)){var i=Pa(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new ua(e)}var Da=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ta.min(),Na.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Na.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Na.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Na.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Na.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ra=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function La(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ra(t,e,n,r,i,o,s)}function Ma(t){var e=Gs(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Sa(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ya(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ya(e.startAt)),e.endAt&&(n+="|ub:",n+=Ya(e.endAt)),e.h=n}return e.h}function Fa(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ja(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!wa(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tu(t.startAt,e.startAt)&&tu(t.endAt,e.endAt)}function Va(t){return ba.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ua=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Rs.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new qa(t,n,r):"array-contains"===n?new za(t,r):"in"===n?new Wa(t,r):"not-in"===n?new Ga(t,r):"array-contains-any"===n?new Qa(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ba(t,n):new Ha(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Oa(e,this.value)):null!==e&&_a(this.value)===_a(e)&&this.m(Oa(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zs()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),qa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ba.fromName(r.referenceValue),i}return Object(Rs.c)(e,t),e.prototype.matches=function(t){var e=ba.comparator(t.key,this.key);return this.m(e)},e}(Ua),Ba=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ka(0,n),r}return Object(Rs.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ua),Ha=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ka(0,n),r}return Object(Rs.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ua);function Ka(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ba.fromName(t.referenceValue)}))}var za=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Rs.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return xa(e)&&Ca(e.arrayValue,this.value)},e}(Ua),Wa=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Rs.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ca(this.value.arrayValue,e)},e}(Ua),Ga=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Rs.c)(e,t),e.prototype.matches=function(t){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ca(this.value.arrayValue,e)},e}(Ua),Qa=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Rs.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!xa(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ca(e.value.arrayValue,t)}))},e}(Ua),$a=function(t,e){this.position=t,this.before=e};function Ya(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Sa(t)})).join(",")}var Za=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ja(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Xa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ba.comparator(ba.fromName(s.referenceValue),n.key):Oa(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function tu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wa(t.position[n],e.position[n]))return!1;return!0}var eu=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function nu(t,e,n,r,i,o,s,a){return new eu(t,e,n,r,i,o,s,a)}function ru(t){return new eu(t)}function iu(t){return!ya(t.limit)&&"F"===t.limitType}function ou(t){return!ya(t.limit)&&"L"===t.limitType}function su(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function au(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function uu(t){return null!==t.collectionGroup}function cu(t){var e=Gs(t);if(null===e.p){e.p=[];var n=au(e),r=su(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Za(n)),e.p.push(new Za(aa.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Za(aa.keyField(),u))}}}return e.p}function lu(t){var e=Gs(t);if(!e.T)if("F"===e.limitType)e.T=La(e.path,e.collectionGroup,cu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=cu(e);r<i.length;r++){var o=i[r];n.push(new Za(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new $a(e.endAt.position,!e.endAt.before):null,a=e.startAt?new $a(e.startAt.position,!e.startAt.before):null;e.T=La(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function hu(t,e,n){return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return Fa(lu(t),lu(e))&&t.limitType===e.limitType}function fu(t){return Ma(lu(t))+"|lt:"+t.limitType}function pu(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Sa(e.value);var e})).join(", ")+"]"),ya(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ya(t.startAt)),t.endAt&&(e+=", endAt: "+Ya(t.endAt)),"Target("+e+")"}(lu(t))+"; limitType="+t.limitType+")"}function gu(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ba.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Xa(t.startAt,cu(t),e)||t.endAt&&Xa(t.endAt,cu(t),e))}(t,e)}function yu(t){return function(e,n){for(var r=!1,i=0,o=cu(t);i<o.length;i++){var s=o[i],a=mu(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function mu(t,e,n){var r=t.field.isKeyField()?ba.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Oa(r,i):zs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zs()}}function vu(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ma(e)?"-0":e}}function bu(t){return{integerValue:""+t}}function _u(t,e){return va(e)?bu(e):vu(t,e)}var wu=function(){this._=void 0};function Cu(t,e,n){return t instanceof Su?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Iu?Tu(t,e):t instanceof xu?ku(t,e):function(t,e){var n=Eu(t,e),r=ju(n)+ju(t.A);return Ta(n)&&Ta(t.A)?bu(r):vu(t.R,r)}(t,e)}function Ou(t,e,n){return t instanceof Iu?Tu(t,e):t instanceof xu?ku(t,e):n}function Eu(t,e){return t instanceof Au?Ta(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e}(wu),Iu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Rs.c)(e,t),e}(wu);function Tu(t,e){for(var n=Nu(e),r=function(t){n.some((function(e){return wa(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var xu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Rs.c)(e,t),e}(wu);function ku(t,e){for(var n=Nu(e),r=function(t){n=n.filter((function(e){return!wa(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Au=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Rs.c)(e,t),e}(wu);function ju(t){return da(t.integerValue||t.doubleValue)}function Nu(t){return xa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Pu=function(t,e){this.field=t,this.transform=e},Du=function(t,e){this.version=t,this.transformResults=e},Ru=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Lu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Mu=function(){};function Fu(t,e,n){t instanceof Hu?function(t,e,n){var r=t.value.clone(),i=Wu(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Ku?function(t,e,n){if(Lu(t.precondition,e)){var r=Wu(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(zu(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Vu(t,e,n){t instanceof Hu?function(t,e,n){if(Lu(t.precondition,e)){var r=t.value.clone(),i=Gu(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Bu(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Ku?function(t,e,n){if(Lu(t.precondition,e)){var r=Gu(t.fieldTransforms,n,e),i=e.data;i.setAll(zu(t)),i.setAll(r),e.convertToFoundDocument(Bu(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Lu(t.precondition,e)&&e.convertToNoDocument(ta.min())}(t,e)}function Uu(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Eu(o.transform,s||null);null!=a&&(null==n&&(n=Na.empty()),n.set(o.field,a))}return n||null}function qu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Zs(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Iu&&e instanceof Iu||t instanceof xu&&e instanceof xu?Zs(t.elements,e.elements,wa):t instanceof Au&&e instanceof Au?wa(t.A,e.A):t instanceof Su&&e instanceof Su}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Bu(t){return t.isFoundDocument()?t.version:ta.min()}var Hu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Rs.c)(e,t),e}(Mu),Ku=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Rs.c)(e,t),e}(Mu);function zu(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Wu(t,e,n){var r=new Map;Ws(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ou(s,a,n[i]))}return r}function Gu(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Cu(a,u,e))}return r}var Qu,$u,Yu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Rs.c)(e,t),e}(Mu),Zu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Rs.c)(e,t),e}(Mu),Ju=function(t){this.count=t};function Xu(t){switch(t){case Ms.OK:return zs();case Ms.CANCELLED:case Ms.UNKNOWN:case Ms.DEADLINE_EXCEEDED:case Ms.RESOURCE_EXHAUSTED:case Ms.INTERNAL:case Ms.UNAVAILABLE:case Ms.UNAUTHENTICATED:return!1;case Ms.INVALID_ARGUMENT:case Ms.NOT_FOUND:case Ms.ALREADY_EXISTS:case Ms.PERMISSION_DENIED:case Ms.FAILED_PRECONDITION:case Ms.ABORTED:case Ms.OUT_OF_RANGE:case Ms.UNIMPLEMENTED:case Ms.DATA_LOSS:return!0;default:return zs()}}function tc(t){if(void 0===t)return Bs("GRPC error has no .code"),Ms.UNKNOWN;switch(t){case Qu.OK:return Ms.OK;case Qu.CANCELLED:return Ms.CANCELLED;case Qu.UNKNOWN:return Ms.UNKNOWN;case Qu.DEADLINE_EXCEEDED:return Ms.DEADLINE_EXCEEDED;case Qu.RESOURCE_EXHAUSTED:return Ms.RESOURCE_EXHAUSTED;case Qu.INTERNAL:return Ms.INTERNAL;case Qu.UNAVAILABLE:return Ms.UNAVAILABLE;case Qu.UNAUTHENTICATED:return Ms.UNAUTHENTICATED;case Qu.INVALID_ARGUMENT:return Ms.INVALID_ARGUMENT;case Qu.NOT_FOUND:return Ms.NOT_FOUND;case Qu.ALREADY_EXISTS:return Ms.ALREADY_EXISTS;case Qu.PERMISSION_DENIED:return Ms.PERMISSION_DENIED;case Qu.FAILED_PRECONDITION:return Ms.FAILED_PRECONDITION;case Qu.ABORTED:return Ms.ABORTED;case Qu.OUT_OF_RANGE:return Ms.OUT_OF_RANGE;case Qu.UNIMPLEMENTED:return Ms.UNIMPLEMENTED;case Qu.DATA_LOSS:return Ms.DATA_LOSS;default:return zs()}}($u=Qu||(Qu={}))[$u.OK=0]="OK",$u[$u.CANCELLED=1]="CANCELLED",$u[$u.UNKNOWN=2]="UNKNOWN",$u[$u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$u[$u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$u[$u.NOT_FOUND=5]="NOT_FOUND",$u[$u.ALREADY_EXISTS=6]="ALREADY_EXISTS",$u[$u.PERMISSION_DENIED=7]="PERMISSION_DENIED",$u[$u.UNAUTHENTICATED=16]="UNAUTHENTICATED",$u[$u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$u[$u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$u[$u.ABORTED=10]="ABORTED",$u[$u.OUT_OF_RANGE=11]="OUT_OF_RANGE",$u[$u.UNIMPLEMENTED=12]="UNIMPLEMENTED",$u[$u.INTERNAL=13]="INTERNAL",$u[$u.UNAVAILABLE=14]="UNAVAILABLE",$u[$u.DATA_LOSS=15]="DATA_LOSS";var ec=function(){function t(t,e){this.comparator=t,this.root=e||rc.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rc.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rc.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new nc(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new nc(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new nc(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new nc(this.root,t,this.comparator,!0)},t}(),nc=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),rc=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw zs();if(this.right.isRed())throw zs();var t=this.left.check();if(t!==this.right.check())throw zs();return t+(this.isRed()?0:1)},t}();rc.EMPTY=null,rc.RED=!0,rc.BLACK=!1,rc.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw zs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw zs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw zs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw zs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw zs()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new rc(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ic=function(){function t(t){this.comparator=t,this.data=new ec(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new oc(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new oc(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),oc=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),sc=new ec(ba.comparator);function ac(){return sc}var uc=new ec(ba.comparator);function cc(){return uc}var lc=new ec(ba.comparator);function hc(){return lc}var dc=new ic(ba.comparator);function fc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=dc,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pc=new ic(Ys);function gc(){return pc}var yc=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ta.min(),r,gc(),ac(),fc())},t}(),mc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ca.EMPTY_BYTE_STRING,n,fc(),fc(),fc())},t}(),vc=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},bc=function(t,e){this.targetId=t,this.V=e},_c=function(t,e,n,r){void 0===n&&(n=ca.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},wc=function(){function t(){this.S=0,this.D=Ec(),this.C=ca.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=fc(),e=fc(),n=fc();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:zs()}})),new mc(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ec()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Cc=function(){function t(t){this.W=t,this.G=new Map,this.H=ac(),this.J=Oc(),this.Y=new ic(Ys)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:zs()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Va(i))if(0===n){var o=new ba(i.path);this.tt(e,o,Da.newNoDocument(o,ta.min()))}else Ws(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Va(o.target)){var s=new ba(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Da.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=fc();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new yc(t,n,this.Y,this.H,r);return this.H=ac(),this.J=Oc(),this.Y=new ic(Ys),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new wc,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ic(Ys),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||qs("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new wc),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Oc(){return new ec(ba.comparator)}function Ec(){return new ec(ba.comparator)}var Sc={asc:"ASCENDING",desc:"DESCENDING"},Ic={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tc=function(t,e){this.databaseId=t,this.I=e};function xc(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function kc(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ac(t,e){return xc(t,e.toTimestamp())}function jc(t){return Ws(!!t),ta.fromTimestamp(function(t){var e=ha(t);return new Xs(e.seconds,e.nanos)}(t))}function Nc(t,e){return function(t){return new oa(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Pc(t){var e=oa.fromString(t);return Ws(nl(e)),e}function Dc(t,e){return Nc(t.databaseId,e.path)}function Rc(t,e){var n=Pc(e);if(n.get(1)!==t.databaseId.projectId)throw new Fs(Ms.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Fs(Ms.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ba(Vc(n))}function Lc(t,e){return Nc(t.databaseId,e)}function Mc(t){var e=Pc(t);return 4===e.length?oa.emptyPath():Vc(e)}function Fc(t){return new oa(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vc(t){return Ws(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Uc(t,e,n){return{name:Dc(t,e),fields:n.toProto().mapValue.fields}}function qc(t,e,n){var r=Rc(t,e.name),i=jc(e.updateTime),o=new Na({mapValue:{fields:e.fields}}),s=Da.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Bc(t,e){var n;if(e instanceof Hu)n={update:Uc(t,e.key,e.value)};else if(e instanceof Yu)n={delete:Dc(t,e.key)};else if(e instanceof Ku)n={update:Uc(t,e.key,e.data),updateMask:el(e.fieldMask)};else{if(!(e instanceof Zu))return zs();n={verify:Dc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Su)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Iu)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xu)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Au)return{fieldPath:e.field.canonicalString(),increment:n.A};throw zs()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ac(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zs()}(t,e.precondition)),n}function Hc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ru.updateTime(jc(t.updateTime)):void 0!==t.exists?Ru.exists(t.exists):Ru.none()}(e.currentDocument):Ru.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(Ws("REQUEST_TIME"===e.setToServerValue),n=new Su):"appendMissingElements"in e?n=new Iu(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new xu(e.removeAllFromArray.values||[]):"increment"in e?n=new Au(t,e.increment):zs();var r=aa.fromServerFormat(e.fieldPath);return new Pu(r,n)}(t,e)})):[];if(e.update){var i=Rc(t,e.update.name),o=new Na({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new ua((t.fieldPaths||[]).map((function(t){return aa.fromServerFormat(t)})))}(e.updateMask);return new Ku(i,o,s,n,r)}return new Hu(i,o,n,r)}if(e.delete){var a=Rc(t,e.delete);return new Yu(a,n)}if(e.verify){var u=Rc(t,e.verify);return new Zu(u,n)}return zs()}function Kc(t,e){return{documents:[Lc(t,e.path)]}}function zc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Lc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Lc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Aa(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NAN"}};if(ka(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Aa(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NOT_NAN"}};if(ka(t.value))return{unaryFilter:{field:Zc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(t.field),op:Yc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Zc(t.field),direction:$c(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ya(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Gc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Gc(e.endAt)),n}function Wc(t){var e=Mc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ws(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[tl(e)]:void 0!==e.fieldFilter?[Xc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):zs():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Za(Jc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ya(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Qc(n.startAt));var l=null;return n.endAt&&(l=Qc(n.endAt)),nu(e,i,a,s,u,"F",c,l)}function Gc(t){return{before:t.before,values:t.position}}function Qc(t){return new $a(t.values||[],!!t.before)}function $c(t){return Sc[t]}function Yc(t){return Ic[t]}function Zc(t){return{fieldPath:t.canonicalString()}}function Jc(t){return aa.fromServerFormat(t.fieldPath)}function Xc(t){return Ua.create(Jc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zs()}}(t.fieldFilter.op),t.fieldFilter.value)}function tl(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Jc(t.unaryFilter.field);return Ua.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Jc(t.unaryFilter.field);return Ua.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Jc(t.unaryFilter.field);return Ua.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Jc(t.unaryFilter.field);return Ua.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zs()}}function el(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function nl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function rl(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ol(e)),e=il(t.get(n),e);return ol(e)}function il(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ol(t){return t+"\x01\x01"}function sl(t){var e=t.length;if(Ws(e>=2),2===e)return Ws("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),oa.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&zs(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:zs()}o=s+2}return new oa(r)}var al=function(t,e){this.seconds=t,this.nanoseconds=e},ul=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ul.store="owner",ul.key="owner";var cl=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};cl.store="mutationQueues",cl.keyPath="userId";var ll=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ll.store="mutations",ll.keyPath="batchId",ll.userMutationsIndex="userMutationsIndex",ll.userMutationsKeyPath=["userId","batchId"];var hl=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rl(e)]},t.key=function(t,e,n){return[t,rl(e),n]},t}();hl.store="documentMutations",hl.PLACEHOLDER=new hl;var dl=function(t,e){this.path=t,this.readTime=e},fl=function(t,e){this.path=t,this.version=e},pl=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pl.store="remoteDocuments",pl.readTimeIndex="readTimeIndex",pl.readTimeIndexPath="readTime",pl.collectionReadTimeIndex="collectionReadTimeIndex",pl.collectionReadTimeIndexPath=["parentPath","readTime"];var gl=function(t){this.byteSize=t};gl.store="remoteDocumentGlobal",gl.key="remoteDocumentGlobalKey";var yl=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};yl.store="targets",yl.keyPath="targetId",yl.queryTargetsIndexName="queryTargetsIndex",yl.queryTargetsKeyPath=["canonicalId","targetId"];var ml=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ml.store="targetDocuments",ml.keyPath=["targetId","path"],ml.documentTargetsIndex="documentTargetsIndex",ml.documentTargetsKeyPath=["path","targetId"];var vl=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};vl.key="targetGlobalKey",vl.store="targetGlobal";var bl=function(t,e){this.collectionId=t,this.parent=e};bl.store="collectionParents",bl.keyPath=["collectionId","parent"];var _l=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};_l.store="clientMetadata",_l.keyPath="clientId";var wl=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};wl.store="bundles",wl.keyPath="bundleId";var Cl=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Cl.store="namedQueries",Cl.keyPath="name";var Ol=Object(Rs.f)(Object(Rs.f)([],Object(Rs.f)(Object(Rs.f)([],Object(Rs.f)(Object(Rs.f)([],Object(Rs.f)(Object(Rs.f)([],[cl.store,ll.store,hl.store,pl.store,yl.store,ul.store,vl.store,ml.store]),[_l.store])),[gl.store])),[bl.store])),[wl.store,Cl.store]),El="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sl=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Il=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Tl=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&zs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),xl=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Il,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new jl(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ll(e.target.error);n.ft.reject(new jl(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new jl(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(qs("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Pl(e)},t}(),kl=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Pn.n)())&&Bs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return qs("SimpleDb","Removing database:",t),Dl(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Pn.n)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e,n=this;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(qs("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new jl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Fs(Ms.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new jl(t,n))},i.onupgradeneeded=function(t){qs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){qs("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Rs.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(Rs.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Rs.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=xl.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Tl.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return qs("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Al=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Dl(this.Pt.delete())},t}(),jl=function(t){function e(e,n){var r=this;return(r=t.call(this,Ms.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Rs.c)(e,t),e}(Fs);function Nl(t){return"IndexedDbTransactionError"===t.name}var Pl=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(qs("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(qs("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dl(n)},t.prototype.add=function(t){return qs("SimpleDb","ADD",this.store.name,t,t),Dl(this.store.add(t))},t.prototype.get=function(t){var e=this;return Dl(this.store.get(t)).next((function(n){return void 0===n&&(n=null),qs("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return qs("SimpleDb","DELETE",this.store.name,t),Dl(this.store.delete(t))},t.prototype.count=function(){return qs("SimpleDb","COUNT",this.store.name),Dl(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){qs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Tl((function(n,r){e.onerror=function(t){var e=Ll(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Tl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Al(i),s=e(i.primaryKey,i.value,o);if(s instanceof Tl){var a=s.catch((function(t){return o.done(),Tl.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Tl.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Dl(t){return new Tl((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Ll(t.target.error);n(e)}}))}var Rl=!1;function Ll(t){var e=kl._t(Object(Pn.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Fs("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Rl||(Rl=!0,setTimeout((function(){throw r}),0)),r}}return t}var Ml=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Rs.c)(e,t),e}(Sl);function Fl(t,e){var n=Gs(t);return kl.It(n.Mt,e)}var Vl=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Fu(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Vu(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Vu(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ta.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),fc())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Zs(this.mutations,t.mutations,(function(t,e){return qu(t,e)}))&&Zs(this.baseMutations,t.baseMutations,(function(t,e){return qu(t,e)}))},t}(),Ul=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ws(e.mutations.length===r.length);for(var i=hc(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ql=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ta.min()),void 0===o&&(o=ta.min()),void 0===s&&(s=ca.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Bl=function(t){this.Lt=t};function Hl(t,e){if(e.document)return qc(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ba.fromSegments(e.noDocument.path),r=Ql(e.noDocument.readTime),i=Da.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ba.fromSegments(e.unknownDocument.path);return r=Ql(e.unknownDocument.version),Da.newUnknownDocument(o,r)}return zs()}function Kl(t,e,n){var r=zl(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Dc(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:xc(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new pl(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Gl(e.version);return s=e.hasCommittedMutations,new pl(null,new dl(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Gl(e.version);return new pl(new fl(c,l),null,null,!0,r,i)}return zs()}function zl(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wl(t){var e=new Xs(t[0],t[1]);return ta.fromTimestamp(e)}function Gl(t){var e=t.toTimestamp();return new al(e.seconds,e.nanoseconds)}function Ql(t){var e=new Xs(t.seconds,t.nanoseconds);return ta.fromTimestamp(e)}function $l(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Hc(t.Lt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return Hc(t.Lt,e)})),o=Xs.fromMillis(e.localWriteTimeMs);return new Vl(e.batchId,o,n,i)}function Yl(t){var e,n,r=Ql(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ql(t.lastLimboFreeSnapshotVersion):ta.min();return void 0!==t.query.documents?(Ws(1===(n=t.query).documents.length),e=lu(ru(Mc(n.documents[0])))):e=function(t){return lu(Wc(t))}(t.query),new ql(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ca.fromBase64String(t.resumeToken))}function Zl(t,e){var n,r=Gl(e.snapshotVersion),i=Gl(e.lastLimboFreeSnapshotVersion);n=Va(e.target)?Kc(t.Lt,e.target):zc(t.Lt,e.target);var o=e.resumeToken.toBase64();return new yl(e.targetId,Ma(e.target),r,o,e.sequenceNumber,i,n)}function Jl(t){var e=Wc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?hu(e,e.limit,"L"):e}var Xl=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return th(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ql(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return th(t).put({bundleId:(n=e).id,createTime:Gl(jc(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return eh(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Jl(e.bundledQuery),readTime:Ql(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return eh(t).put(function(t){return{name:t.name,readTime:Gl(jc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function th(t){return Fl(t,wl.store)}function eh(t){return Fl(t,Cl.store)}var nh=function(){function t(){this.Bt=new rh}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Tl.resolve()},t.prototype.getCollectionParents=function(t,e){return Tl.resolve(this.Bt.getEntries(e))},t}(),rh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ic(oa.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ic(oa.comparator)).toArray()},t}(),ih=function(){function t(){this.qt=new rh}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:rl(i)};return oh(t).put(o)}return Tl.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Js(e),""],!1,!0);return oh(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(sl(o.parent))}return n}))},t}();function oh(t){return Fl(t,bl.store)}var sh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ah=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function uh(t,e,n){var r=t.store(ll.store),i=t.store(hl.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Ws(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=hl.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Tl.waitFor(o).next((function(){return c}))}function ch(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zs();e=t.noDocument}return JSON.stringify(e).length}ah.DEFAULT_COLLECTION_PERCENTILE=10,ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ah.DEFAULT=new ah(41943040,ah.DEFAULT_COLLECTION_PERCENTILE,ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ah.DISABLED=new ah(-1,0,0);var lh=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Ws(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).Ot({index:ll.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=fh(t),s=dh(t);return s.add({}).next((function(a){Ws("number"==typeof a);for(var u=new Vl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Bc(t.Lt,e)})),i=n.mutations.map((function(e){return Bc(t.Lt,e)}));return new ll(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new ic((function(t,e){return Ys(t.canonicalString(),e.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],g=hl.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,hl.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[a]=u.keys()})),Tl.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return dh(t).get(e).next((function(t){return t?(Ws(t.userId===n.userId),$l(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Tl.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return dh(t).Ot({index:ll.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ws(e.batchId>=r),o=$l(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dh(t).Ot({index:ll.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).Nt(ll.userMutationsIndex,n).next((function(t){return t.map((function(t){return $l(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=hl.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fh(t).Ot({range:i},(function(r,i,s){var a=r[0],u=r[2],c=sl(r[1]);if(a===n.userId&&e.path.isEqual(c))return dh(t).get(u).next((function(t){if(!t)throw zs();Ws(t.userId===n.userId),o.push($l(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ic(Ys),i=[];return e.forEach((function(e){var o=hl.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=fh(t).Ot({range:s},(function(t,i,o){var s=t[0],a=t[2],u=sl(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Tl.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=hl.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ic(Ys);return fh(t).Ot({range:s},(function(t,e,o){var s=t[0],u=t[2],c=sl(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(dh(t).get(e).next((function(t){if(null===t)throw zs();Ws(t.userId===n.userId),r.push($l(n.R,t))})))})),Tl.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return uh(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Tl.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Tl.resolve();var r=IDBKeyRange.lowerBound(hl.prefixForUser(e.userId)),i=[];return fh(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=sl(t[1]);i.push(o)}else r.done()})).next((function(){Ws(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return hh(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ph(t).get(this.userId).next((function(t){return t||new cl(e.userId,-1,"")}))},t}();function hh(t,e,n){var r=hl.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fh(t).Ot({range:o,kt:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function dh(t){return Fl(t,ll.store)}function fh(t){return Fl(t,hl.store)}function ph(t){return Fl(t,cl.store)}var gh=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),yh=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new gh(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return ta.fromTimestamp(new Xs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return mh(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Ws(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return mh(t).Ot((function(s,a){var u=Yl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Tl.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return mh(t).Ot((function(t,n){var r=Yl(n);e(r)}))},t.prototype.Xt=function(t){return vh(t).get(vl.key).next((function(t){return Ws(null!==t),t}))},t.prototype.Zt=function(t,e){return vh(t).put(vl.key,e)},t.prototype.te=function(t,e){return mh(t).put(Zl(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ma(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return mh(t).Ot({range:r,index:yl.queryTargetsIndexName},(function(t,n,r){var o=Yl(n);Fa(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=bh(t);return e.forEach((function(e){var s=rl(e.path);i.push(o.put(new ml(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Tl.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=bh(t);return Tl.forEach(e,(function(e){var o=rl(e.path);return Tl.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=bh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=bh(t),i=fc();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=sl(t[1]),o=new ba(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=rl(e.path),r=IDBKeyRange.bound([n],[Js(n)],!1,!0),i=0;return bh(t).Ot({index:ml.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return mh(t).get(e).next((function(t){return t?Yl(t):null}))},t}();function mh(t){return Fl(t,yl.store)}function vh(t){return Fl(t,vl.store)}function bh(t){return Fl(t,ml.store)}function _h(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){if(t.code!==Ms.FAILED_PRECONDITION||t.message!==El)throw t;return qs("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function wh(t,e){var n=t[1],r=e[1],i=Ys(t[0],e[0]);return 0===i?Ys(n,r):i}var Ch=function(){function t(t){this.ne=t,this.buffer=new ic(wh),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();wh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Oh=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;qs("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(Rs.b)(e,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Nl(e=n.sent())?(qs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,_h(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Eh=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Tl.resolve(Ls.o);var r=new Ch(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(qs("LruGarbageCollector","Garbage collection skipped; disabled"),Tl.resolve(sh)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(qs("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),sh):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(qs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Us()<=Dn.a.DEBUG&&qs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Tl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Sh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Eh(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Ih(t,n)},t.prototype.removeReference=function(t,e,n){return Ih(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ih(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ph(t).$t((function(r){return hh(t,r,e).next((function(t){return t&&(n=!0),Tl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),bh(t).delete([0,rl(s.path)])}))}));i.push(u)}})).next((function(){return Tl.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ih(t,e)},t.prototype.we=function(t,e){var n,r=bh(t),i=Ls.o;return r.Ot({index:ml.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ls.o&&e(new ba(sl(n)),i),i=s,n=o):i=Ls.o})).next((function(){i!==Ls.o&&e(new ba(sl(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ih(t,e){return bh(t).put(function(t,e){return new ml(0,rl(t.path),e)}(e,t.currentSequenceNumber))}var Th=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){na(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return ra(this.inner)},t}(),xh=function(){function t(){this.changes=new Th((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ta.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Da.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Tl.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),kh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Nh(t).put(Ph(e),n)},t.prototype.removeEntry=function(t,e){var n=Nh(t),r=Ph(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Nh(t).get(Ph(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Nh(t).get(Ph(e)).next((function(t){return{document:n.ye(e,t),size:ch(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ac();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ac(),i=new ec(ba.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ch(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Tl.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Nh(t).Ot({range:r},(function(t,e,r){for(var s=ba.fromSegments(t);o&&ba.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ac(),o=e.path.length+1,s={};if(n.isEqual(ta.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=zl(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=pl.collectionReadTimeIndex}return Nh(t).Ot(s,(function(t,n,s){if(t.length===o){var a=Hl(r.R,n);e.path.isPrefixOf(a.key.path)?gu(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Ah(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return jh(t).get(gl.key).next((function(t){return Ws(!!t),t}))},t.prototype.me=function(t,e){return jh(t).put(gl.key,e)},t.prototype.ye=function(t,e){if(e){var n=Hl(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ta.min()))return n}return Da.newInvalidDocument(t)},t}(),Ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Th((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(Rs.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ic((function(t,e){return Ys(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Kl(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ch(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Kl(e.Ie.R,Da.newNoDocument(o,ta.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Tl.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(xh);function jh(t){return Fl(t,gl.store)}function Nh(t){return Fl(t,pl.store)}function Ph(t){return t.path.toArray()}var Dh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ws(n<r&&n>=0&&r<=11);var o=new xl("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ul.store)}(t),function(t){t.createObjectStore(cl.store,{keyPath:cl.keyPath}),t.createObjectStore(ll.store,{keyPath:ll.keyPath,autoIncrement:!0}).createIndex(ll.userMutationsIndex,ll.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hl.store)}(t),Rh(t),function(t){t.createObjectStore(pl.store)}(t));var s=Tl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ml.store),t.deleteObjectStore(yl.store),t.deleteObjectStore(vl.store)}(t),Rh(t)),s=s.next((function(){return function(t){var e=t.store(vl.store),n=new vl(0,0,ta.min().toTimestamp(),0);return e.put(vl.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ll.store).Nt().next((function(n){t.deleteObjectStore(ll.store),t.createObjectStore(ll.store,{keyPath:ll.keyPath,autoIncrement:!0}).createIndex(ll.userMutationsIndex,ll.userMutationsKeyPath,{unique:!0});var r=e.store(ll.store),i=n.map((function(t){return r.put(t)}));return Tl.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(_l.store,{keyPath:_l.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(gl.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pl.store);e.createIndex(pl.readTimeIndex,pl.readTimeIndexPath,{unique:!1}),e.createIndex(pl.collectionReadTimeIndex,pl.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(wl.store,{keyPath:wl.keyPath})}(t),function(t){t.createObjectStore(Cl.store,{keyPath:Cl.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(pl.store).Ot((function(t,n){e+=ch(n)})).next((function(){var n=new gl(e);return t.store(gl.store).put(gl.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(cl.store),r=t.store(ll.store);return n.Nt().next((function(n){return Tl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(ll.userMutationsIndex,i).next((function(r){return Tl.forEach(r,(function(r){Ws(r.userId===n.userId);var i=$l(e.R,r);return uh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(ml.store),n=t.store(pl.store);return t.store(vl.store).get(vl.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new oa(n),s=function(t){return[0,rl(t)]}(o);r.push(e.get(s).next((function(n){return n?Tl.resolve():function(n){return e.put(new ml(0,rl(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Tl.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(bl.store,{keyPath:bl.keyPath});var n=e.store(bl.store),r=new rh,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:rl(i)})}};return e.store(pl.store).Ot({kt:!0},(function(t,e){var n=new oa(t);return i(n.popLast())})).next((function(){return e.store(hl.store).Ot({kt:!0},(function(t,e){var n=sl(t[1]);return i(n.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(yl.store);return n.Ot((function(t,r){var i=Yl(r),o=Zl(e.R,i);return n.put(o)}))},t}();function Rh(t){t.createObjectStore(ml.store,{keyPath:ml.keyPath}).createIndex(ml.documentTargetsIndex,ml.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(yl.store,{keyPath:yl.keyPath}).createIndex(yl.queryTargetsIndexName,yl.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vl.store)}var Lh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mh=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Fs(Ms.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sh(this,i),this.Le=n+"main",this.R=new Bl(u),this.Be=new kl(this.Le,11,new Dh(this.R)),this.qe=new yh(this.referenceDelegate,this.R),this.Ut=new ih,this.Ue=function(t,e){return new kh(t,e)}(this.R,this.Ut),this.Qe=new Xl,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Bs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Fs(Ms.FAILED_PRECONDITION,Lh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Ls(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Rs.b)(e,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(Rs.b)(e,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(Rs.b)(e,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Vh(e).put(new _l(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Nl(e))return qs("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return qs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Fh(t).get(ul.key).next((function(t){return Tl.resolve(e.tn(t))}))},t.prototype.en=function(t){return Vh(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Fl(t,_l.store);return e.Nt().next((function(t){var n=r.rn(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Tl.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Tl.resolve(!0):Fh(t).get(ul.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Fs(Ms.FAILED_PRECONDITION,Lh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&qs("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t=this;return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ul.store,_l.store],(function(e){var n=new Ml(e,Ls.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Vh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return lh.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return qs("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ol,(function(o){return r=new Ml(o,i.Ne?i.Ne.next():Ls.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Bs("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new Fs(Ms.FAILED_PRECONDITION,El);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Fh(t).get(ul.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Fs(Ms.FAILED_PRECONDITION,Lh)}))},t.prototype.Ze=function(t){var e=new ul(this.clientId,this.allowTabSynchronization,Date.now());return Fh(t).put(ul.key,e)},t.yt=function(){return kl.yt()},t.prototype.Xe=function(t){var e=this,n=Fh(t);return n.get(ul.key).next((function(t){return e.tn(t)?(qs("IndexedDbPersistence","Releasing primary lease."),n.delete(ul.key)):Tl.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Bs("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return qs("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Bs("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Bs("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Fh(t){return Fl(t,ul.store)}function Vh(t){return Fl(t,_l.store)}function Uh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var qh=function(t,e){this.progress=t,this.wn=e},Bh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ba.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):uu(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ba(e)).next((function(t){var e=cc();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=cc();return this.Ut.getCollectionParents(t,i).next((function(s){return Tl.forEach(s,(function(s){var a=function(t,e){return new eu(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Rn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Da.newInvalidDocument(c),r=r.insert(c,l)),Vu(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){gu(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=fc(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ku&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Hh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=fc(),i=fc(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Kh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ta.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(iu(e)||ou(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Us()<=Dn.a.DEBUG&&qs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),pu(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new ic(yu(t));return e.forEach((function(e,r){gu(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Us()<=Dn.a.DEBUG&&qs("QueryEngine","Using full collection scan to execute query:",pu(e)),this.Sn.getDocumentsMatchingQuery(t,e,ta.min())},t}(),zh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ec(Ys),this.kn=new Th((function(t){return Ma(t)}),Fa),this.On=ta.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Bh(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Wh(t,e,n,r){return new zh(t,e,n,r)}function Gh(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Rs.d)(this,(function(s){switch(s.label){case 0:return n=Gs(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Bh(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=fc(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Qh(t,e){var n=Gs(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Tl.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Ws(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function $h(t){var e=Gs(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Yh(t,e){var n=Gs(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ws(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=ac();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Zh(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(ta.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Tl.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Zh(t,e,n,r,i){var o=fc();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ac();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(ta.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):qs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Jh(t,e){var n=Gs(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Xh(t,e){var n=Gs(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?Tl.resolve(r=i):n.qe.allocateTargetId(t).next((function(i){return r=new ql(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function td(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Rs.d)(this,(function(a){switch(a.label){case 0:r=Gs(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Nl(s=a.sent()))throw s;return qs("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function ed(t,e,n){var r=Gs(t),i=ta.min(),o=fc();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Gs(t),i=r.kn.get(n);return void 0!==i?Tl.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,lu(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ta.min(),n?o:fc())})).next((function(t){return{documents:t,Bn:o}}))}))}function nd(t,e){var n=Gs(t),r=Gs(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function rd(t){var e=Gs(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Gs(t),i=ac(),o=zl(n),s=Nh(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:pl.readTimeIndex,range:a},(function(t,e){var n=Hl(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Wl(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn;return e.On=t.readTime,n}))}function id(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){return[2,(e=Gs(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Nh(t),n=ta.min();return e.Ot({index:pl.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Wl(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function od(t,e,n,r){return Object(Rs.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,d,f;return Object(Rs.d)(this,(function(p){switch(p.label){case 0:for(i=Gs(t),o=fc(),s=ac(),a=hc(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Xh(i,function(t){return lu(ru(oa.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Zh(t,d,s,ta.min(),a).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next((function(){return i.qe.addMatchingKeys(t,o,f.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function sd(t,e,n){return void 0===n&&(n=fc()),Object(Rs.b)(this,void 0,void 0,(function(){var r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return[4,Xh(t,lu(Jl(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Gs(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=jc(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(ca.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var ad=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Tl.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:jc(n.createTime)}),Tl.resolve()},t.prototype.getNamedQuery=function(t,e){return Tl.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Jl(t.bundledQuery),readTime:jc(t.readTime)}}(e)),Tl.resolve()},t}(),ud=function(){function t(){this.Wn=new ic(cd.Gn),this.zn=new ic(cd.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new cd(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new cd(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ba(new oa([])),r=new cd(n,t),i=new cd(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ba(new oa([])),n=new cd(e,t),r=new cd(e,t+1),i=fc();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new cd(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),cd=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ba.comparator(t.key,e.key)||Ys(t.ns,e.ns)},t.Hn=function(t,e){return Ys(t.ns,e.ns)||ba.comparator(t.key,e.key)},t}(),ld=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ic(cd.Gn)}return t.prototype.checkEmpty=function(t){return Tl.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Vl(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new cd(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Tl.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Tl.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Tl.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Tl.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Tl.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new cd(e,0),i=new cd(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Tl.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ic(Ys);return e.forEach((function(t){var e=new cd(t,0),i=new cd(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Tl.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ba.isDocumentKey(i)||(i=i.child(""));var o=new cd(new ba(i),0),s=new ic(Ys);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Tl.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ws(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Tl.forEach(e.mutations,(function(i){var o=new cd(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new cd(e,0),r=this.rs.firstAfterOrEqual(n);return Tl.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Tl.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),hd=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ec(ba.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Tl.resolve(n?n.document.clone():Da.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ac();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Da.newInvalidDocument(t))})),Tl.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ac(),i=new ba(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||gu(e,u)&&(r=r.insert(u.key,u.clone()))}return Tl.resolve(r)},t.prototype.fs=function(t,e){return Tl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new dd(this)},t.prototype.getSize=function(t){return Tl.resolve(this.size)},t}(),dd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Rs.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Tl.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(xh),fd=function(){function t(t){this.persistence=t,this.ds=new Th((function(t){return Ma(t)}),Fa),this.lastRemoteSnapshotVersion=ta.min(),this.highestTargetId=0,this.ws=0,this._s=new ud,this.targetCount=0,this.ys=gh.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Tl.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Tl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Tl.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Tl.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Tl.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new gh(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Tl.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Tl.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Tl.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Tl.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Tl.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Tl.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Tl.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Tl.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Tl.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Tl.resolve(n)},t.prototype.containsKey=function(t,e){return Tl.resolve(this._s.containsKey(e))},t}(),pd=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ls(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new fd(this),this.Ut=new nh,this.Ue=function(t,e){return new hd(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Bl(e),this.Qe=new ad(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ld(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;qs("MemoryPersistence","Starting transaction:",t);var i=new gd(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Tl.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),gd=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Rs.c)(e,t),e}(Sl),yd=function(){function t(t){this.persistence=t,this.As=new ud,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw zs()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Tl.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Tl.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Tl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tl.forEach(this.vs,(function(r){var i=ba.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Tl.or([function(){return Tl.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),md=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function vd(t,e){return"firestore_clients_"+t+"_"+e}function bd(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function _d(t,e){return"firestore_targets_"+t+"_"+e}md.UNAUTHENTICATED=new md(null),md.GOOGLE_CREDENTIALS=new md("google-credentials-uid"),md.FIRST_PARTY=new md("first-party-uid");var wd=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Fs(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Bs("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Cd=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Fs(i.error.code,i.error.message)),o?new t(e,i.state,r):(Bs("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Od=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=gc(),s=0;i&&s<r.activeTargetIds.length;++s)i=va(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Bs("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ed=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Bs("SharedClientState","Failed to parse online state: "+e),null)},t}(),Sd=function(){function t(){this.activeTargetIds=gc()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Id=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ec(Ys),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=vd(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Sd),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Rs.d)(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(vd(this.persistenceKey,r)))&&(o=Od.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(_d(this.persistenceKey,t));if(n){var r=Cd.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(_d(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return qs("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){qs("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){qs("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(qs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Bs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(Rs.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(Rs.d)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ls.o;if(null!=t)try{var n=JSON.parse(t);Ws("number"==typeof n),e=n}catch(t){Bs("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ls.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new wd(this.currentUser,t,e,n),i=bd(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=bd(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=_d(this.persistenceKey,t),i=new Cd(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Od.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return wd.Vs(new md(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Cd.Vs(r,e)},t.prototype.js=function(t){return Ed.Vs(t)},t.prototype.ii=function(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(qs("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=gc();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Td=function(){function t(){this.li=new Sd,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Sd,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),xd=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),kd=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){qs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){qs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ad={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},jd=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Nd=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Rs.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Ds;s.listenOnce(js.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case As.NO_ERROR:var e=s.getResponseJson();qs("Connection","XHR received:",JSON.stringify(e)),i(e);break;case As.TIMEOUT:qs("Connection",'RPC "'+t+'" timed out'),o(new Fs(Ms.DEADLINE_EXCEEDED,"Request time out"));break;case As.HTTP_ERROR:var n=s.getStatus();if(qs("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ms).indexOf(e)>=0?e:Ms.UNKNOWN}(r.status);o(new Fs(a,r.message))}else o(new Fs(Ms.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Fs(Ms.UNAVAILABLE,"Connection failed."));break;default:zs()}}finally{qs("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ss,i=Ti(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Pn.u)()||Object(Pn.x)()||Object(Pn.r)()||Object(Pn.t)()||Object(Pn.y)()||Object(Pn.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");qs("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new jd({Ei:function(t){c?qs("Connection","Not sending because WebChannel is closed:",t):(u||(qs("Connection","Opening WebChannel transport."),a.open(),u=!0),qs("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,Ps.EventType.OPEN,(function(){c||qs("Connection","WebChannel transport opened.")})),h(a,Ps.EventType.CLOSE,(function(){c||(c=!0,qs("Connection","WebChannel transport closed"),l.Vi())})),h(a,Ps.EventType.ERROR,(function(t){c||(c=!0,Hs("Connection","WebChannel transport errored:",t),l.Vi(new Fs(Ms.UNAVAILABLE,"The operation could not be completed")))})),h(a,Ps.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ws(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){qs("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Qu[t];if(void 0!==e)return tc(e)}(i),s=r.message;void 0===o&&(o=Ms.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Fs(o,s)),a.close()}else qs("Connection","WebChannel received:",n),l.Si(n)}})),h(i,Ns.STAT_EVENT,(function(t){10===t.stat?qs("Connection","Detected buffering proxy"):11===t.stat&&qs("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);qs("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return qs("RestConnection","Received: ",t),t}),(function(e){throw Hs("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.2",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ad[t]},t}());function Pd(){return"undefined"!=typeof window?window:null}function Dd(){return"undefined"!=typeof document?document:null}function Rd(t){return new Tc(t,!0)}var Ld=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&qs("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Md=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ld(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ms.RESOURCE_EXHAUSTED?(Bs(e.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Ms.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Fs(Ms.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(Rs.b)(t,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return qs("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(qs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Fd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Rs.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zs()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ws(void 0===e||"string"==typeof e),ca.fromBase64String(e||"")):(Ws(void 0===e||e instanceof Uint8Array),ca.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ms.UNKNOWN:tc(t.code);return new Fs(e,t.message||"")}(a);n=new _c(r,i,o,s||null)}else if("documentChange"in e){i=Rc(t,(r=e.documentChange).document.name),o=jc(r.document.updateTime);var a=new Na({mapValue:{fields:r.document.fields}}),u=(s=Da.newFoundDocument(i,o,a),r.targetIds||[]);n=new vc(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Rc(t,(r=e.documentDelete).document),o=r.readTime?jc(r.readTime):ta.min(),a=Da.newNoDocument(i,o),n=new vc([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Rc(t,(r=e.documentRemove).document),n=new vc([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return zs();var c=e.filter;i=new Ju(r=c.count||0),n=new bc(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ta.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ta.min():e.readTime?jc(e.readTime):ta.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Fc(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Va(r)?{documents:Kc(t,r)}:{query:zc(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=kc(t,e.resumeToken):e.snapshotVersion.compareTo(ta.min())>0&&(n.readTime=xc(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zs()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Fc(this.R),e.removeTarget=t,this.cr(e)},e}(Md),Vd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Rs.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Ws(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ws(void 0!==e),t.map((function(t){return function(t,e){var n=jc(t.updateTime?t.updateTime:e);return n.isEqual(ta.min())&&(n=jc(e)),new Du(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=jc(t.commitTime);return this.listener.Tr(n,e)}return Ws(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Fc(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Bc(e.R,t)}))};this.cr(n)},e}(Md),Ud=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Rs.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Fs(Ms.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw t.code===Ms.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw t.code===Ms.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Rr=!1},e}((function(){})),qd=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Bs(e),this.Vr=!1):qs("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Bd=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(Rs.b)(o,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){switch(t.label){case 0:return Zd(this)?(qs("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return(e=Gs(t)).$r.add(4),[4,Kd(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Hd(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new qd(n,r)};function Hd(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e,n;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:if(!Zd(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Kd(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e,n;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function zd(t,e){var n=Gs(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Yd(n)?$d(n):ff(n).er()&&Gd(n,e))}function Wd(t,e){var n=Gs(t),r=ff(n);n.Or.delete(e),r.er()&&Qd(n,e),0===n.Or.size&&(r.er()?r.ir():Zd(n)&&n.Br.set("Unknown"))}function Gd(t,e){t.qr.U(e.targetId),ff(t).mr(e)}function Qd(t,e){t.qr.U(e),ff(t).yr(e)}function $d(t){t.qr=new Cc({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),ff(t).start(),t.Br.Sr()}function Yd(t){return Zd(t)&&!ff(t).tr()&&t.Or.size>0}function Zd(t){return 0===Gs(t).$r.size}function Jd(t){t.qr=void 0}function Xd(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){return t.Or.forEach((function(e,n){Gd(t,e)})),[2]}))}))}function tf(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(n){return Jd(t),Yd(t)?(t.Br.Nr(e),$d(t)):t.Br.set("Unknown"),[2]}))}))}function ef(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i,o;return Object(Rs.d)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof _c&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Rs.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),qs("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,nf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof vc?t.qr.X(e):e instanceof bc?t.qr.rt(e):t.qr.et(e),n.isEqual(ta.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,$h(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(ca.EMPTY_BYTE_STRING,n.snapshotVersion)),Qd(t,e);var r=new ql(n.target,e,1,n.sequenceNumber);Gd(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return qs("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,nf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function nf(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r=this;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:if(!Nl(e))throw e;return t.$r.add(1),[4,Kd(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return $h(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(Rs.b)(r,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return qs("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Hd(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function rf(t,e){return e().catch((function(n){return nf(t,n,e)}))}function of(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(Rs.d)(this,(function(s){switch(s.label){case 0:e=Gs(t),n=pf(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Zd(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Jh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=pf(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,nf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return sf(e)&&af(e),[2]}}))}))}function sf(t){return Zd(t)&&!pf(t).tr()&&t.kr.length>0}function af(t){pf(t).start()}function uf(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){return pf(t).Ar(),[2]}))}))}function cf(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e,n,r;return Object(Rs.d)(this,(function(i){for(e=pf(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]}))}))}function lf(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Ul.from(r,e,n),[4,rf(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,of(t)];case 2:return o.sent(),[2]}}))}))}function hf(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return e&&pf(t).pr?[4,function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return Xu(r=e.code)&&r!==Ms.ABORTED?(n=t.kr.shift(),pf(t).sr(),[4,rf(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,of(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return sf(t)&&af(t),[2]}}))}))}function df(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return n=Gs(t),e?(n.$r.delete(2),[4,Hd(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Kd(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ff(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Gs(t);return r.br(),new Fd(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Xd.bind(null,t),Ri:tf.bind(null,t),_r:ef.bind(null,t)}),t.Mr.push((function(n){return Object(Rs.b)(e,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Yd(t)?$d(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Jd(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function pf(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Gs(t);return r.br(),new Vd(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:uf.bind(null,t),Ri:hf.bind(null,t),Ir:cf.bind(null,t),Tr:lf.bind(null,t)}),t.Mr.push((function(n){return Object(Rs.b)(e,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,of(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(qs("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var gf=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Il,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fs(Ms.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function yf(t,e){if(Bs("AsyncQueue",e+": "+t),Nl(t))return new Fs(Ms.UNAVAILABLE,e+": "+t);throw t}var mf=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ba.comparator(e.key,n.key)}:function(t,e){return ba.comparator(t.key,e.key)},this.keyedMap=cc(),this.sortedSet=new ec(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),vf=function(){function t(){this.Kr=new ec(ba.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):zs():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),bf=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,mf.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&du(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),_f=function(){this.Wr=void 0,this.listeners=[]},wf=function(){this.queries=new Th((function(t){return fu(t)}),du),this.onlineState="Unknown",this.Gr=new Set};function Cf(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(Rs.d)(this,(function(c){switch(c.label){case 0:if(n=Gs(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new _f),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=yf(a,"Initialization of query '"+pu(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&If(n),[2]}}))}))}function Of(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Rs.d)(this,(function(a){return n=Gs(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Ef(t,e){for(var n=Gs(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&If(n)}function Sf(t,e,n){var r=Gs(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function If(t){t.Gr.forEach((function(t){t.next()}))}var Tf=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new bf(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=bf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),xf=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),kf=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Rc(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?qc(this.R,t.document,!1):Da.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return jc(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new kf(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||fc()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return[4,od(this.localStore,new kf(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,sd(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new qh(Object.assign({},this.progress),t))]}}))}))}}();var Af=function(t){this.key=t},jf=function(t){this.key=t},Nf=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=fc(),this.mutatedKeys=fc(),this.lo=yu(t),this.fo=new mf(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new vf,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=iu(this.query)&&i.size===this.query.limit?i.last():null,c=ou(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=gu(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),iu(this.query)||ou(this.query))for(;s.size>this.query.limit;){var l=iu(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zs()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new bf(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new vf,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=fc(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new jf(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Af(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=fc();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return bf.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Pf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Df=function(t){this.key=t,this.bo=!1},Rf=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Th((function(t){return fu(t)}),du),this.Vo=new Map,this.So=new Set,this.Do=new ec(ba.comparator),this.Co=new Map,this.No=new ud,this.xo={},this.Fo=new Map,this.ko=gh.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Lf(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Rs.d)(this,(function(a){switch(a.label){case 0:return n=hp(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Xh(n.localStore,lu(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Mf(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&zd(n.remoteStore,o),a.label=4;case 4:return[2,r]}}))}))}function Mf(t,e,n,r){return Object(Rs.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(Rs.d)(this,(function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Rs.b)(this,void 0,void 0,(function(){var i,o,s;return Object(Rs.d)(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,ed(t.localStore,e.query,!1).then((function(t){return e.view._o(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Yf(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,ed(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Nf(e,i.Bn),s=o._o(i.documents),a=mc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Yf(t,n,u.To),c=new Pf(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Ff(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return n=Gs(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!du(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,td(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Wd(n.remoteStore,r.targetId),Qf(n,r.targetId)})).catch(_h)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Qf(n,r.targetId),[4,td(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Vf(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Rs.d)(this,(function(a){switch(a.label){case 0:r=dp(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Gs(t),i=Xs.now(),o=e.reduce((function(t,e){return t.add(e.key)}),fc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Uu(c,n.get(c.key));null!=l&&s.push(new Ku(c.key,l,Pa(l.toProto().mapValue),Ru.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ec(Ys)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Xf(r,i.changes)];case 3:return a.sent(),[4,of(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=yf(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Uf(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:n=Gs(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Yh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Ws(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ws(r.bo):t.removedDocuments.size>0&&(Ws(r.bo),r.bo=!1))})),[4,Xf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,_h(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function qf(t,e,n){var r=Gs(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Gs(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&If(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bf(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(Rs.d)(this,(function(c){switch(c.label){case 0:return(r=Gs(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new ec(ba.comparator)).insert(o,Da.newNoDocument(o,ta.min())),a=fc().add(o),u=new yc(ta.min(),new Map,new ic(Ys),s,a),[4,Uf(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Jf(r),[3,4];case 2:return[4,td(r.localStore,e,!1).then((function(){return Qf(r,e,n)})).catch(_h)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Hf(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:n=Gs(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Qh(n.localStore,e)];case 2:return i=o.sent(),Gf(n,r,null),Wf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Xf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,_h(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Kf(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:r=Gs(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Gs(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Ws(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Gf(r,e,n),Wf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Xf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,_h(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function zf(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(Rs.d)(this,(function(a){switch(a.label){case 0:Zd((n=Gs(t)).remoteStore)||qs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Gs(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=yf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Wf(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Gf(t,e,n){var r=Gs(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Qf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||$f(t,e)}))}function $f(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Wd(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Jf(t))}function Yf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Af?(t.No.addReference(o.key,e),Zf(t,o)):o instanceof jf?(qs("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||$f(t,o.key)):zs()}}function Zf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(qs("SyncEngine","New document in limbo: "+n),t.So.add(r),Jf(t))}function Jf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ba(oa.fromString(e)),r=t.ko.next();t.Co.set(r,new Df(n)),t.Do=t.Do.insert(n,r),zd(t.remoteStore,new ql(lu(ru(n.path)),r,2,Ls.o))}}function Xf(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(Rs.d)(this,(function(a){switch(a.label){case 0:return r=Gs(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.$o(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Hh.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(Rs.d)(this,(function(l){switch(l.label){case 0:n=Gs(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Tl.forEach(e,(function(e){return Tl.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Tl.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Nl(r=l.sent()))throw r;return qs("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function tp(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return(n=Gs(t)).currentUser.isEqual(e)?[3,3]:(qs("SyncEngine","User change. New user:",e.toKey()),[4,Gh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Fs(Ms.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Xf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ep(t,e){var n=Gs(t),r=n.Co.get(e);if(r&&r.bo)return fc().add(r.key);var i=fc(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function np(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return[4,ed((n=Gs(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Yf(n,e.targetId,i.To),i)]}}))}))}function rp(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){return[2,rd((e=Gs(t)).localStore).then((function(t){return Xf(e,t)}))]}))}))}function ip(t,e,n,r){return Object(Rs.b)(this,void 0,void 0,(function(){var i,o;return Object(Rs.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Gs(t),r=Gs(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Tl.resolve(null)}))}))}((i=Gs(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,of(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Gf(i,e,r||null),Wf(i,e),function(t,e){Gs(Gs(t)._n).Gt(e)}(i.localStore,e)):zs(),s.label=4;case 4:return[4,Xf(i,o)];case 5:return s.sent(),[3,7];case 6:qs("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function op(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(Rs.d)(this,(function(c){switch(c.label){case 0:return hp(n=Gs(t)),dp(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,sp(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,df(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)zd(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then((function(){return Qf(n,e),td(n.localStore,e,!0)})),Wd(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,sp(n,a)];case 5:return c.sent(),function(t){var e=Gs(t);e.Co.forEach((function(t,n){Wd(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new ec(ba.comparator)}(n),n.Oo=!1,[4,df(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function sp(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Rs.d)(this,(function(g){switch(g.label){case 0:n=Gs(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Xh(n.localStore,lu(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,np(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,nd(n.localStore,a)];case 8:return p=g.sent(),[4,Xh(n.localStore,p)];case 9:return u=g.sent(),[4,Mf(n,ap(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function ap(t){return nu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function up(t){var e=Gs(t);return Gs(Gs(e.localStore).persistence).fn()}function cp(t,e,n,r){return Object(Rs.b)(this,void 0,void 0,(function(){var i,o,s;return Object(Rs.d)(this,(function(a){switch(a.label){case 0:return(i=Gs(t)).Oo?(qs("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,rd(i.localStore)];case 3:return o=a.sent(),s=yc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Xf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,td(i.localStore,e,!0)];case 6:return a.sent(),Qf(i,e,r),[3,8];case 7:zs(),a.label=8;case 8:return[2]}}))}))}function lp(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(Rs.d)(this,(function(d){switch(d.label){case 0:if(!(r=hp(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(qs("SyncEngine","Adding an already active target "+s),[3,5]):[4,nd(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,Xh(r.localStore,a)];case 3:return u=d.sent(),[4,Mf(r,ap(a),u.targetId,!1)];case 4:d.sent(),zd(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,td(r.localStore,t,!1).then((function(){Wd(r.remoteStore,t),Qf(r,t)})).catch(_h)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function hp(t){var e=Gs(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ep.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bf.bind(null,e),e.vo._r=Ef.bind(null,e.eventManager),e.vo.Mo=Sf.bind(null,e.eventManager),e}function dp(t){var e=Gs(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kf.bind(null,e),e}var fp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return this.R=Rd(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Wh(this.persistence,new Kh,t.initialUser,this.R)},t.prototype.qo=function(t){return new pd(yd.bs,this.R)},t.prototype.Bo=function(t){return new Td},t.prototype.terminate=function(){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),pp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Rs.c)(e,t),e.prototype.initialize=function(e){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,id(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,dp(this.Ko.syncEngine)];case 4:return n.sent(),[4,of(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Wh(this.persistence,new Kh,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Oh(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Uh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ah.withCacheSize(this.cacheSizeBytes):ah.DEFAULT;return new Mh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Pd(),Dd(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Td},e}(fp),gp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Rs.c)(e,t),e.prototype.initialize=function(e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r=this;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Id?(this.sharedClientState.syncEngine={ui:ip.bind(null,n),ai:cp.bind(null,n),hi:lp.bind(null,n),fn:up.bind(null,n),ci:rp.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(Rs.b)(r,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return[4,op(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Pd();if(!Id.yt(e))throw new Fs(Ms.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Uh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Id(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(pp),yp=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n=this;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return qf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tp.bind(null,this.syncEngine),[4,df(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new wf},t.prototype.createDatastore=function(t){var e=Rd(t.databaseInfo.databaseId),n=new Nd(t.databaseInfo);return function(t,e,n){return new Ud(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return qf(s.syncEngine,t,0)},o=kd.yt()?new kd:new xd,new Bd(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Rf(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return e=Gs(t),qs("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Kd(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),mp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),vp=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Il,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new xf(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e,n=this;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Fs(Ms.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(Rs.d)(this,(function(u){switch(u.label){case 0:return n=Gs(t),r=Fc(n.R)+"/documents",i={documents:e.map((function(t){return Dc(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ws(!!e.found);var n=Rc(t,e.found.name),r=jc(e.found.updateTime),i=new Na({mapValue:{fields:e.found.fields}});return Da.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ws(!!e.missing),Ws(!!e.readTime);var n=Rc(t,e.missing),r=jc(e.readTime);return Da.newNoDocument(n,r)}(t,e):zs()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Ws(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Yu(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e=this;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ba.fromPath(n);e.mutations.push(new Zu(r,e.precondition(r)))})),[4,function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return n=Gs(t),r=Fc(n.R)+"/documents",i={writes:e.map((function(t){return Bc(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw zs();e=ta.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Fs(Ms.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ru.updateTime(e):Ru.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ta.min()))throw new Fs(Ms.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ru.updateTime(e)}return Ru.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),bp=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ld(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(Rs.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(Rs.d)(this,(function(r){return t=new vp(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ya(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Xu(e)}return!1},t}(),_p=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=md.UNAUTHENTICATED,this.clientId=$s.u(),this.credentialListener=function(){},this.receivedInitialUser=new Il,this.credentials.setChangeListener((function(t){qs("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Fs(Ms.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Il;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(Rs.b)(t,void 0,void 0,(function(){var t,n;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=yf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function wp(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),qs("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return Object(Rs.b)(i,void 0,void 0,(function(){return Object(Rs.d)(this,(function(t){switch(t.label){case 0:return[4,Gh(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Cp(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Op(t)];case 1:return n=i.sent(),qs("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return Object(Rs.b)(this,void 0,void 0,(function(){var n,r;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return(n=Gs(t)).asyncQueue.verifyOperationInProgress(),qs("RemoteStore","RemoteStore received new credentials"),r=Zd(n),n.$r.add(3),[4,Kd(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Hd(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function Op(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(qs("FirestoreClient","Using default OfflineComponentProvider"),[4,wp(t,new fp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Ep(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(qs("FirestoreClient","Using default OnlineComponentProvider"),[4,Cp(t,new yp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Sp(t){return Op(t).then((function(t){return t.persistence}))}function Ip(t){return Op(t).then((function(t){return t.localStore}))}function Tp(t){return Ep(t).then((function(t){return t.remoteStore}))}function xp(t){return Ep(t).then((function(t){return t.syncEngine}))}function kp(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e,n;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return[4,Ep(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Lf.bind(null,e.syncEngine),n.onUnlisten=Ff.bind(null,e.syncEngine),n)]}}))}))}function Ap(t,e,n){var r=this;void 0===n&&(n={});var i=new Il;return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(r,void 0,void 0,(function(){var r;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new mp({next:function(o){e.enqueueAndForget((function(){return Of(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Fs(Ms.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Fs(Ms.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Tf(ru(n.path),o,{includeMetadataChanges:!0,so:!0});return Cf(t,s)},[4,kp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function jp(t,e,n){var r=this;void 0===n&&(n={});var i=new Il;return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(r,void 0,void 0,(function(){var r;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new mp({next:function(n){e.enqueueAndForget((function(){return Of(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Fs(Ms.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Tf(n,o,{includeMetadataChanges:!0,so:!0});return Cf(t,s)},[4,kp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Np=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Pp=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Dp=new Map,Rp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Lp=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(md.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mp=function(){function t(t){var e=this;this.oc=null,this.currentUser=md.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(qs("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ws("string"==typeof n.accessToken),new Rp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Ws(null===t||"string"==typeof t),new md(t)},t}(),Fp=function(){function t(t,e){this.ac=t,this.hc=e,this.type="FirstParty",this.user=md.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Vp=function(){function t(t,e){this.ac=t,this.hc=e}return t.prototype.getToken=function(){return Promise.resolve(new Fp(this.ac,this.hc))},t.prototype.setChangeListener=function(t){t(md.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Up(t,e,n){if(!n)throw new Fs(Ms.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function qp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Bp(t,e,n,r){if(!0===e&&!0===r)throw new Fs(Ms.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Hp(t){if(!ba.isDocumentKey(t))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Kp(t){if(ba.isDocumentKey(t))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function zp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":zs()}function Wp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Fs(Ms.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=zp(t);throw new Fs(Ms.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Gp(t,e){if(e<=0)throw new Fs(Ms.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Qp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Fs(Ms.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Fs(Ms.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Bp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),$p=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Qp({}),this._settingsFrozen=!1,t instanceof Pp?(this._databaseId=t,this._credentials=new Lp):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Fs(Ms.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pp(t.options.projectId)}(t),this._credentials=new Mp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Fs(Ms.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Fs(Ms.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qp(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Lp;switch(t.type){case"gapi":var e=t.client;return Ws(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Vp(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Fs(Ms.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Dp.get(this))&&(qs("ComponentProvider","Removing Datastore"),Dp.delete(this),t.terminate()),Promise.resolve();var t},t}(),Yp=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Jp(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Zp=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Jp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ru(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Rs.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Yp(this.firestore,null,new ba(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Zp);function Xp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Pn.m)(t),Up("collection","path",e),t instanceof $p)return Kp(n=oa.fromString.apply(oa,Object(Rs.f)([e],r))),new Jp(t,null,n);if(!(t instanceof Yp||t instanceof Jp))throw new Fs(Ms.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kp(n=oa.fromString.apply(oa,Object(Rs.f)([t.path],r)).child(oa.fromString(e))),new Jp(t.firestore,null,n)}function tg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Pn.m)(t),1===arguments.length&&(e=$s.u()),Up("doc","path",e),t instanceof $p)return Hp(n=oa.fromString.apply(oa,Object(Rs.f)([e],r))),new Yp(t,null,new ba(n));if(!(t instanceof Yp||t instanceof Jp))throw new Fs(Ms.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Hp(n=t._path.child(oa.fromString.apply(oa,Object(Rs.f)([e],r)))),new Yp(t.firestore,t instanceof Jp?t._converter:null,new ba(n))}function eg(t,e){return t=Object(Pn.m)(t),e=Object(Pn.m)(e),(t instanceof Yp||t instanceof Jp)&&(e instanceof Yp||e instanceof Jp)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function ng(t,e){return t=Object(Pn.m)(t),e=Object(Pn.m)(e),t instanceof Zp&&e instanceof Zp&&t.firestore===e.firestore&&du(t._query,e._query)&&t._converter===e._converter}var rg=function(){function t(){var t=this;this.lc=Promise.resolve(),this.fc=[],this.dc=!1,this.wc=[],this._c=null,this.mc=!1,this.yc=[],this.Zi=new Ld(this,"async_queue_retry"),this.gc=function(){var e=Dd();e&&qs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Dd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.dc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ec(),this.Tc(t)},t.prototype.enterRestrictedMode=function(){if(!this.dc){this.dc=!0;var t=Dd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gc)}},t.prototype.enqueue=function(t){return this.Ec(),this.dc?new Promise((function(t){})):this.Tc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.fc.push(t),e.Ic()}))},t.prototype.Ic=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t,e=this;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:if(0===this.fc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fc[0]()];case 2:return n.sent(),this.fc.shift(),this.Zi.reset(),[3,4];case 3:if(!Nl(t=n.sent()))throw t;return qs("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.fc.length>0&&this.Zi.ji((function(){return e.Ic()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Tc=function(t){var e=this,n=this.lc.then((function(){return e.mc=!0,t().catch((function(t){throw e._c=t,e.mc=!1,Bs("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.mc=!1,t}))}));return this.lc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ec(),this.yc.indexOf(t)>-1&&(e=0);var i=gf.createAndSchedule(this,t,e,n,(function(t){return r.Ac(t)}));return this.wc.push(i),i},t.prototype.Ec=function(){this._c&&zs()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Rc=function(){return Object(Rs.b)(this,void 0,void 0,(function(){var t;return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.lc];case 1:e.sent(),e.label=2;case 2:if(t!==this.lc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.bc=function(t){for(var e=0,n=this.wc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.vc=function(t){var e=this;return this.Rc().then((function(){e.wc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.wc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Rc()}))},t.prototype.Pc=function(t){this.yc.push(t)},t.prototype.Ac=function(t){var e=this.wc.indexOf(t);this.wc.splice(e,1)},t}();function ig(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Il,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var og=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new rg,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Rs.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||ag(this),this._firestoreClient.terminate()},e}($p);function sg(t){return t._firestoreClient||ag(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ag(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Np(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new _p(t._credentials,t._queue,r)}function ug(t,e,n){var r=this,i=new Il;return t.asyncQueue.enqueue((function(){return Object(Rs.b)(r,void 0,void 0,(function(){var r;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,wp(t,n)];case 1:return o.sent(),[4,Cp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ms.FAILED_PRECONDITION||t.code===Ms.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function cg(t){if(t._initialized||t._terminated)throw new Fs(Ms.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var lg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new aa(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),hg=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ca.fromBase64String(e))}catch(e){throw new Fs(Ms.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ca.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),dg=function(t){this._methodName=t},fg=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Fs(Ms.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Fs(Ms.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ys(this._lat,t._lat)||Ys(this._long,t._long)},t}(),pg=/^__.*__$/,gg=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ku(t,this.data,this.fieldMask,e,this.fieldTransforms):new Hu(t,this.data,e,this.fieldTransforms)},t}(),yg=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ku(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function mg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zs()}}var vg=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Vc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Sc",{get:function(){return this.settings.Sc},enumerable:!1,configurable:!0}),t.prototype.Dc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Cc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.xc(t),r},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.Vc(),r},t.prototype.kc=function(t){return this.Dc({path:void 0,Nc:!0})},t.prototype.Oc=function(t){return Fg(t,this.settings.methodName,this.settings.$c||!1,this.path,this.settings.Mc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Vc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.xc(this.path.get(t))},t.prototype.xc=function(t){if(0===t.length)throw this.Oc("Document fields must not be empty");if(mg(this.Sc)&&pg.test(t))throw this.Oc('Document fields cannot begin and end with "__"')},t}(),bg=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Rd(t)}return t.prototype.Lc=function(t,e,n,r){return void 0===r&&(r=!1),new vg({Sc:t,methodName:e,Mc:n,path:aa.emptyPath(),Nc:!1,$c:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function _g(t){var e=t._freezeSettings(),n=Rd(t._databaseId);return new bg(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wg(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Lc(o.merge||o.mergeFields?2:0,e,n,i);Dg("Data must be an object, but it was:",s,r);var a,u,c=Ng(r,s);if(o.merge)a=new ua(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Rg(e,d[h],n);if(!s.contains(f))throw new Fs(Ms.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Vg(l,f)||l.push(f)}a=new ua(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new gg(new Na(c),a,u)}var Cg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Sc)throw t.Oc(1===t.Sc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(dg);function Og(t,e,n){return new vg({Sc:3,Mc:e.settings.Mc,methodName:t._methodName,Nc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Eg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e.prototype._toFieldTransform=function(t){return new Pu(t.path,new Su)},e.prototype.isEqual=function(t){return t instanceof e},e}(dg),Sg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return Object(Rs.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Og(this,t,!0),n=this.Bc.map((function(t){return jg(t,e)})),r=new Iu(n);return new Pu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(dg),Ig=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return Object(Rs.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Og(this,t,!0),n=this.Bc.map((function(t){return jg(t,e)})),r=new xu(n);return new Pu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(dg),Tg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Rs.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Au(t.R,_u(t.R,this.qc));return new Pu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(dg);function xg(t,e,n,r){var i=t.Lc(1,e,n);Dg("Data must be an object, but it was:",i,r);var o=[],s=Na.empty();na(r,(function(t,r){var a=Mg(e,t,n);r=Object(Pn.m)(r);var u=i.Fc(a);if(r instanceof Cg)o.push(a);else{var c=jg(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new ua(o);return new yg(s,a,i.fieldTransforms)}function kg(t,e,n,r,i,o){var s=t.Lc(1,e,n),a=[Rg(e,r,n)],u=[i];if(o.length%2!=0)throw new Fs(Ms.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Rg(e,o[c])),u.push(o[c+1]);for(var l=[],h=Na.empty(),d=a.length-1;d>=0;--d)if(!Vg(l,a[d])){var f=a[d],p=u[d];p=Object(Pn.m)(p);var g=s.Fc(f);if(p instanceof Cg)l.push(f);else{var y=jg(p,g);null!=y&&(l.push(f),h.set(f,y))}}var m=new ua(l);return new yg(h,m,s.fieldTransforms)}function Ag(t,e,n,r){return void 0===r&&(r=!1),jg(n,t.Lc(r?4:3,e))}function jg(t,e){if(Pg(t=Object(Pn.m)(t)))return Dg("Unsupported field value:",e,t),Ng(t,e);if(t instanceof dg)return function(t,e){if(!mg(e.Sc))throw e.Oc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Oc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nc&&4!==e.Sc)throw e.Oc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=jg(o[i],e.kc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Pn.m)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _u(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xs.fromDate(t);return{timestampValue:xc(e.R,n)}}if(t instanceof Xs)return n=new Xs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:xc(e.R,n)};if(t instanceof fg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hg)return{bytesValue:kc(e.R,t._byteString)};if(t instanceof Yp){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Oc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Nc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Oc("Unsupported field value: "+zp(t))}(t,e)}function Ng(t,e){var n={};return ra(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(t,(function(t,r){var i=jg(r,e.Cc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Pg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xs||t instanceof fg||t instanceof hg||t instanceof Yp||t instanceof dg)}function Dg(t,e,n){if(!Pg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=zp(n);throw e.Oc("an object"===r?t+" a custom object":t+" "+r)}}function Rg(t,e,n){if((e=Object(Pn.m)(e))instanceof lg)return e._internalPath;if("string"==typeof e)return Mg(t,e);throw Fg("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Lg=new RegExp("[~\\*/\\[\\]]");function Mg(t,e,n){if(e.search(Lg)>=0)throw Fg("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(lg.bind.apply(lg,Object(Rs.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Fg("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Fg(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Fs(Ms.INVALID_ARGUMENT,(a+=". ")+t+u)}function Vg(t,e){return t.some((function(t){return t.isEqual(e)}))}var Ug=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Yp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Bg("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),qg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ug);function Bg(t,e){return"string"==typeof e?Mg(t,e):e instanceof lg?e._internalPath:e._delegate._internalPath}var Hg=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Kg=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Rs.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Bg("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ug),zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Kg),Wg=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Hg(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new zg(n._firestore,n._userDataWriter,r.key,r,new Hg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fs(Ms.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new zg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Hg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new zg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Hg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Gg(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Gg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zs()}}function Qg(t,e){return t instanceof Kg&&e instanceof Kg?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wg&&e instanceof Wg&&t._firestore===e._firestore&&ng(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function $g(t){if(ou(t)&&0===t.explicitOrderBy.length)throw new Fs(Ms.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yg=function(){};function Zg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Jg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Uc=e,i.Qc=n,i.Kc=r,i.type="where",i}return Object(Rs.c)(e,t),e.prototype._apply=function(t){var e=_g(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){oy(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(iy(r,t,l[c]));a={arrayValue:{values:u}}}else a=iy(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||oy(s,o),a=Ag(n,"where",s,"in"===o||"not-in"===o);var h=Ua.create(i,o,a);return function(t,e){if(e.g()){var n=au(t);if(null!==n&&!n.isEqual(e.field))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=su(t);null!==r&&sy(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Fs(Ms.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Uc,this.Qc,this.Kc);return new Zp(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Yg),Xg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Uc=e,r.jc=n,r.type="orderBy",r}return Object(Rs.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Za(e,n);return function(t,e){if(null===su(t)){var n=au(t);null!==n&&sy(0,n,e.field)}}(t,r),r}(t._query,this.Uc,this.jc);return new Zp(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new eu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Yg),ty=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Wc=n,i.Gc=r,i}return Object(Rs.c)(e,t),e.prototype._apply=function(t){return new Zp(t.firestore,t._converter,hu(t._query,this.Wc,this.Gc))},e}(Yg),ey=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return Object(Rs.c)(e,t),e.prototype._apply=function(t){var e=ry(t,this.type,this.zc,this.Hc);return new Zp(t.firestore,t._converter,function(t,e){return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Yg),ny=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return Object(Rs.c)(e,t),e.prototype._apply=function(t){var e=ry(t,this.type,this.zc,this.Hc);return new Zp(t.firestore,t._converter,function(t,e){return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Yg);function ry(t,e,n,r){if(n[0]=Object(Pn.m)(n[0]),n[0]instanceof Ug)return function(t,e,n,r,i){if(!r)throw new Fs(Ms.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=cu(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Ia(e,r.key));else{var c=r.data.field(u.field);if(pa(c))throw new Fs(Ms.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new $a(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=_g(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Fs(Ms.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!uu(t)&&-1!==c.indexOf("/"))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(oa.fromString(c));if(!ba.isDocumentKey(l))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ba(l);a.push(Ia(e,h))}else{var d=Ag(n,r,c);a.push(d)}}return new $a(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function iy(t,e,n){if("string"==typeof(n=Object(Pn.m)(n))){if(""===n)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!uu(e)&&-1!==n.indexOf("/"))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(oa.fromString(n));if(!ba.isDocumentKey(r))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ia(t,new ba(r))}if(n instanceof Yp)return Ia(t,n._key);throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+zp(n)+".")}function oy(t,e){if(!Array.isArray(t)||0===t.length)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function sy(t,e,n){if(!n.isEqual(e))throw new Fs(Ms.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ay=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),_a(t)){case 0:return null;case 1:return t.booleanValue;case 2:return da(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(fa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zs()}},t.prototype.convertObject=function(t,e){var n=this,r={};return na(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new fg(da(t.latitude),da(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return pa(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ga(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ha(t);return new Xs(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=oa.fromString(t);Ws(nl(n));var r=new Pp(n.get(1),n.get(3)),i=new ba(n.popFirst(5));return r.isEqual(e)||Bs("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function uy(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var cy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Rs.c)(e,t),e.prototype.convertBytes=function(t){return new hg(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Yp(this.firestore,null,e)},e}(ay),ly=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=_g(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=hy(t,this._firestore),i=uy(r._converter,e,n),o=wg(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Ru.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=hy(t,this._firestore);return o="string"==typeof(e=Object(Pn.m)(e))||e instanceof lg?kg(this._dataReader,"WriteBatch.update",s._key,e,n,r):xg(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ru.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=hy(t,this._firestore);return this._mutations=this._mutations.concat(new Yu(e._key,Ru.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Fs(Ms.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function hy(t,e){if((t=Object(Pn.m)(t)).firestore!==e)throw new Fs(Ms.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var dy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Rs.c)(e,t),e.prototype.convertBytes=function(t){return new hg(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Yp(this.firestore,null,e)},e}(ay);function fy(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Wp(t,Yp);var o=Wp(t.firestore,og),s=_g(o);return gy(o,[("string"==typeof(e=Object(Pn.m)(e))||e instanceof lg?kg(s,"updateDoc",t._key,e,n,r):xg(s,"updateDoc",t._key,e)).toMutation(t._key,Ru.exists(!0))])}function py(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Pn.m)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ig(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(ig(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Yp)c=Wp(t.firestore,og),l=ru(t._key.path),u={next:function(e){i[a]&&i[a](yy(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Wp(t,Zp);c=Wp(f.firestore,og),l=f._query;var p=new dy(c);u={next:function(t){i[a]&&i[a](new Wg(c,p,f,t))},error:i[a+1],complete:i[a+2]},$g(t._query)}return function(t,e,n,r){var i=this,o=new mp(r),s=new Tf(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(i,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return e=Cf,[4,kp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(i,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return e=Of,[4,kp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(sg(c),l,h,u)}function gy(t,e){return function(t,e){var n=this,r=new Il;return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(n,void 0,void 0,(function(){var n;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return n=Vf,[4,xp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(sg(t),e)}function yy(t,e,n){var r=n.docs.get(e._key),i=new dy(t);return new Kg(t,i,e._key,r,new Hg(n.hasPendingWrites,n.fromCache),e._converter)}var my=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Rs.c)(e,t),e.prototype.get=function(e){var n=this,r=hy(e,this._firestore),i=new dy(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Kg(n._firestore,i,r._key,t._document,new Hg(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=_g(t)}return t.prototype.get=function(t){var e=this,n=hy(t,this._firestore),r=new cy(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return zs();var i=t[0];if(i.isFoundDocument())return new Ug(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Ug(e._firestore,r,n._key,null,n._converter);throw zs()}))},t.prototype.set=function(t,e,n){var r=hy(t,this._firestore),i=uy(r._converter,e,n),o=wg(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=hy(t,this._firestore);return o="string"==typeof(e=Object(Pn.m)(e))||e instanceof lg?kg(this._dataReader,"Transaction.update",s._key,e,n,r):xg(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=hy(t,this._firestore);return this._transaction.delete(e._key),this},t}());function vy(){if("undefined"==typeof Uint8Array)throw new Fs(Ms.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function by(){if("undefined"==typeof atob)throw new Fs(Ms.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var _y=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return by(),new t(hg.fromBase64String(e))},t.fromUint8Array=function(e){return vy(),new t(hg.fromUint8Array(e))},t.prototype.toBase64=function(){return by(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return vy(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),wy=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){cg(t=Wp(t,og));var n=sg(t),r=t._freezeSettings(),i=new yp;return ug(n,i,new pp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){cg(t=Wp(t,og));var e=sg(t),n=t._freezeSettings(),r=new yp;return ug(e,r,new gp(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Fs(Ms.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Il;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(Rs.b)(e,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Rs.b)(this,void 0,void 0,(function(){return Object(Rs.d)(this,(function(e){switch(e.label){case 0:return kl.yt()?[4,kl.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Uh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Cy=function(){function t(t,e,n){var r=this;this._delegate=e,this.Jc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Pp||(this.Yc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Wp(t,$p))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Hs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(Rs.b)(e,void 0,void 0,(function(){var e,n;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return[4,Sp(t)];case 1:return e=r.sent(),[4,Tp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Gs(t);return e.$r.delete(0),Hd(e)}(n))]}}))}))}))}(sg(Wp(this._delegate,og)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(Rs.b)(e,void 0,void 0,(function(){var e,n;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return[4,Sp(t)];case 1:return e=r.sent(),[4,Tp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Rs.b)(this,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return(e=Gs(t)).$r.add(0),[4,Kd(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(sg(Wp(this._delegate,og)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Bp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Jc.enableMultiTabIndexedDbPersistence(this):this.Jc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Jc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Yc&&(this.Yc._removeServiceInstance("firestore"),this.Yc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Il;return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(e,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(r){switch(r.label){case 0:return e=zf,[4,xp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(sg(Wp(this._delegate,og)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new mp(e);return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(n,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Gs(t).Gr.add(e),e.next()},[4,kp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(n,void 0,void 0,(function(){var e;return Object(Rs.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Gs(t).Gr.delete(e)},[4,kp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(sg(t=Wp(t,og)),ig(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yc)throw new Fs(Ms.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ly(this,Xp(this._delegate,t))}catch(t){throw xy(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ty(this,tg(this._delegate,t))}catch(t){throw xy(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Py(this,function(t,e){if(t=Wp(t,$p),Up("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Zp(t,null,function(t){return new eu(oa.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw xy(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Il;return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(n,void 0,void 0,(function(){var n;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Ep(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new bp(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(sg(t),(function(n){return e(new my(t,n))}))}(this._delegate,(function(n){return t(new Ey(e,n))}))},t.prototype.batch=function(){var t=this;return sg(this._delegate),new Sy(new ly(this._delegate,(function(e){return gy(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Fs(Ms.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Fs(Ms.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Oy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Rs.c)(e,t),e.prototype.convertBytes=function(t){return new _y(new hg(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ty.Xc(e,this.firestore,null)},e}(ay),Ey=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Oy(t)}return t.prototype.get=function(t){var e=this,n=My(t);return this._delegate.get(n).then((function(t){return new jy(e._firestore,new Kg(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=My(t);return n?(qp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=My(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Rs.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=My(t);return this._delegate.delete(e),this},t}(),Sy=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=My(t);return n?(qp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=My(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Rs.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=My(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Iy=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new zg(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ny(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.Zc=function(e,n){var r=t.tu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Oy(e),n),i.set(n,o)),o},t}();Iy.tu=new WeakMap;var Ty=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Oy(t)}return t.eu=function(e,n,r){if(e.length%2!=0)throw new Fs(Ms.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Yp(n._delegate,r,new ba(e)))},t.Xc=function(e,n,r){return new t(n,new Yp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ly(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ly(this.firestore,Xp(this._delegate,t))}catch(t){throw xy(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Pn.m)(t))instanceof Yp&&eg(this._delegate,t)},t.prototype.set=function(t,e){e=qp("DocumentReference.set",e);try{return function(t,e,n){t=Wp(t,Yp);var r=Wp(t.firestore,og),i=uy(t._converter,e,n);return gy(r,[wg(_g(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Ru.none())])}(this._delegate,t,e)}catch(t){throw xy(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?fy(this._delegate,t):fy.apply(void 0,Object(Rs.f)([this._delegate,t,e],n))}catch(t){throw xy(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return gy(Wp((t=this._delegate).firestore,og),[new Yu(t._key,Ru.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ky(e),i=Ay(e,(function(e){return new jy(t.firestore,new Kg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return py(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Wp(t,Yp);var e=Wp(t.firestore,og),n=sg(e),r=new dy(e);return function(t,e){var n=this,r=new Il;return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(n,void 0,void 0,(function(){var n;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i;return Object(Rs.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Gs(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Fs(Ms.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=yf(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Ip(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Kg(e,r,t._key,n,new Hg(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Wp(t,Yp);var e=Wp(t.firestore,og);return Ap(sg(e),t._key,{source:"server"}).then((function(n){return yy(e,t,n)}))}(this._delegate):function(t){t=Wp(t,Yp);var e=Wp(t.firestore,og);return Ap(sg(e),t._key).then((function(n){return yy(e,t,n)}))}(this._delegate)).then((function(t){return new jy(e.firestore,new Kg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Iy.Zc(this.firestore,e):null))},t}();function xy(t,e,n){return t.message=t.message.replace(e,n),t}function ky(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ig(r))return r}return{}}function Ay(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ig(t[0])?t[0]:ig(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var jy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ty(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Qg(this._delegate,t._delegate)},t}(),Ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Rs.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(jy),Py=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Oy(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Zg(this._delegate,function(t,e,n){var r=e,i=Bg("where",t);return new Jg(i,r,n)}(e,n,r)))}catch(e){throw xy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Zg(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Bg("orderBy",t);return new Xg(r,n)}(e,n)))}catch(e){throw xy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Zg(this._delegate,function(t){return Gp("limit",t),new ty("limit",t,"F")}(e)))}catch(e){throw xy(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Zg(this._delegate,function(t){return Gp("limitToLast",t),new ty("limitToLast",t,"L")}(e)))}catch(e){throw xy(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ey("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw xy(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ey("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw xy(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ny("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw xy(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ny("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw xy(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ng(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Wp(t,Zp);var e=Wp(t.firestore,og),n=sg(e),r=new dy(e);return function(t,e){var n=this,r=new Il;return t.asyncQueue.enqueueAndForget((function(){return Object(Rs.b)(n,void 0,void 0,(function(){var n;return Object(Rs.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Rs.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(Rs.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ed(t,e,!0)];case 1:return a=u.sent(),r=new Nf(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=yf(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Ip(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Wg(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Wp(t,Zp);var e=Wp(t.firestore,og),n=sg(e),r=new dy(e);return jp(n,t._query,{source:"server"}).then((function(n){return new Wg(e,r,t,n)}))}(this._delegate):function(t){t=Wp(t,Zp);var e=Wp(t.firestore,og),n=sg(e),r=new dy(e);return $g(t._query),jp(n,t._query).then((function(n){return new Wg(e,r,t,n)}))}(this._delegate)).then((function(t){return new Ry(e.firestore,new Wg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ky(e),i=Ay(e,(function(e){return new Ry(t.firestore,new Wg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return py(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Iy.Zc(this.firestore,e):null))},t}(),Dy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Ny(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Ry=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Py(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Ny(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Dy(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Ny(n._firestore,r))}))},t.prototype.isEqual=function(t){return Qg(this._delegate,t._delegate)},t}(),Ly=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Rs.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ty(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ty(this.firestore,void 0===t?tg(this._delegate):tg(this._delegate,t))}catch(t){throw xy(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Wp(t.firestore,og),r=tg(t),i=uy(t._converter,e);return gy(n,[wg(_g(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Ru.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Ty(e.firestore,t)}))},e.prototype.isEqual=function(t){return eg(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Iy.Zc(this.firestore,t):null))},e}(Py);function My(t){return Wp(t,Yp)}var Fy,Vy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(lg.bind.apply(lg,Object(Rs.f)([void 0],t)))}return t.documentId=function(){return new t(aa.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Pn.m)(t))instanceof lg&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Uy=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Eg("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Cg("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sg("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ig("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Tg("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),qy=n("/6Yf"),By={Firestore:Cy,GeoPoint:fg,Timestamp:Xs,Blob:_y,Transaction:Ey,WriteBatch:Sy,DocumentReference:Ty,DocumentSnapshot:jy,Query:Py,QueryDocumentSnapshot:Ny,QuerySnapshot:Ry,CollectionReference:Ly,FieldPath:Vy,FieldValue:Uy,setLogLevel:function(t){Vs.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new qy.a("firestore",(function(t){return function(t,e){return new Cy(t,new og(t,e),new wy)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},By)))})(Fy=Nn.a),Fy.registerVersion("@firebase/firestore","2.2.2");var Hy=n("XNiG"),Ky=n("VRyK"),zy=n("zx2A");function Wy(t,e){return"function"==typeof e?n=>n.pipe(Wy((n,r)=>Object(zt.a)(t(n,r)).pipe(Object(Ht.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Gy(t))}class Gy{constructor(t){this.project=t}call(t,e){return e.subscribe(new Qy(t,this.project))}}class Qy extends zy.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new zy.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(zy.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}n("qgXg");var $y=n("quSY"),Yy=n("9ppp");n("Ylt2");const Zy=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Jy=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Xy=n("EY2u");function tm(t){return e=>0===t?Object(Xy.b)():e.lift(new em(t))}class em{constructor(t){if(this.total=t,this.total<0)throw new Jy}call(t,e){return e.subscribe(new nm(t,this.total))}}class nm extends yn.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function rm(t=null){return e=>e.lift(new im(t))}class im{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new om(t,this.defaultValue))}}class om extends yn.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function sm(t=cm){return e=>e.lift(new am(t))}class am{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new um(t,this.errorFactory))}}class um extends yn.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Fy){t=Fy}this.destination.error(t)}}}function cm(){return new Zy}var lm=n("SpAZ");function hm(t,e){const n=arguments.length>=2;return r=>r.pipe(t?In((e,n)=>t(e,n,r)):lm.a,tm(1),n?rm(e):sm(()=>new Zy))}n("tf+s");const dm=new r.q("angularfire2.auth.use-emulator");function fm(t,e){return function(t,e=cn.a){return new qt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function pm(t,e){return fm(t,e).pipe(Object(Ht.a)(t=>({payload:t,type:"query"})))}function gm(t,e){return pm(t,e).pipe(gn(void 0),mn(),Object(Ht.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function ym(t,e,n){return gm(t,n).pipe(_n((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return mm(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return mm(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mm(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),On(),Object(Ht.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function mm(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function vm(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class bm{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=gm(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(gn(void 0),mn(),In(([t,e])=>e.length>0||!t),Object(Ht.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(_n((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=vm(t);return ym(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return pm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(zt.a)(this.query.get(t)).pipe(Object(kn.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new _m(this.ref.doc(t),this.afs)}}class _m{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Im(n,e);return new bm(r,i,this.afs)}snapshotChanges(){return fm(this.ref,this.afs.schedulers.outsideAngular).pipe(gn(void 0),mn(),Object(Ht.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ht.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(zt.a)(this.ref.get(t)).pipe(Object(kn.b)(this.afs.schedulers.insideAngular))}}class wm{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?gm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),In(t=>t.length>0),this.afs.keepUnstableUntilFirst):gm(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(_n((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=vm(t);return ym(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return pm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(zt.a)(this.query.get(t)).pipe(Object(kn.b)(this.afs.schedulers.insideAngular))}}const Cm=new r.q("angularfire2.enableFirestorePersistence"),Om=new r.q("angularfire2.firestore.persistenceSettings"),Em=new r.q("angularfire2.firestore.settings"),Sm=new r.q("angularfire2.firestore.use-emulator");function Im(t,e=(t=>t)){return{query:e(t),ref:t}}let Tm=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new An.d(o),this.keepUnstableUntilFirst=Object(An.h)(this.schedulers);const c=Object(An.g)(t,o,e);!jn.a.auth&&u&&Object(An.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(An.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return Object(zt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Fy){return"undefined"!=typeof console&&console.warn(Fy),Object(ln.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ln.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Im(n,e),o=this.schedulers.ngZone.run(()=>r);return new bm(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new wm(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new _m(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(An.c),r.Pb(An.b,8),r.Pb(Cm,8),r.Pb(Em,8),r.Pb(r.B),r.Pb(r.z),r.Pb(Om,8),r.Pb(Sm,8),r.Pb(dm,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(An.c),Object(r.Pb)(An.b,8),Object(r.Pb)(Cm,8),Object(r.Pb)(Em,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(Om,8),Object(r.Pb)(Sm,8),Object(r.Pb)(dm,8))},token:t,providedIn:"any"}),t})(),xm=(()=>{class t{constructor(t){this.firestore=t,this.collectionName="worksheet-data"}getUser(t,e){return this.firestore.collection("auth",n=>n.where("user","==",t).where("pwd","==",e)).snapshotChanges()}getWeeks(){return this.firestore.collection("weeks").snapshotChanges()}getWorksheetsData(t){return this.firestore.collection(this.collectionName,e=>e.where("week","==",t)).snapshotChanges()}saveWorksheetData(t){return this.firestore.collection(this.collectionName).add(t)}updateWorksheetData(t){const e=t.id;return delete t.id,this.firestore.doc(this.collectionName+"/"+e).update(t)}getSingleWorksheetData(t,e,n){return this.firestore.collection(this.collectionName,r=>r.where("week","==",t).where("class","==",e).where("section","==",n)).snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Tm))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class km extends Hy.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Yy.a;return this._value}next(t){super.next(this._value=t)}}class Am extends yn.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class jm extends yn.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Nm=n("SeVD");function Pm(t,e,n,r,i=new jm(t,n,r)){if(!i.closed)return e instanceof qt.a?e.subscribe(i):Object(Nm.a)(e)(i)}var Dm=n("yCtX");const Rm={};class Lm{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Mm(t,this.resultSelector))}}class Mm extends Am{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Rm),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Pm(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Rm?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Fm(t){return new qt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(zt.a)(n):Object(Xy.b)()).subscribe(e)})}function Vm(t){return function(e){return 0===t?Object(Xy.b)():e.lift(new Um(t))}}class Um{constructor(t){if(this.total=t,this.total<0)throw new Jy}call(t,e){return e.subscribe(new qm(t,this.total))}}class qm extends yn.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Bm(t){return function(e){const n=new Hm(t),r=e.lift(n);return n.caught=r}}class Hm{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Km(t,this.selector,this.caught))}}class Km extends zy.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new zy.a(this);this.add(r);const i=Object(zy.c)(n,r);i!==r&&this.add(i)}}}var zm=n("5+tZ");function Wm(t,e){return Object(zm.a)(t,e,1)}var Gm=n("vkgz");class Qm{constructor(t){this.callback=t}call(t,e){return e.subscribe(new $m(t,this.callback))}}class $m extends yn.a{constructor(t,e){super(t),this.add(new $y.a(e))}}class Ym{constructor(t,e){this.id=t,this.url=e}}class Zm extends Ym{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jm extends Ym{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xm extends Ym{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tv extends Ym{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ev extends Ym{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nv extends Ym{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rv extends Ym{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class iv extends Ym{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ov extends Ym{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sv{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class av{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uv{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cv{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lv{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hv{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dv{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const fv="primary";class pv{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function gv(t){return new pv(t)}function yv(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function mv(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function vv(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!bv(t[i],e[i]))return!1;return!0}function bv(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function _v(t){return Array.prototype.concat.apply([],t)}function wv(t){return t.length>0?t[t.length-1]:null}function Cv(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ov(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(zt.a)(Promise.resolve(t)):Object(ln.a)(t)}function Ev(t,e,n){return n?function(t,e){return vv(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!xv(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>bv(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!xv(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!xv(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!xv(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class Sv{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gv(this.queryParams)),this._queryParamMap}toString(){return Nv.serialize(this)}}class Iv{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Cv(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pv(this)}}class Tv{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=gv(this.parameters)),this._parameterMap}toString(){return Vv(this)}}function xv(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function kv(t,e){let n=[];return Cv(t.children,(t,r)=>{r===fv&&(n=n.concat(e(t,r)))}),Cv(t.children,(t,r)=>{r!==fv&&(n=n.concat(e(t,r)))}),n}class Av{}class jv{parse(t){const e=new Kv(t);return new Sv(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return Pv(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return Cv(e.children,(e,n)=>{n!==fv&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=kv(e,(n,r)=>r===fv?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Pv(e)}/${n[0]}`:`${Pv(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Rv(e)}=${Rv(t)}`).join("&"):`${Rv(e)}=${Rv(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Nv=new jv;function Pv(t){return t.segments.map(t=>Vv(t)).join("/")}function Dv(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rv(t){return Dv(t).replace(/%3B/gi,";")}function Lv(t){return Dv(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mv(t){return decodeURIComponent(t)}function Fv(t){return Mv(t.replace(/\+/g,"%20"))}function Vv(t){return`${Lv(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Lv(t)}=${Lv(e[t])}`).join("")}`;var e}const Uv=/^[^\/()?;=#]+/;function qv(t){const e=t.match(Uv);return e?e[0]:""}const Bv=/^[^=?&#]+/,Hv=/^[^?&#]+/;class Kv{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Iv([],{}):new Iv([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Iv(t,e)),n}parseSegment(){const t=qv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Tv(Mv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=qv(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=qv(this.remaining);t&&(n=t,this.capture(n))}t[Mv(e)]=Mv(n)}parseQueryParam(t){const e=function(t){const e=t.match(Bv);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Hv);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Fv(e),i=Fv(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=qv(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=fv);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Iv([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class zv{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Wv(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Wv(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Gv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Gv(t,this._root).map(t=>t.value)}}function Wv(t,e){if(t===e.value)return e;for(const n of e.children){const e=Wv(t,n);if(e)return e}return null}function Gv(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Gv(t,n);if(r.length)return r.unshift(e),r}return[]}class Qv{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function $v(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Yv extends zv{constructor(t,e){super(t),this.snapshot=e,nb(this,t)}toString(){return this.snapshot.toString()}}function Zv(t,e){const n=function(t,e){const n=new tb([],{},{},"",{},fv,e,null,t.root,-1,{});return new eb("",new Qv(n,[]))}(t,e),r=new km([new Tv("",{})]),i=new km({}),o=new km({}),s=new km({}),a=new km(""),u=new Jv(r,i,s,a,o,fv,e,n.root);return u.snapshot=n.root,new Yv(new Qv(u,[]),n)}class Jv{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ht.a)(t=>gv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ht.a)(t=>gv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xv(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class tb{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eb extends zv{constructor(t,e){super(e),this.url=t,nb(this,e)}toString(){return rb(this._root)}}function nb(t,e){e.value._routerState=t,e.children.forEach(e=>nb(t,e))}function rb(t){const e=t.children.length>0?` { ${t.children.map(rb).join(", ")} } `:"";return`${t.value}${e}`}function ib(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vv(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),vv(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vv(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),vv(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ob(t,e){return vv(t.params,e.params)&&function(t,e){return xv(t,e)&&t.every((t,n)=>vv(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||ob(t.parent,e.parent))}function sb(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ab(t,e,n,r,i){let o={};return r&&Cv(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Sv(n.root===t?e:function t(e,n,r){const i={};return Cv(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Iv(e.segments,i)}(n.root,t,e),o,i)}class ub{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&sb(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==wv(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cb{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function lb(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function hb(t,e,n){if(t||(t=new Iv([],{})),0===t.segments.length&&t.hasChildren())return db(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=lb(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!yb(s,a,e))return o;r+=2}else{if(!yb(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Iv(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Iv(t.segments.slice(r.pathIndex),t.children),db(e,0,i)}return r.match&&0===i.length?new Iv(t.segments,{}):r.match&&!t.hasChildren()?fb(t,e,n):r.match?db(t,0,i):fb(t,e,n)}function db(t,e,n){if(0===n.length)return new Iv(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{[fv]:t}}(n),i={};return Cv(r,(n,r)=>{null!==n&&(i[r]=hb(t.children[r],e,n))}),Cv(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Iv(t.segments,i)}}function fb(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=pb(n[i].outlets);return new Iv(r,t)}if(0===i&&sb(n[0])){r.push(new Tv(t.segments[e].path,n[0])),i++;continue}const o=lb(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&sb(s)?(r.push(new Tv(o,gb(s))),i+=2):(r.push(new Tv(o,{})),i++)}return new Iv(r,{})}function pb(t){const e={};return Cv(t,(t,n)=>{null!==t&&(e[n]=fb(new Iv([],{}),0,t))}),e}function gb(t){const e={};return Cv(t,(t,n)=>e[n]=""+t),e}function yb(t,e,n){return t==n.path&&vv(e,n.parameters)}class mb{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ib(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=$v(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Cv(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=$v(t),i=t.value.component?n.children:e;Cv(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=$v(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new hv(t.value.snapshot))}),t.children.length&&this.forwardEvent(new cv(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(ib(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),vb(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function vb(t){ib(t.value),t.children.forEach(vb)}class bb{constructor(t,e){this.routes=t,this.module=e}}function _b(t){return"function"==typeof t}function wb(t){return t instanceof Sv}const Cb=Symbol("INITIAL_VALUE");function Ob(){return Wy(t=>function(...t){let e=void 0,n=void 0;return Object(pn.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Bt.a)(t[0])&&(t=t[0]),Object(Dm.a)(t,n).lift(new Lm(e))}(...t.map(t=>t.pipe(tm(1),gn(Cb)))).pipe(_n((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Cb)return t;if(r===Cb&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||wb(r))return r}return t},t)},Cb),In(t=>t!==Cb),Object(Ht.a)(t=>wb(t)?t:!0===t),tm(1)))}class Eb{constructor(t){this.segmentGroup=t||null}}class Sb{constructor(t){this.urlTree=t}}function Ib(t){return new qt.a(e=>e.error(new Eb(t)))}function Tb(t){return new qt.a(e=>e.error(new Sb(t)))}function xb(t){return new qt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class kb{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,fv).pipe(Object(Ht.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bm(t=>{if(t instanceof Sb)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Eb)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,fv).pipe(Object(Ht.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Bm(t=>{if(t instanceof Eb)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Iv([],{[fv]:t}):t;return new Sv(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ht.a)(t=>new Iv([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(ln.a)({});const n=[],r=[],i={};return Cv(t,(t,o)=>{const s=e(o,t).pipe(Object(Ht.a)(t=>i[o]=t));o===fv?n.push(s):r.push(s)}),ln.a.apply(null,n.concat(r)).pipe(dn(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?In((e,n)=>t(e,n,r)):lm.a,Vm(1),n?rm(e):sm(()=>new Zy))}(),Object(Ht.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(ln.a)(...n).pipe(Wm(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Bm(t=>{if(t instanceof Eb)return Object(ln.a)(null);throw t}))),hm(t=>!!t),Bm((t,n)=>{if(t instanceof Zy||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(ln.a)(new Iv([],{}));throw new Eb(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Pb(r)!==o?Ib(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Ib(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Tb(i):this.lineralizeSegments(n,i).pipe(Object(zm.a)(n=>{const i=new Iv(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Ab(e,r,i);if(!s)return Ib(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Tb(l):this.lineralizeSegments(r,l).pipe(Object(zm.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Ht.a)(t=>(n._loadedConfig=t,new Iv(r,{})))):Object(ln.a)(new Iv(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Ab(e,n,r);if(!i)return Ib(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(zm.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Nb(t,e,n)&&Pb(n)!==fv)}(t,n,r)?{segmentGroup:jb(new Iv(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&Pb(r)!==fv&&(n[Pb(r)]=new Iv([],{}));return n}(r,new Iv(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Nb(t,e,n))}(t,n,r)?{segmentGroup:jb(new Iv(t.segments,function(t,e,n,r){const i={};for(const o of n)Nb(t,e,o)&&!r[Pb(o)]&&(i[Pb(o)]=new Iv([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Ht.a)(t=>new Iv(o,t))):0===r.length&&0===s.length?Object(ln.a)(new Iv(o,{})):this.expandSegment(n,i,r,s,fv,!0).pipe(Object(Ht.a)(t=>new Iv(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ln.a)(new bb(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ln.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(zm.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ht.a)(t=>(e._loadedConfig=t,t))):function(t){return new qt.a(e=>e.error(yv(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ln.a)(new bb([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ln.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&_b(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!_b(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ov(o)});return Object(ln.a)(i).pipe(Ob(),Object(Gm.a)(t=>{if(!wb(t))return;const e=yv(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Ht.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ln.a)(n);if(r.numberOfChildren>1||!r.children.primary)return xb(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Sv(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Cv(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Cv(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Iv(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ab(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||mv)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function jb(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Iv(t.segments.concat(e.segments),e.children)}return t}function Nb(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Pb(t){return t.outlet||fv}class Db{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Rb{constructor(t,e){this.component=t,this.route=e}}function Lb(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=$v(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!xv(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xv(t.url,e.url)||!vv(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ob(t,e)||!vv(t.queryParams,e.queryParams);case"paramsChange":default:return!ob(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Db(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new Rb(u.outlet.component,a))}else a&&Fb(n,u,o),o.canActivateChecks.push(new Db(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),Cv(s,(t,e)=>Fb(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Mb(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Fb(t,e,n){const r=$v(t),i=t.value;Cv(r,(t,r)=>{Fb(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Rb(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Vb(t,e){return null!==t&&e&&e(new lv(t)),Object(ln.a)(!0)}function Ub(t,e){return null!==t&&e&&e(new uv(t)),Object(ln.a)(!0)}function qb(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ln.a)(!0);const i=r.map(r=>Fm(()=>{const i=Mb(r,e,n);let o;if(function(t){return t&&_b(t.canActivate)}(i))o=Ov(i.canActivate(e,t));else{if(!_b(i))throw new Error("Invalid CanActivate guard");o=Ov(i(e,t))}return o.pipe(hm())}));return Object(ln.a)(i).pipe(Ob())}function Bb(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Fm(()=>{const i=e.guards.map(i=>{const o=Mb(i,e.node,n);let s;if(function(t){return t&&_b(t.canActivateChild)}(o))s=Ov(o.canActivateChild(r,t));else{if(!_b(o))throw new Error("Invalid CanActivateChild guard");s=Ov(o(r,t))}return s.pipe(hm())});return Object(ln.a)(i).pipe(Ob())}));return Object(ln.a)(i).pipe(Ob())}class Hb{}class Kb{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Gb(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,fv),n=new tb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},fv,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Qv(n,e),i=new eb(this.url,r);return this.inheritParamsAndData(i._root),Object(ln.a)(i)}catch(Fy){return new qt.a(e=>e.error(Fy))}}inheritParamsAndData(t){const e=t.value,n=Xv(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=kv(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===fv?-1:e.value.outlet===fv?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(Fy){if(!(Fy instanceof Hb))throw Fy}if(this.noLeftoversInUrl(e,n,r))return[];throw new Hb}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Hb;if((t.outlet||fv)!==r)throw new Hb;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?wv(n).parameters:{};i=new tb(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yb(t),r,t.component,t,zb(e),Wb(e)+n.length,Zb(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Hb;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||mv)(n,t,e);if(!r)throw new Hb;const i={};Cv(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new tb(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yb(t),r,t.component,t,zb(e),Wb(e)+o.length,Zb(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Gb(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Qv(i,t)]}if(0===a.length&&0===c.length)return[new Qv(i,[])];const l=this.processSegment(a,u,c,fv);return[new Qv(i,l)]}}function zb(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Wb(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Gb(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Qb(t,e,n)&&$b(n)!==fv)}(t,n,r)){const i=new Iv(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&$b(o)!==fv){const n=new Iv([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[$b(o)]=n}return i}(t,e,r,new Iv(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Qb(t,e,n))}(t,n,r)){const o=new Iv(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Qb(t,n,a)&&!i[$b(a)]){const n=new Iv([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[$b(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Iv(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Qb(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function $b(t){return t.outlet||fv}function Yb(t){return t.data||{}}function Zb(t){return t.resolve||{}}function Jb(t){return function(e){return e.pipe(Wy(e=>{const n=t(e);return n?Object(zt.a)(n).pipe(Object(Ht.a)(()=>e)):Object(zt.a)([e])}))}}class Xb extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let t_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Jb(0,"router-outlet")},directives:function(){return[v_]},encapsulation:2}),t})();function e_(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];n_(r,r_(e,r))}}function n_(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==fv)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&e_(t.children,e)}function r_(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function i_(t){const e=t.children&&t.children.map(i_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==fv&&(n.component=t_),n}const o_=new r.q("ROUTES");class s_{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Ht.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new bb(_v(r.injector.get(o_)).map(i_),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(zt.a)(this.loader.load(t)):Ov(t()).pipe(Object(zm.a)(t=>t instanceof r.v?Object(ln.a)(t):Object(zt.a)(this.compiler.compileModuleAsync(t))))}}class a_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new u_,this.attachRef=null}}class u_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new a_,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class c_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function l_(t){throw t}function h_(t,e,n){return e.parse("/")}function d_(t,e){return Object(ln.a)(null)}let f_=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Hy.a,this.errorHandler=l_,this.malformedUriErrorHandler=h_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:d_,afterPreactivation:d_},this.urlHandlingStrategy=new c_,this.routeReuseStrategy=new Xb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new Sv(new Iv([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new s_(s,a,t=>this.triggerEvent(new sv(t)),t=>this.triggerEvent(new av(t))),this.routerState=Zv(this.currentUrlTree,this.rootComponentType),this.transitions=new km({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(In(t=>0!==t.id),Object(Ht.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Wy(t=>{let n=!1,r=!1;return Object(ln.a)(t).pipe(Object(Gm.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Wy(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ln.a)(t).pipe(Wy(t=>{const n=this.transitions.getValue();return e.next(new Zm(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Xy.a:[t]}),Wy(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Wy(t=>function(t,e,n,r,i){return new kb(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ht.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(Gm.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(zm.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Kb(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ht.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Gm.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(Gm.a)(t=>{const n=new ev(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Zm(n,this.serializeUrl(r),i,o);e.next(a);const u=Zv(r,this.rootComponentType).snapshot;return Object(ln.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Xy.a}),Jb(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Gm.a)(t=>{const e=new nv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ht.a)(t=>Object.assign(Object.assign({},t),{guards:Lb(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(zm.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ln.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(zt.a)(t).pipe(Object(zm.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ln.a)(!0);const s=o.map(o=>{const s=Mb(o,e,i);let a;if(function(t){return t&&_b(t.canDeactivate)}(s))a=Ov(s.canDeactivate(t,e,n,r));else{if(!_b(s))throw new Error("Invalid CanDeactivate guard");a=Ov(s(t,e,n,r))}return a.pipe(hm())});return Object(ln.a)(s).pipe(Ob())}(t.component,t.route,n,e,r)),hm(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(zm.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(zt.a)(e).pipe(Wm(e=>Object(zt.a)([Ub(e.route.parent,r),Vb(e.route,r),Bb(t,e.path,n),qb(t,e.route,n)]).pipe(dn(),hm(t=>!0!==t,!0))),hm(t=>!0!==t,!0))}(r,o,t,e):Object(ln.a)(n)),Object(Ht.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Gm.a)(t=>{if(wb(t.guardsResult)){const e=yv(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(Gm.a)(t=>{const e=new rv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),In(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Xm(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Jb(t=>{if(t.guards.canActivateChecks.length)return Object(ln.a)(t).pipe(Object(Gm.a)(t=>{const e=new iv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Wy(t=>{let n=!1;return Object(ln.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(zm.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ln.a)(t);let o=0;return Object(zt.a)(n).pipe(Wm(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ln.a)({});const o={};return Object(zt.a)(i).pipe(Object(zm.a)(i=>function(t,e,n,r){const i=Mb(t,e,r);return Ov(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Gm.a)(t=>{o[i]=t}))),Vm(1),Object(zm.a)(()=>Object.keys(o).length===i.length?Object(ln.a)(o):Xy.a))}(t._resolve,t,e,r).pipe(Object(Ht.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Xv(t,n).resolve),null)))}(t.route,e,r,i)),Object(Gm.a)(()=>o++),Vm(1),Object(zm.a)(e=>o===n.length?Object(ln.a)(t):Xy.a))}))}),Object(Gm.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Xm(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Gm.a)(t=>{const e=new ov(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Jb(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ht.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Qv(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Jv(new km((i=n.value).url),new km(i.params),new km(i.queryParams),new km(i.fragment),new km(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Qv(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Yv(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Gm.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ht.a)(t=>(new mb(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Gm.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Xm(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Qm(i))),Bm(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=wb(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Xm(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new tv(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(fu){t.reject(fu)}}var i;return Xy.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){e_(t),this.config=t.map(i_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.U)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return ab(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ub(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Cv(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ub(n,e,r)}(n);if(o.toRoot())return ab(e.root,new Iv([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new cb(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new cb(t,t===e.root,0)}const r=sb(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new cb(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?db(s.segmentGroup,s.index,o.commands):hb(s.segmentGroup,s.index,o.commands);return ab(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.U)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=wb(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Fy){e=this.malformedUriErrorHandler(Fy,this.urlSerializer,t)}return e}isActive(t,e){if(wb(t))return Ev(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ev(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Jm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.M),r.Pb(Av),r.Pb(u_),r.Pb(C),r.Pb(r.r),r.Pb(r.w),r.Pb(r.i),r.Pb(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),p_=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Hy.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.U)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:y_(this.skipLocationChange),replaceUrl:y_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:y_(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:y_(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(f_),r.Ib(Jv),r.Qb("tabindex"),r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Sb("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.wb]}),t})(),g_=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Hy.a,this.subscription=t.events.subscribe(t=>{t instanceof Jm&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.U)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:y_(this.skipLocationChange),replaceUrl:y_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:y_(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:y_(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(f_),r.Ib(Jv),r.Ib(m))},t.\u0275dir=r.Db({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Sb("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)})),2&t&&(r.Ob("href",e.href,r.bc),r.zb("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.wb]}),t})();function y_(t){return""===t||!!t}let m_=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Jm&&this.update()})}ngAfterContentInit(){Object(zt.a)([this.links.changes,this.linksWithHrefs.changes,Object(ln.a)(null)]).pipe(Object(hn.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(zt.a)(e).pipe(Object(hn.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(f_),r.Ib(r.l),r.Ib(r.D),r.Ib(r.h),r.Ib(p_,8),r.Ib(g_,8))},t.\u0275dir=r.Db({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var i;1&t&&(r.Bb(n,p_,!0),r.Bb(n,g_,!0)),2&t&&(r.Zb(i=r.Tb())&&(e.links=i),r.Zb(i=r.Tb())&&(e.linksWithHrefs=i))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.wb]}),t})(),v_=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||fv,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new b_(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(u_),r.Ib(r.P),r.Ib(r.j),r.Qb("name"),r.Ib(r.h))},t.\u0275dir=r.Db({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class b_{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Jv?this.route:t===u_?this.childContexts:this.parent.get(t,e)}}class __{}class w_{preload(t,e){return Object(ln.a)(null)}}let C_=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new s_(e,n,e=>t.triggerEvent(new sv(e)),e=>t.triggerEvent(new av(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(In(t=>t instanceof Jm),Wm(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(zt.a)(n).pipe(Object(hn.a)(),Object(Ht.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(zm.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(f_),r.Pb(r.w),r.Pb(r.i),r.Pb(r.r),r.Pb(__))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),O_=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Zm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dv&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new dv(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(f_),r.Pb(ct),r.Pb(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const E_=new r.q("ROUTER_CONFIGURATION"),S_=new r.q("ROUTER_FORROOT_GUARD"),I_=[C,{provide:Av,useClass:jv},{provide:f_,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new f_(null,t,e,n,r,i,o,_v(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[Av,u_,C,r.r,r.w,r.i,o_,E_,[class{},new r.A],[class{},new r.A]]},u_,{provide:Jv,useFactory:function(t){return t.routerState.root},deps:[f_]},{provide:r.w,useClass:r.J},C_,w_,class{preload(t,e){return e().pipe(Bm(()=>Object(ln.a)(null)))}},{provide:E_,useValue:{enableTracing:!1}}];function T_(){return new r.y("Router",f_)}let x_=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[I_,N_(e),{provide:S_,useFactory:j_,deps:[[f_,new r.A,new r.I]]},{provide:E_,useValue:n||{}},{provide:m,useFactory:A_,deps:[u,[new r.p(b),new r.A],E_]},{provide:O_,useFactory:k_,deps:[f_,ct,E_]},{provide:__,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:w_},{provide:r.y,multi:!0,useFactory:T_},[P_,{provide:r.d,multi:!0,useFactory:D_,deps:[P_]},{provide:L_,useFactory:R_,deps:[P_]},{provide:r.b,multi:!0,useExisting:L_}]]}}static forChild(e){return{ngModule:t,providers:[N_(e)]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Pb(S_,8),r.Pb(f_,8))}}),t})();function k_(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new O_(t,e,n)}function A_(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function j_(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function N_(t){return[{provide:r.a,multi:!0,useValue:t},{provide:o_,multi:!0,useValue:t}]}let P_=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Hy.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(f_),r=this.injector.get(E_);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(ln.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(E_),n=this.injector.get(C_),i=this.injector.get(O_),o=this.injector.get(f_),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.r))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();function D_(t){return t.appInitializer.bind(t)}function R_(t){return t.bootstrapListener.bind(t)}const L_=new r.q("Router Initializer");function M_(t,e){if(1&t&&(r.Lb(0,"div",16),r.ec(1),r.Kb()),2&t){const t=r.Vb();r.Ab("alert-success",1===t.res)("alert-danger",0===t.res),r.yb(1),r.gc(" ",t.msg," ")}}let F_=(()=>{class t{constructor(t,e,n){this.worksheetService=t,this.fb=e,this.router=n,this.res=-1,this.msg="",this.loginForm=this.fb.group({user:new Qe(""),pwd:new Qe("")},{validators:[he.required]})}ngOnInit(){}onSubmit(){const t=this.loginForm.get("user").value,e=this.loginForm.get("pwd").value;this.worksheetService.getUser(t,e).subscribe(n=>{console.log(n),n.length>0?(this.msg="Login Success!!!",this.res=1,setTimeout(()=>{sessionStorage.setItem("userDetails",t+":"+e),this.router.navigateByUrl("").then(()=>{window.location.reload()})},2e3)):(this.msg="Login Error.... Please try again.",this.res=0)})}reset(){this.loginForm.patchValue({user:"",pwd:""})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(xm),r.Ib(an),r.Ib(f_))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-login"]],decls:28,vars:3,consts:[[1,"card"],[1,"card-body"],["class","alert","role","alert",3,"alert-success","alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"border","p-2"],[1,"w-auto"],[1,"form-group"],["for","user"],[1,"req"],["type","text","id","user","formControlName","user","required","",1,"form-control"],["for","pwd"],["type","password","id","pwd","formControlName","pwd","required","",1,"form-control"],[1,"row"],[1,"col","text-center"],["type","submit",1,"btn","btn-primary","mx-2",3,"disabled"],["type","button",1,"btn","btn-secondary","mx-2",3,"click"],["role","alert",1,"alert"]],template:function(t,e){1&t&&(r.Lb(0,"h2"),r.ec(1,"Login to Online Classes and Worksheets management system for Session 2021-22"),r.Kb(),r.Lb(2,"div",0),r.Lb(3,"div",1),r.dc(4,M_,2,5,"div",2),r.Lb(5,"form",3),r.Sb("ngSubmit",(function(){return e.onSubmit()})),r.Lb(6,"fieldset",4),r.Lb(7,"legend",5),r.ec(8,"Enter User Credentials:"),r.Kb(),r.Lb(9,"div",6),r.Lb(10,"label",7),r.ec(11,"UserName"),r.Lb(12,"span",8),r.ec(13,"*"),r.Kb(),r.Kb(),r.Jb(14,"input",9),r.Kb(),r.Lb(15,"div",6),r.Lb(16,"label",10),r.ec(17,"Password"),r.Lb(18,"span",8),r.ec(19,"*"),r.Kb(),r.Kb(),r.Jb(20,"input",11),r.Kb(),r.Kb(),r.ec(21,"\xa0 "),r.Lb(22,"div",12),r.Lb(23,"div",13),r.Lb(24,"button",14),r.ec(25,"Submit"),r.Kb(),r.Lb(26,"button",15),r.Sb("click",(function(){return e.reset()})),r.ec(27,"Reset"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(4),r.Yb("ngIf",-1!=e.res),r.yb(1),r.Yb("formGroup",e.loginForm),r.yb(19),r.Yb("disabled",!e.loginForm.valid||e.loginForm.errors))},directives:[it,Ze,oe,tn,Jt,ie,nn,on],styles:["h2[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]{box-shadow:0 4px 8px 0 rgba(0,0,0,.2);padding:10px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{margin:10px}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.req[_ngcontent-%COMP%], b[_ngcontent-%COMP%]{font-size:1rem}.req[_ngcontent-%COMP%]{color:red}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled{opacity:.2}"]}),t})();const V_=["KG","I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"],U_=["A","B","C","D","E"];function q_(t,e){if(1&t&&(r.Lb(0,"option",9),r.ec(1),r.Kb()),2&t){const t=e.$implicit;r.Yb("value",t.id),r.yb(1),r.fc(t.name)}}function B_(t,e){if(1&t&&(r.Lb(0,"tr"),r.Lb(1,"td"),r.ec(2),r.Kb(),r.Lb(3,"td"),r.ec(4),r.Kb(),r.Lb(5,"td"),r.ec(6),r.Kb(),r.Lb(7,"td"),r.ec(8),r.Kb(),r.Lb(9,"td"),r.ec(10),r.Kb(),r.Lb(11,"td"),r.ec(12),r.Kb(),r.Lb(13,"td"),r.ec(14),r.Kb(),r.Lb(15,"td"),r.ec(16),r.Kb(),r.Lb(17,"td"),r.ec(18),r.Kb(),r.Lb(19,"td"),r.ec(20),r.Kb(),r.Lb(21,"td"),r.ec(22),r.Kb(),r.Lb(23,"td"),r.ec(24),r.Kb(),r.Lb(25,"td"),r.ec(26),r.Kb(),r.Lb(27,"td"),r.ec(28),r.Kb(),r.Lb(29,"td"),r.ec(30),r.Wb(31,"date"),r.Kb(),r.Kb()),2&t){const t=e.$implicit;r.yb(2),r.fc(t.empId),r.yb(2),r.fc(t.empName),r.yb(2),r.fc(t.class),r.yb(2),r.fc(t.section),r.yb(2),r.fc(t.enroll),r.yb(2),r.fc(t.onlineSent),r.yb(2),r.fc(t.onlineReverted),r.yb(2),r.fc(t.hardSent),r.yb(2),r.fc(t.hardReverted),r.yb(2),r.fc(t.notContactable),r.yb(2),r.fc(t.migrated),r.yb(2),r.fc(t.unreachableNo),r.yb(2),r.fc(t.addressChanged),r.yb(2),r.fc(t.other),r.yb(2),r.gc(" ",r.Xb(31,15,t.entryDate.toDate(),"dd/MM/yyyy hh:mm:ss a")," ")}}let H_=(()=>{class t{constructor(t){this.worksheetService=t}ngOnInit(){this.worksheetService.getWeeks().subscribe(t=>{const e=t.map(t=>Object.assign({docId:t.payload.doc.id},t.payload.doc.data()));this.weeks=e.sort((t,e)=>t.id===e.id?0:t.id>e.id?1:-1)})}onChange(t){this.data=[],""!==t&&this.worksheetService.getWorksheetsData(t).subscribe(t=>{const e=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()));this.data=e.sort((t,e)=>{const n=V_.indexOf(t.class),r=V_.indexOf(e.class);return n===r?t.section===e.section?0:t.section>e.section?1:-1:n>r?1:-1})})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(xm))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-worksheets-details"]],decls:45,vars:2,consts:[[1,"row"],[1,"form-group","col"],["id","week",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(r.Lb(0,"h2"),r.ec(1,"Online Worksheets data for Classes KG to IX 2021-22"),r.Kb(),r.Jb(2,"br"),r.Lb(3,"div",0),r.Lb(4,"div",1),r.Lb(5,"select",2),r.Sb("change",(function(t){return e.onChange(t.target.value)})),r.Lb(6,"option",3),r.ec(7,"Select Week"),r.Kb(),r.dc(8,q_,2,2,"option",4),r.Kb(),r.Kb(),r.Kb(),r.Lb(9,"div",5),r.Lb(10,"table",6),r.Lb(11,"thead"),r.Lb(12,"tr"),r.Lb(13,"th",7),r.ec(14,"Employee Id"),r.Kb(),r.Lb(15,"th",7),r.ec(16,"Name"),r.Kb(),r.Lb(17,"th",7),r.ec(18,"Class"),r.Kb(),r.Lb(19,"th",7),r.ec(20,"Section"),r.Kb(),r.Lb(21,"th",7),r.ec(22,"Enrollment"),r.Kb(),r.Lb(23,"th",7),r.ec(24,"Online Sent"),r.Kb(),r.Lb(25,"th",7),r.ec(26,"Online Reverted"),r.Kb(),r.Lb(27,"th",7),r.ec(28,"Hard Copy Sent"),r.Kb(),r.Lb(29,"th",7),r.ec(30,"Hard Copy Reverted"),r.Kb(),r.Lb(31,"th",7),r.ec(32,"Not Contactable"),r.Kb(),r.Lb(33,"th",7),r.ec(34,"Migrated"),r.Kb(),r.Lb(35,"th",7),r.ec(36,"Unreachable no."),r.Kb(),r.Lb(37,"th",7),r.ec(38,"Address Changed"),r.Kb(),r.Lb(39,"th",7),r.ec(40,"Any other"),r.Kb(),r.Lb(41,"th",7),r.ec(42,"Entry Date"),r.Kb(),r.Kb(),r.Kb(),r.Lb(43,"tbody"),r.dc(44,B_,32,18,"tr",8),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(8),r.Yb("ngForOf",e.weeks),r.yb(36),r.Yb("ngForOf",e.data))},directives:[Te,je,nt],pipes:[at],styles:["@media (max-width:1255.98px){[_nghost-%COMP%]{width:95%}}h2[_ngcontent-%COMP%]{text-align:center}.row[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:auto}"]}),t})();const K_=t=>{const e=t.get("enroll"),n=t.get("onlineSent"),r=t.get("hardSent"),i=t.get("notContactable"),o=parseInt(n.value+r.value+i.value,10);return Number.isNaN(o)||e.value===o?null:{rule1Failed:!0}},z_=t=>{const e=t.get("onlineSent"),n=t.get("onlineReverted");return e.value<n.value?{rule2Failed:!0}:null},W_=t=>{const e=t.get("hardSent"),n=t.get("hardReverted");return e.value<n.value?{rule3Failed:!0}:null},G_=t=>{const e=t.get("notContactable"),n=t.get("migrated"),r=t.get("unreachableNo"),i=t.get("addressChanged"),o=t.get("other"),s=parseInt(n.value+r.value+i.value+o.value,10);return Number.isNaN(s)||e.value===s?null:{rule4Failed:!0}};function Q_(t,e){if(1&t&&(r.Lb(0,"div",46),r.ec(1),r.Kb()),2&t){const t=r.Vb();r.Ab("alert-success",1===t.res)("alert-danger",0===t.res),r.yb(1),r.gc(" ",t.msg," ")}}function $_(t,e){if(1&t&&(r.Lb(0,"option",47),r.ec(1),r.Kb()),2&t){const t=e.$implicit;r.Yb("value",t.id),r.yb(1),r.fc(t.name)}}function Y_(t,e){if(1&t&&(r.Lb(0,"option",47),r.ec(1),r.Kb()),2&t){const t=e.$implicit;r.Yb("value",t),r.yb(1),r.fc(t)}}function Z_(t,e){if(1&t&&(r.Lb(0,"option",47),r.ec(1),r.Kb()),2&t){const t=e.$implicit;r.Yb("value",t),r.yb(1),r.fc(t)}}function J_(t,e){1&t&&(r.Lb(0,"div",48),r.ec(1," Rule 1 Failed "),r.Kb())}function X_(t,e){1&t&&(r.Lb(0,"div",48),r.ec(1," Rule 2 Failed "),r.Kb())}function tw(t,e){1&t&&(r.Lb(0,"div",48),r.ec(1," Rule 3 Failed "),r.Kb())}function ew(t,e){1&t&&(r.Lb(0,"div",48),r.ec(1," Rule 4 Failed "),r.Kb())}const nw=[{path:"",component:(()=>{class t{constructor(t,e){this.worksheetService=t,this.fb=e,this.CLASSES=V_,this.SECTIONS=U_,this.res=-1,this.msg="",this.docId=null,this.worksheetForm=this.fb.group({empId:new Qe(""),empName:new Qe(""),class:new Qe(""),section:new Qe(""),week:new Qe(""),enroll:new Qe(""),onlineSent:new Qe(""),onlineReverted:new Qe(""),hardSent:new Qe(""),hardReverted:new Qe(""),notContactable:new Qe(""),migrated:new Qe(""),unreachableNo:new Qe(""),addressChanged:new Qe(""),other:new Qe("")},{validators:[he.required,K_,z_,W_,G_]})}ngOnInit(){this.worksheetService.getWeeks().subscribe(t=>{const e=t.map(t=>Object.assign({docId:t.payload.doc.id},t.payload.doc.data()));this.weeks=e.sort((t,e)=>t.id===e.id?0:t.id>e.id?1:-1)})}onSubmit(){const t=this.worksheetForm.value;let e;t.entryDate=new Date,null!==this.docId?(t.id=this.docId,e=this.worksheetService.updateWorksheetData(t)):e=this.worksheetService.saveWorksheetData(t),e.then(t=>{console.log("Document written with doc: ",t),this.res=1,this.msg="Data submitted successfully!!!",this.reset()}).catch(t=>{console.error("Error adding document: ",t),this.res=0,this.msg="Error submitting details!!! Please contact administrator...",this.reset()})}reset(){window.scroll(0,0),this.worksheetForm.patchValue({class:"",section:"",week:"",empId:"",empName:"",enroll:"",onlineSent:"",onlineReverted:"",hardSent:"",hardReverted:"",notContactable:"",migrated:"",unreachableNo:"",addressChanged:"",other:""}),this.docId=null}checkDetails(){const t=this.worksheetForm.controls.class.value,e=this.worksheetForm.controls.week.value,n=this.worksheetForm.controls.section.value;if(t&&e&&n){const r=this.worksheetService.getSingleWorksheetData(e,t,n).subscribe(t=>{let e=t.map(t=>Object.assign({docId:t.payload.doc.id},t.payload.doc.data()));e.length>0?(e=e[0],this.docId=e.docId,this.worksheetForm.patchValue({empId:e.empId,empName:e.empName,enroll:e.enroll,onlineSent:e.onlineSent,onlineReverted:e.onlineReverted,hardSent:e.hardSent,hardReverted:e.hardReverted,notContactable:e.notContactable,migrated:e.migrated,unreachableNo:e.unreachableNo,addressChanged:e.addressChanged,other:e.other})):this.resetSomeFields(),r.unsubscribe()})}else this.resetSomeFields()}resetSomeFields(){this.docId=null,this.worksheetForm.patchValue({empId:"",empName:"",enroll:"",onlineSent:"",onlineReverted:"",hardSent:"",hardReverted:"",notContactable:"",migrated:"",unreachableNo:"",addressChanged:"",other:""})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(xm),r.Ib(an))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-worksheets-form"]],decls:160,vars:10,consts:[[1,"card"],[1,"card-body"],["class","alert","role","alert",3,"alert-success","alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","week"],[1,"req"],["id","week","formControlName","week","required","",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col"],["for","class"],["id","class","formControlName","class","required","",1,"form-control",3,"change"],["for","section"],["id","section","formControlName","section","required","",1,"form-control",3,"change"],[1,"border","p-2"],[1,"w-auto"],["for","empId"],["type","number","id","empId","formControlName","empId","required","",1,"form-control"],["for","empName"],["type","text","id","empName","formControlName","empName","required","",1,"form-control"],["class","cross-validation-error-message alert alert-danger",4,"ngIf"],["for","enroll"],["type","number","id","enroll","formControlName","enroll","required","",1,"form-control"],["for","onlineSent"],["type","number","id","onlineSent","formControlName","onlineSent","required","",1,"form-control"],["for","onlineReverted"],["type","number","id","onlineReverted","formControlName","onlineReverted","required","",1,"form-control"],["for","hardSent"],["type","number","id","hardSent","formControlName","hardSent","required","",1,"form-control"],["for","hardReverted"],["type","number","id","hardReverted","formControlName","hardReverted","required","",1,"form-control"],["for","notContactable"],["type","number","id","notContactable","formControlName","notContactable","required","",1,"form-control"],["for","migrated"],["type","number","id","migrated","formControlName","migrated","required","",1,"form-control"],["for","unreachableNo"],["type","number","id","unreachableNo","formControlName","unreachableNo","required","",1,"form-control"],["for","addressChanged"],["type","number","id","addressChanged","formControlName","addressChanged","required","",1,"form-control"],["for","other"],["type","number","id","other","formControlName","other","required","",1,"form-control"],[1,"col","text-center"],["type","submit",1,"btn","btn-primary","mx-2",3,"disabled"],["type","button",1,"btn","btn-secondary","mx-2",3,"click"],["role","alert",1,"alert"],[3,"value"],[1,"cross-validation-error-message","alert","alert-danger"]],template:function(t,e){1&t&&(r.Lb(0,"h2"),r.ec(1,"Online Worksheets data for Classes KG to X 2021-22"),r.Kb(),r.Lb(2,"div",0),r.Lb(3,"div",1),r.dc(4,Q_,2,5,"div",2),r.Lb(5,"form",3),r.Sb("ngSubmit",(function(){return e.onSubmit()})),r.Lb(6,"div",4),r.Lb(7,"label",5),r.ec(8,"Week"),r.Lb(9,"span",6),r.ec(10,"*"),r.Kb(),r.Kb(),r.Lb(11,"select",7),r.Sb("change",(function(){return e.checkDetails()})),r.Lb(12,"option",8),r.ec(13,"Select Week"),r.Kb(),r.dc(14,$_,2,2,"option",9),r.Kb(),r.Kb(),r.Lb(15,"div",10),r.Lb(16,"div",11),r.Lb(17,"div",4),r.Lb(18,"label",12),r.ec(19,"Class"),r.Lb(20,"span",6),r.ec(21,"*"),r.Kb(),r.Kb(),r.Lb(22,"select",13),r.Sb("change",(function(){return e.checkDetails()})),r.Lb(23,"option",8),r.ec(24,"Select Class"),r.Kb(),r.dc(25,Y_,2,2,"option",9),r.Kb(),r.Kb(),r.Kb(),r.Lb(26,"div",11),r.Lb(27,"div",4),r.Lb(28,"label",14),r.ec(29,"Section"),r.Lb(30,"span",6),r.ec(31,"*"),r.Kb(),r.Kb(),r.Lb(32,"select",15),r.Sb("change",(function(){return e.checkDetails()})),r.Lb(33,"option",8),r.ec(34,"Select Section"),r.Kb(),r.dc(35,Z_,2,2,"option",9),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(36,"fieldset",16),r.Lb(37,"legend",17),r.ec(38,"Employee Details:"),r.Kb(),r.Lb(39,"div",4),r.Lb(40,"label",18),r.ec(41,"Employee Id"),r.Lb(42,"span",6),r.ec(43,"*"),r.Kb(),r.Kb(),r.Jb(44,"input",19),r.Kb(),r.Lb(45,"div",4),r.Lb(46,"label",20),r.ec(47,"Employee name"),r.Lb(48,"span",6),r.ec(49,"*"),r.Kb(),r.Kb(),r.Jb(50,"input",21),r.Kb(),r.Kb(),r.Lb(51,"fieldset",16),r.Lb(52,"legend",17),r.ec(53,"Students Detail:"),r.Kb(),r.dc(54,J_,2,0,"div",22),r.Lb(55,"div",4),r.Lb(56,"label",23),r.Lb(57,"b"),r.ec(58,"A."),r.Kb(),r.ec(59," Enrollment"),r.Lb(60,"span",6),r.ec(61,"*"),r.Kb(),r.ec(62," \xa0"),r.Lb(63,"b"),r.ec(64,"(Rule 1 --\x3e A = B + D + F)"),r.Kb(),r.Kb(),r.Jb(65,"input",24),r.Kb(),r.Lb(66,"div",4),r.Lb(67,"label",25),r.Lb(68,"b"),r.ec(69,"B."),r.Kb(),r.ec(70," Worksheet Sent on Whatsapp"),r.Lb(71,"span",6),r.ec(72,"*"),r.Kb(),r.ec(73,"\xa0"),r.Lb(74,"b"),r.ec(75,"(Rule 2 --\x3e B >=(greater than equal to) C)"),r.Kb(),r.Kb(),r.Jb(76,"input",26),r.Kb(),r.Lb(77,"div",4),r.Lb(78,"label",27),r.Lb(79,"b"),r.ec(80,"C."),r.Kb(),r.ec(81," Worksheet Reverted Back on Whatsapp"),r.Lb(82,"span",6),r.ec(83,"*"),r.Kb(),r.Kb(),r.Jb(84,"input",28),r.Kb(),r.dc(85,X_,2,0,"div",22),r.Lb(86,"div",4),r.Lb(87,"label",29),r.Lb(88,"b"),r.ec(89,"D."),r.Kb(),r.ec(90," Worksheet Provided in Print form"),r.Lb(91,"span",6),r.ec(92,"*"),r.Kb(),r.ec(93,"\xa0"),r.Lb(94,"b"),r.ec(95,"(Rule 3 --\x3e D >=(greater than equal to) E)"),r.Kb(),r.Kb(),r.Jb(96,"input",30),r.Kb(),r.Lb(97,"div",4),r.Lb(98,"label",31),r.Lb(99,"b"),r.ec(100,"E."),r.Kb(),r.ec(101," Worksheet Reverted Back in Print form"),r.Lb(102,"span",6),r.ec(103,"*"),r.Kb(),r.Kb(),r.Jb(104,"input",32),r.Kb(),r.dc(105,tw,2,0,"div",22),r.Lb(106,"div",4),r.Lb(107,"label",33),r.Lb(108,"b"),r.ec(109,"F."),r.Kb(),r.ec(110," Not Contactable"),r.Lb(111,"span",6),r.ec(112,"*"),r.Kb(),r.ec(113," \xa0"),r.Lb(114,"b"),r.ec(115,"(Rule 4 --\x3e F = G + H + I + J)"),r.Kb(),r.Kb(),r.Jb(116,"input",34),r.Kb(),r.Lb(117,"fieldset",16),r.Lb(118,"legend",17),r.ec(119,"Not Contactable Student Details:"),r.Kb(),r.dc(120,ew,2,0,"div",22),r.Lb(121,"div",4),r.Lb(122,"label",35),r.Lb(123,"b"),r.ec(124,"G."),r.Kb(),r.ec(125," Not Contactable due to Migration"),r.Lb(126,"span",6),r.ec(127,"*"),r.Kb(),r.Kb(),r.Jb(128,"input",36),r.Kb(),r.Lb(129,"div",4),r.Lb(130,"label",37),r.Lb(131,"b"),r.ec(132,"H."),r.Kb(),r.ec(133," Not Contactable due to phone Unreachable"),r.Lb(134,"span",6),r.ec(135,"*"),r.Kb(),r.Kb(),r.Jb(136,"input",38),r.Kb(),r.Lb(137,"div",4),r.Lb(138,"label",39),r.Lb(139,"b"),r.ec(140,"I."),r.Kb(),r.ec(141," Not Contactable due to Address Changed"),r.Lb(142,"span",6),r.ec(143,"*"),r.Kb(),r.Kb(),r.Jb(144,"input",40),r.Kb(),r.Lb(145,"div",4),r.Lb(146,"label",41),r.Lb(147,"b"),r.ec(148,"J."),r.Kb(),r.ec(149," Not Contactable due to Any Other Reasons"),r.Lb(150,"span",6),r.ec(151,"*"),r.Kb(),r.Kb(),r.Jb(152,"input",42),r.Kb(),r.Kb(),r.Kb(),r.ec(153,"\xa0 "),r.Lb(154,"div",10),r.Lb(155,"div",43),r.Lb(156,"button",44),r.ec(157,"Submit"),r.Kb(),r.Lb(158,"button",45),r.Sb("click",(function(){return e.reset()})),r.ec(159,"Reset"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(4),r.Yb("ngIf",-1!=e.res),r.yb(1),r.Yb("formGroup",e.worksheetForm),r.yb(9),r.Yb("ngForOf",e.weeks),r.yb(11),r.Yb("ngForOf",e.CLASSES),r.yb(10),r.Yb("ngForOf",e.SECTIONS),r.yb(19),r.Yb("ngIf",(null==e.worksheetForm.errors?null:e.worksheetForm.errors.rule1Failed)&&(e.worksheetForm.touched||e.worksheetForm.dirty)),r.yb(31),r.Yb("ngIf",(null==e.worksheetForm.errors?null:e.worksheetForm.errors.rule2Failed)&&(e.worksheetForm.touched||e.worksheetForm.dirty)),r.yb(20),r.Yb("ngIf",(null==e.worksheetForm.errors?null:e.worksheetForm.errors.rule3Failed)&&(e.worksheetForm.touched||e.worksheetForm.dirty)),r.yb(15),r.Yb("ngIf",(null==e.worksheetForm.errors?null:e.worksheetForm.errors.rule4Failed)&&(e.worksheetForm.touched||e.worksheetForm.dirty)),r.yb(36),r.Yb("disabled",!e.worksheetForm.valid||e.worksheetForm.errors))},directives:[it,Ze,oe,tn,Ie,ie,nn,on,Te,je,nt,ve,Jt],styles:["h2[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]{box-shadow:0 4px 8px 0 rgba(0,0,0,.2);padding:10px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{margin:10px}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.req[_ngcontent-%COMP%], b[_ngcontent-%COMP%]{font-size:1rem}.req[_ngcontent-%COMP%]{color:red}.btn.disabled[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:disabled{opacity:.2}"]}),t})(),data:{title:"Online Worksheets Entry"},pathMatch:"full"},{path:"details",component:H_,data:{title:"Online Worksheets Details"},pathMatch:"full"},{path:"login",component:F_,data:{title:"Online Worksheets Details"},pathMatch:"full"}];let rw=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[x_.forRoot(nw)],x_]}),t})();function iw(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div"),r.Lb(1,"a",8),r.ec(2,"Details"),r.Kb(),r.Lb(3,"a",9),r.Sb("click",(function(){return r.ac(t),r.Vb().onLogout()})),r.ec(4,"Log out"),r.Kb(),r.Kb()}}function ow(t,e){1&t&&(r.Lb(0,"div"),r.Lb(1,"a",10),r.ec(2,"Login"),r.Kb(),r.Kb())}let sw=(()=>{class t{constructor(){this.title="Online Worksheets Data",this.isLoggedIn=!1}ngOnInit(){const t=sessionStorage.getItem("userDetails");this.isLoggedIn=!!t}onLogout(){this.isLoggedIn=!1,sessionStorage.removeItem("userDetails")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-root"]],decls:12,vars:2,consts:[["role","banner",1,"toolbar"],["routerLink","","routerLinkActive","active"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],[4,"ngIf"],["role","main",1,"content"],["id","clouds","alt","Gray Clouds Background","xmlns","http://www.w3.org/2000/svg","width","2611.084","height","485.677","viewBox","0 0 2611.084 485.677"],["id","Path_39","data-name","Path 39","d","M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z","transform","translate(142.69 -634.312)","fill","#eee"],["aria-label","Submitted data","rel","noopener","routerLink","details","routerLinkActive","active","title","Submitted data"],["href","#","aria-label","Log Out","rel","noopener","title","Log out",3,"click"],["aria-label","login","rel","noopener","routerLink","login","routerLinkActive","active","title","Login"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Lb(1,"a",1),r.Jb(2,"img",2),r.Kb(),r.Lb(3,"span"),r.ec(4,"Welcome"),r.Kb(),r.Jb(5,"div",3),r.dc(6,iw,5,0,"div",4),r.dc(7,ow,3,0,"div",4),r.Kb(),r.Lb(8,"div",5),r.Jb(9,"router-outlet"),r.Ub(),r.Lb(10,"svg",6),r.Jb(11,"path",7),r.Kb(),r.Kb()),2&t&&(r.yb(6),r.Yb("ngIf",e.isLoggedIn),r.yb(1),r.Yb("ngIf",!e.isLoggedIn))},directives:[g_,m_,it,v_],styles:['@import url("https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css");[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#1976d2;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:none;margin:5px;padding:5px}a[_ngcontent-%COMP%]:hover{color:#e42c2c}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}']}),t})();var aw=n("w1tV");class uw{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new cw(t,this.observables,this.project))}}class cw extends Am{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Pm(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class lw{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new hw(t,this.predicate))}}class hw extends yn.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function dw(t){return null==t}function fw(t){return"function"==typeof t.set}function pw(t,e){return fw(e)?e:t.ref(e)}function gw(t,e){if("string"==typeof t)return e.stringCase();if(fw(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function yw(t,e,n="on",r=cn.a){return new qt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Ht.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(aw.a)())}function mw(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function vw(t,e){const{payload:n,prevKey:r,key:i}=e,o=mw(t,i),s=function(t,e){if(dw(e))return 0;{const n=mw(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function bw(t){return(dw(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function _w(t,e,n){return function(t,e,n){return yw(t,"value","once",n).pipe(Wy(r=>{const i=[Object(ln.a)(r)];return e.forEach(e=>i.push(yw(t,e,"on",n))),Object(Ky.a)(...i).pipe(_n(vw,[]))}),On())}(t,e=bw(e),n)}function ww(t,e,n){const r=(e=bw(e)).map(e=>yw(t,e,"on",n));return Object(Ky.a)(...r)}function Cw(t,e){return function(n,r){return gw(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Ow(t,e){return function(){return yw(t,"value","on",e)}}n("6Uf2");const Ew=new r.q("angularfire2.realtimeDatabaseURL"),Sw=new r.q("angularfire2.database.use-emulator");let Iw=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new An.d(i),this.keepUnstableUntilFirst=Object(An.h)(this.schedulers);const a=o,u=Object(An.g)(t,i,e);!jn.a.auth&&s&&Object(An.j)(),this.database=Object(An.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>pw(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Cw(r,"update"),set:Cw(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?gw(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>_w(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>ww(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return yw(t,"value","on",e).pipe(Object(Ht.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new uw(t,n))}}(e),Object(Ht.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new lw(r))),Object(Ht.a)(t=>t.actions));var r}(t,ww(t,e).pipe(_n((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>_w(t,r,n).pipe(Object(Ht.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>pw(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Ow(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Ow(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Ht.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(An.c),r.Pb(An.b,8),r.Pb(Ew,8),r.Pb(r.B),r.Pb(r.z),r.Pb(Sw,8),r.Pb(dm,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(An.c),Object(r.Pb)(An.b,8),Object(r.Pb)(Ew,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(Sw,8),Object(r.Pb)(dm,8))},token:t,providedIn:"any"}),t})(),Tw=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Iw]}),t})(),xw=(()=>{class t{}return t.\u0275mod=r.Gb({type:t,bootstrap:[sw]}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[],imports:[[Ut,rw,un,An.a.initializeApp(i),Tw]]}),t})();Object(r.S)(),Ft().bootstrapModule(xw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);